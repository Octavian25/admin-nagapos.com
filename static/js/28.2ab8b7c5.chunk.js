(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{1280:function(e,a,t){"use strict";t.r(a);var s=t(0),n=t.n(s),r=t(31),i=t(72),l=t(111),o=t.n(l),c=t(84),d=t.n(c),m=t(173),h=t.n(m),p=t(13),u=t(158),b=t(41),E=t(24),v=t.n(E),S=t(30),g=t(11),f=t(53),O=t(228),N=t(329),U=t(330),_=t(23),j=t(735),D=t(54),w=t.n(D);const k=[{value:"ADMIN",name:"ADMIN"},{value:"OWN",name:"OWNER"},{value:"KASIR",name:"KASIR"},{value:"SPV",name:"SUPERVISOR"}];class C extends s.Component{constructor(...e){super(...e),this.state={}}componentDidMount(){setTimeout(()=>{this.props.isEdit?document.getElementById("usere_name").focus():document.getElementById("user_id").focus()},100)}render(){return n.a.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off",onKeyPress:e=>{"Enter"===e.key&&e.preventDefault()}},n.a.createElement(N.a,{id:"user_id",label:"User Id",name:"user_id",nouperCase:!0,readOnly:this.props.isEdit,placeholder:"Silahkan Masukan User Id",component:_.e}),n.a.createElement(N.a,{id:"usere_name",name:"usere_name",component:_.e,type:"text",nouperCase:!0,label:"Username",placeholder:"Masukan Username"}),n.a.createElement("div",{className:"form-group"},n.a.createElement(N.a,{label:"Level",name:"level",options:k,value:this.props.level,placeholder:"Silahkan Pilih Level",component:_.f})),this.props.isEdit?null:n.a.createElement(n.a.Fragment,null,n.a.createElement(N.a,{name:"password",component:_.e,type:"password",label:"Password",nouperCase:!0,placeholder:"Masukan Passsword"})),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12 text-right"},n.a.createElement("button",{className:"btn btn-primary",disabled:this.props.submitting,type:"submit"},this.props.isLoading?n.a.createElement(n.a.Fragment,null,n.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Menyimpan"):"Simpan Data"),"\xa0",n.a.createElement("button",{className:"btn btn-white",onClick:()=>this.props.dispatch(Object(p.Cb)()),type:"button",disabled:this.props.isLoading},"Batal"))),this.props.isLoading?n.a.createElement(w.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}C=Object(U.a)({form:"ModalTambahUsers",enableReinitialize:!0,validate:j.a})(C);var M=Object(b.b)(e=>{if(null!==e.manageusers.ShowModalTambahUser)return{initialValues:{user_id:e.manageusers.ShowModalTambahUser.user_id,usere_name:e.manageusers.ShowModalTambahUser.usere_name,level:e.manageusers.ShowModalTambahUser.level}}},null)(C);const x=c.Search.SearchBar,T=c.CSVExport.ExportCSVButton,y=(e,a)=>{v.a.fire({html:"Apakah Anda Yakin Ingin Menghapus <h1><b>User Id "+e+"</b> ?</h1>",icon:"warning",position:"top-center",cancelButtonText:"Tidak",showCancelButton:!0,confirmButtonText:"OK",showConfirmButton:!0}).then(t=>{t.isConfirmed&&Object(g.b)("users/delete/id/"+e,{data:{user_id:e}}).then(()=>{Object(S.d)("Data Berhasil Di Hapus").then(()=>a(Object(u.e)()))})})};a.default=Object(b.b)(e=>({DataUsers:e.manageusers.getDataUser,hideModal:e.datamaster.modalDialog}),null)(class extends n.a.Component{constructor(e){super(e),this.state={isEdit:!1,modalDialog:!1,isLoading:!1,columns:[{dataField:"user_id",text:"User Id ",sort:!0},{dataField:"usere_name",text:"User Name"},{dataField:"level",text:"Level"},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:(e,a)=>{let t={user_id:a.user_id,usere_name:a.usere_name,level:a.level};return n.a.createElement("div",{className:"row text-center"},n.a.createElement("div",{className:"col-12"},n.a.createElement("button",{onClick:()=>this.formEditBaki(t),className:"btn btn-primary mr-3"},n.a.createElement("i",{className:"fa fa-edit"})),n.a.createElement("button",{onClick:()=>y(a.user_id,this.props.dispatch),className:"btn btn-danger"},n.a.createElement("i",{className:"fa fa-trash"}))))}}]},this.handleSubmit=this.handleSubmit.bind(this)}componentDidMount(){this.props.dispatch(Object(u.e)())}handleSubmit(e){if(this.setState({isLoading:!0}),void 0===e.level)return Object(S.b)("Silahkan Pilih Status"),!1;if(3===e.level)return Object(S.b)("Silahkan Pilih Status"),!1;let a={user_name:e.usere_name,level:e.level},t={user_id:e.user_id,user_name:e.usere_name,level:e.level,password:e.password,retype_password:e.password};this.state.isEdit?Object(g.p)("users/update/id/"+e.user_id,a).then(()=>{this.props.dispatch(Object(p.Cb)())}).then(()=>{Object(S.d)("Data Berhasil Di Edit"),this.props.dispatch(Object(u.e)())}).then(()=>{this.props.dispatch(Object(f.d)("ModalTambahUsers"))}).then(()=>{this.setState({isLoading:!1})}).catch(e=>{this.setState({isLoading:!1}),Object(S.a)(void 0===e.response?"Terjadi Kesalahan Saat Menyimpan Data":/e11000/i.test(e.response.data)?"User Id Sudah Terdaftar":e.response.data)}):Object(g.j)("users/add/user",t).then(()=>{this.props.dispatch(Object(p.Cb)())}).then(()=>{Object(S.d)("Data Berhasil Di Simpan"),this.props.dispatch(Object(u.e)())}).then(()=>{this.setState({isLoading:!1})}).then(()=>{this.props.dispatch(Object(f.d)("ModalTambahUsers"))}).catch(e=>{this.setState({isLoading:!1}),Object(S.a)(void 0===e.response?"Terjadi Kesalahan Saat Menyimpan Data":/e11000/i.test(e.response.data)?"User Id Sudah Terdaftar":e.response.data)})}formEditBaki(e){this.props.dispatch(Object(p.Db)()),this.props.dispatch(Object(u.d)(e)),this.setState({isEdit:!0})}ShowModalTambahUser(){this.props.dispatch(Object(p.Db)()),this.props.dispatch(Object(u.d)(!1)),this.setState({isEdit:!1})}render(){return n.a.createElement("div",null,n.a.createElement("ol",{className:"breadcrumb float-xl-right"},n.a.createElement("li",{className:"breadcrumb-item"},n.a.createElement(r.b,{to:"#"},"Manage Users")),n.a.createElement("li",{className:"breadcrumb-item active"},"Data Users")),n.a.createElement("h1",{className:"page-header"},"Data Users "),n.a.createElement(i.a,null,n.a.createElement(i.c,null,"Data Users"),n.a.createElement("br",null),n.a.createElement("div",{className:"container"},n.a.createElement(d.a,{keyField:"user_id",data:this.props.DataUsers||[],columns:this.state.columns,search:!0,exportCSV:{fileName:"Export Data Users.csv"}},e=>n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-6"},n.a.createElement("button",{onClick:()=>this.ShowModalTambahUser(),className:"btn btn-primary"}," ",n.a.createElement("i",{className:"fa fa-plus"})," ")),n.a.createElement("div",{className:"col-6"},n.a.createElement("div",{className:"text-right"},n.a.createElement(x,e.searchProps))),n.a.createElement("hr",null),n.a.createElement("div",{className:"col-12"},n.a.createElement(o.a,Object.assign({pagination:h()()},e.baseProps)),n.a.createElement("br",null)),n.a.createElement("div",{className:"col-6"},n.a.createElement(T,e.csvProps,"Export CSV!!"))))),n.a.createElement("br",null),n.a.createElement(O.a,{title:this.state.isEdit?"Edit Data Users":"Tambah Data Users",size:"P",content:n.a.createElement(M,{isLoading:this.state.isLoading,isEdit:this.state.isEdit,onSubmit:e=>this.handleSubmit(e)})})))}})},735:function(e,a,t){"use strict";a.a=(e=>{const a={};return e.user_id||(a.user_id="User Id Tidak Boleh Kosong"),e.user_name||(a.user_name="Username Tidak Boleh Kosong"),e.level||(a.level="Level Harus Dipilih "),a})}}]);
//# sourceMappingURL=28.2ab8b7c5.chunk.js.map