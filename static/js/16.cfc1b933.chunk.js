(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{1246:function(a,e,t){"use strict";t.r(e);var n=t(0),l=t.n(n),r=t(41),o=t(31),i=t(327),s=t(7),c=t(30),m=t(94),d=t(72),g=t(11),u=t(329),b=t(330),p=t(23),h=t(740),_=t(54),f=t.n(_);class k extends n.Component{constructor(a){super(a),this.state={date:new Date("Y-m-d"),columns:[{dataField:"nama_barang",text:"Nama Barang",footer:""},{dataField:"berat",text:"Berat",formatter:a=>l.a.createElement("span",null,parseFloat(a).toFixed(1)),footer:a=>parseFloat(a.reduce((a,e)=>a+e,0)).toFixed(1)},{dataField:"berat_nota",text:"Berat Nota",formatter:a=>l.a.createElement("span",null,parseFloat(a).toFixed(1)),footer:a=>parseFloat(a.reduce((a,e)=>a+e,0)).toFixed(1)},{dataField:"harga_nota",text:"Harga Nota",formatter:a=>l.a.createElement("span",null,parseInt(a).toLocaleString("kr-KO")),footer:a=>parseInt(a.reduce((a,e)=>a+e,0)).toLocaleString("kr-KO")},{dataField:"harga",text:"Harga",formatter:a=>l.a.createElement("span",null,parseInt(a).toLocaleString("kr-KO")),footer:a=>parseInt(a.reduce((a,e)=>a+e,0)).toLocaleString("kr-KO")},{dataField:"harga_rata",text:"Harga Rata",formatter:a=>l.a.createElement("span",null,parseInt(a).toLocaleString("kr-KO")),footer:a=>parseInt(a.reduce((a,e)=>a+e,0)).toLocaleString("kr-KO")},{dataField:"kondisi",text:"Kondisi",footer:""}]}}render(){return l.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-4"},l.a.createElement(u.a,{id:"no_faktur_group",name:"no_faktur_group",component:p.b,type:"hidden",readOnly:!0}),l.a.createElement(u.a,{name:"nama_customer",component:p.e,type:"text",readOnly:!0,label:"Nama Customer",placeholder:"Masukan Nama Customer"})),l.a.createElement("div",{className:"col-4"},l.a.createElement(u.a,{name:"no_hp",component:p.e,type:"text",readOnly:!0,label:"No Hp",placeholder:"Masukan No Hp"})),l.a.createElement("div",{className:"col-4"},l.a.createElement(u.a,{name:"alamat_customer",component:p.e,type:"text",readOnly:!0,label:"Alamat Customer",placeholder:"Masukan Alamat Customer"})),l.a.createElement("div",{className:"col-12"},l.a.createElement(m.a,{keyField:"nama_barang",exportCsv:!1,data:this.props.detail_barang,columns:this.state.columns,pagination:"off",empty:!0,textEmpty:"Data Barang Kosong"})),l.a.createElement("div",{className:"col-3"},l.a.createElement("button",{type:"button",onClick:this.props.back,className:"btn btn-primary btn-block"},l.a.createElement("i",{className:"fa fa-arrow-left"})," Kembali")),l.a.createElement("div",{className:"col-9"},l.a.createElement("button",{tabIndex:"2",className:"btn btn-primary btn-block",disabled:this.props.isLoadingBatalBeli,type:"submit"},this.props.isLoadingBatalBeli?l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Membatal"):"Batal Pembelian"))),l.a.createElement("br",null),this.props.isLoadingBatalBeli?l.a.createElement(f.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}k=Object(b.a)({form:"HeadBatalBeli",enableReinitialize:!0,validate:h.a})(k);var E=Object(r.b)(a=>({detail_barang:a.pembelian.showModalBatalBeli.detail_barang,initialValues:{no_faktur_group:a.pembelian.showModalBatalBeli.no_faktur_group,nama_customer:a.pembelian.showModalBatalBeli.nama_customer,no_hp:a.pembelian.showModalBatalBeli.no_hp,alamat_customer:a.pembelian.showModalBatalBeli.alamat_customer}}))(k),B=t(735);class S extends n.Component{constructor(a){super(a),this.state={isLoading:!1,isLoadingBatal:!1,FormModal:""},this.setStartDate=this.setStartDate.bind(this),this.setLastDate=this.setLastDate.bind(this)}componentDidMount(){}setStartDate(a){this.setState({tgl_awal:new Date(a)})}setLastDate(a){this.setState({tgl_akhir:new Date(a)})}render(){return l.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-4"},l.a.createElement(u.a,{name:"tgl_awal",component:p.c,label:"Tanggal Dari",type:"text",selected:this.state.tgl_awal,onChange:a=>this.setStartDate(a),placeholder:"Masukan Tanggal Dari"})),l.a.createElement("div",{className:"col-lg-4"},l.a.createElement(u.a,{name:"tgl_akhir",component:p.c,type:"text",selected:this.state.tgl_akhir,onChange:a=>this.setLastDate(a),label:"Tanggal Akhir",placeholder:"Masukan Tanggal Akhir"})),l.a.createElement("div",{className:"col-4"},l.a.createElement("label",null," \xa0"),l.a.createElement("button",{className:"btn btn-primary btn-block",disabled:this.props.isLoading,type:"submit"},this.props.isLoading?l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Mencari"):"Cari Pembelian"))),this.props.isLoading?l.a.createElement(f.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}S=Object(b.a)({form:"HeadPembelian",enableReinitialize:!0,validate:B.a})(S);var L=Object(r.b)(a=>({initialValues:{tgl_awal:Object(s.h)(),tgl_akhir:Object(s.h)()}}))(S),O=t(110);e.default=Object(r.b)(null)(class extends l.a.Component{constructor(a){super(a),this.state={isLoadingServicesSelesai:!1,isLoadingBatalBeli:!1,isLoading:!1,dataservices:[],FormModal:!1,pembayaran:!1,columns:[{dataField:"no_faktur_beli",text:"No FB",footerAttrs:{colSpan:"3"},footer:"Total"},{dataField:"nama_customer",text:"Nama Customer"},{dataField:"no_hp",text:"No Hp"},{dataField:"harga",text:"Harga",formatter:a=>l.a.createElement("span",null,parseInt(a).toLocaleString("kr-KO")),footer:a=>parseInt(a.reduce((a,e)=>a+e,0)).toLocaleString("kr-KO")},{dataField:"harga_nota",text:"Harga Nota",formatter:a=>l.a.createElement("span",null,parseInt(a).toLocaleString("kr-KO")),footer:a=>parseInt(a.reduce((a,e)=>a+e,0)).toLocaleString("kr-KO")},{dataField:"harga_rata",text:"Harga Rata",formatter:a=>l.a.createElement("span",null,parseInt(a).toLocaleString("kr-KO")),footer:a=>parseInt(a.reduce((a,e)=>a+e,0)).toLocaleString("kr-KO")},{dataField:"kondisi",text:"Kondisi",footer:""},{dataField:"ambil",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:(a,e,t)=>l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("button",{type:"button","data-tooltip":"Batal Pembelian",onClick:()=>this.shoBatalPembelian(e),className:"btn btn-danger"},l.a.createElement("i",{className:"fa fa-file-export"})),"\xa0",l.a.createElement("button",{"data-tooltip":"Reprint Pembelian",type:"button",onClick:()=>this.ReprintPembelian(e),className:"btn btn-success mr-3"},l.a.createElement("i",{className:"fa fa-print"})))),footer:""}]},this.handleSubmit=this.handleSubmit.bind(this)}ReprintPembelian(a){let e={no_faktur_group:a.no_faktur_group};Object(g.j)("pembelian/get/bynota",e).then(a=>{let e="";a.data.notabeli.forEach((a,t)=>{let n=a.head.n_alamat_customer.length;e="========================================\n      Tanggal          : ".concat(a.head.tgl_system,"\n      Nama Customer    : ").concat(a.head.nama_customer,"\n      No Hp            : ").concat(a.head.no_hp,"\n      Alamat Customer  : ").concat(a.head.n_alamat_customer.split(0,20),"\n      "),n>20&&(e+="                   ".concat(a.head.n_alamat_customer.split(0,20),"\n      ")),n>40&&(e+="                   ".concat(a.head.n_alamat_customer.split(40,20),"\n      ")),e+="========================================\n",e+="Keterangan\n",e+="========================================\n";let l=0,r=0;a.detail.forEach((a,t)=>{l+=a.harga,r+=a.harga_nota,e+="No Faktur Beli : ".concat(a.no_faktur_beli,"\n"),e+="Jenis Barang   : ".concat(a.kode_dept,"\n"),e+="Nama Barang    : ".concat(a.nama_barang,"\n"),e+="Berat          : ".concat(a.berat.toFixed(3),"\n"),e+="Harga          : ".concat(a.harga.toLocaleString("kr-KO"),"\n"),e+="========================================\n"}),e+="Total          : ".concat(l.toLocaleString("kr-KO"),"\n"),e+="========================================\n",e+="Harga Waktu Beli   : ".concat(l.toLocaleString("kr-KO"),"\n"),e+="Harga Waktu Jual   : ".concat(r.toLocaleString("kr-KO"),"\n"),e+="\n\n\n\n\n\n\n      "}),document.getElementById("myInput").value=e}).then(()=>{console.log("masuk");const a=document.createElement("a"),e=new Blob([document.getElementById("myInput").value],{type:"text/plain;charset=utf-8"});a.href=URL.createObjectURL(e),a.download="autoprint_pembelian.txt",document.body.appendChild(a),a.click()}).catch(a=>{})}shoBatalPembelian(a){let e={no_faktur_group:a.no_faktur_group};Object(g.j)("batalpembelian/get/by-faktur",e).then(a=>{0===a.data.length?(Object(c.e)("info",a.data.message),this.setState({FormModal:!1})):(this.setState({FormModal:!0}),a.data.forEach((a,e)=>{let t={no_faktur_group:a._id.no_faktur_group,tgl_system:a._id.tgl_system,kode_sales:a._id.kode_sales,nama_customer:a._id.nama_customer,no_hp:a._id.no_hp,alamat_customer:a._id.alamat_customer,kode_gudang:a._id.kode_gudang,detail_barang:a.detail_barang};this.props.dispatch(Object(i.b)(t))}))}).catch(a=>{console.log(a),Object(c.e)("info","Terjadi Kesalahan Saat Request Data"),this.setState({FormModal:!1})})}handleSubmit(a){let e={tgl_awal:Object(s.e)(O(new Date(a.tgl_awal)).format("YYYY-MM-DD")),tgl_akhir:Object(s.e)(O(new Date(a.tgl_akhir)).format("YYYY-MM-DD"))};Object(s.m)("tgl_laporan",JSON.stringify(e)),this.setState({isLoading:!0}),Object(g.j)("pembelian/get/by-tanggal",e).then(a=>{0===a.data.length?(Object(c.e)("info","Data Pembelian Tidak Ada"),this.setState({isLoading:!1,datapembelian:[]})):(Object(c.e)("success","Data Pembelian Tersedia"),this.setState({isLoading:!1,datapembelian:a.data}))}).catch(a=>{Object(c.e)("info","Data Pembelian Tidak Ada"),this.setState({isLoading:!1,datapembelian:[]})})}batalPembelian(a){this.setState({isLoadingBatalBeli:!0}),setTimeout(()=>{let e={no_faktur_group:a.no_faktur_group};Object(g.j)("batalpembelian/simpan",e).then(a=>{Object(c.e)("success",a.data.message),this.setState({FormModal:!1,isLoadingBatalBeli:!1});let e=0===Object(s.l)("tgl_laporan").length?[]:JSON.parse(Object(s.l)("tgl_laporan"));Object(g.j)("pembelian/get/by-tanggal",e).then(a=>{this.setState({datapembelian:a.data})})}).catch(a=>{Object(c.e)("info","Data Pembelian Tidak Ada"),this.setState({FormModal:!1,isLoading:!1,isLoadingBatalBeli:!1})})},500)}back(){this.setState({FormModal:!1})}render(){return l.a.createElement("div",null,l.a.createElement("ol",{className:"breadcrumb float-xl-right"},l.a.createElement("li",{className:"breadcrumb-item"},l.a.createElement(o.b,{to:"#"},"Pembelian")),l.a.createElement("li",{className:"breadcrumb-item active"},"Lihat Pembelian")),l.a.createElement("h1",{className:"page-header"},"Lihat Pembelian "),l.a.createElement(d.a,null,l.a.createElement("textarea",{style:{display:"none"},id:"myInput",rows:"100",cols:"100"}),l.a.createElement(d.c,null," ",!0===this.state.FormModal?"Batal Pembelian":"Lihat Pembelian"),l.a.createElement("br",null),l.a.createElement("div",{className:"container"},!0===this.state.FormModal?l.a.createElement(E,{back:()=>this.back(),isLoadingBatalBeli:this.state.isLoadingBatalBeli,onSubmit:a=>this.batalPembelian(a)}):l.a.createElement(l.a.Fragment,null,l.a.createElement(L,{onSubmit:a=>this.handleSubmit(a),isLoading:this.state.isLoading}),l.a.createElement(m.a,{keyField:"no_faktur_group",exportCsv:!1,data:this.state.datapembelian,columns:this.state.columns,empty:!0,textEmpty:"Data Barang Kosong"}))),l.a.createElement("br",null)),this.state.isLoading?l.a.createElement(f.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}})},735:function(a,e,t){"use strict";e.a=(a=>{const e={};return a.user_id||(e.user_id="User Id Tidak Boleh Kosong"),a.user_name||(e.user_name="Username Tidak Boleh Kosong"),a.level||(e.level="Level Harus Dipilih "),e})},740:function(a,e,t){"use strict";e.a=(a=>{const e={};return a.tgl_selesai||(e.tgl_selesai="Tanggal Selesai Tidak Boleh Kosong"),a.tgl_ambil||(e.tgl_ambil="Tanggal Tidak Boleh Kosong"),e})}}]);
//# sourceMappingURL=16.cfc1b933.chunk.js.map