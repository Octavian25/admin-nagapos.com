(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1208:function(a,e,t){"use strict";t.r(e);var n=t(39),r=t(40),l=t(42),s=t(41),o=t(0),i=t.n(o),c=t(47),m=t(27),u=t(15),g=t(68),p=t(227),h=t(24),d=t(92),b=t(131),_=t(13),y=t(3),f=t(723),E=t(48),j=Object(y.w)({prefix:"Rp. ",locale:"kr-KO"}),k=[{value:"CASH",name:"CASH"},{value:"DEBET",name:"DEBET"},{value:"TRANSFER",name:"TRANSFER"},{value:"CREDIT",name:"CREDIT"}],O=function(a){Object(l.a)(t,a);var e=Object(s.a)(t);function t(a){var r;return Object(n.a)(this,t),(r=e.call(this,a)).state={isLoading:!1,type_pembayaran:"CASH",lebih:!1,columns:[{dataField:"type",text:"Type",footerAttrs:{colSpan:"1"},footer:"Grand Total"},{dataField:"Total",text:"Total",footer:""}]},r.setStartDate=r.setStartDate.bind(Object(E.a)(r)),r}return Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(u.sb)());var a=JSON.parse(localStorage.getItem("jml_byar_pelunasan_hutang"));this.props.change("grand_total_pembayaran",a),this.props.change("harus_bayar_rp",a),this.props.change("jenis","CASH"),setTimeout(function(){document.getElementById("cash_trx_penjualan").focus()},100)}},{key:"hitungTotal",value:function(){this.props.change("kembali",this.props.kembali),this.props.change("nominal_kembali",this.props.nominal_kembali)}},{key:"pilihPembyaran",value:function(a){"CASH"===a?this.setState({type_pembayaran:"CASH"}):"TRANSFER"===a?this.setState({type_pembayaran:"TRANSFER"}):"DEBET"===a?this.setState({type_pembayaran:"DEBET"}):this.setState({type_pembayaran:"CREDIT"}),this.props.change("cash","")}},{key:"setStartDate",value:function(a){this.setState({tgl_awal:new Date(a)})}},{key:"copyValue",value:function(a){this.props.change("cash",parseInt(Object(y.j)(a)))}},{key:"render",value:function(){var a=this;return y.n.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:function(a){"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},y.n.createElement("div",{className:"row"},y.n.createElement("div",{className:"col-6"},y.n.createElement(y.c,Object.assign({name:"grand_total_pembayaran",component:y.p,type:"text",onChange:this.hitungTotal(),readOnly:!0},j,{label:"Total Harga Jual",placeholder:"Total Harga Jual"}))),y.n.createElement("div",{className:"col-6"},y.n.createElement(y.c,Object.assign({id:"harus_bayar_rp",name:"harus_bayar_rp",component:y.p,type:"text",onChange:this.hitungTotal(),readOnly:!0},j,{label:"Harus Bayar Rp",placeholder:"Harus Bayar Rp"}))),y.n.createElement("div",{className:"col-6"},y.n.createElement(y.c,{name:"jenis",label:"Pilih Jenis Bayar",placeholder:"Pilih Jenis Pembayaran",options:k,onChange:function(e){return a.pilihPembyaran(e)},component:y.q})),y.n.createElement("div",{className:"col-6",style:{display:"CASH"===this.state.type_pembayaran?"none":(this.state.type_pembayaran,"block")}},y.n.createElement(y.c,{tabIndex:"1",name:"nama_bank",id:"nama_bank",component:y.p,type:"text",label:"Bank",placeholder:"Masukan Nama Bank"})),y.n.createElement("div",{className:"col-6",style:{display:"CASH"===this.state.type_pembayaran?"none":"DEBET"===this.state.type_pembayaran?"none":"block"}},y.n.createElement(y.c,{tabIndex:"1",name:"no_card",id:"no_card",component:y.p,type:"text",label:"TRANSFER"===this.state.type_pembayaran?"No Rek":"Card No",placeholder:"TRANSFER"===this.state.type_pembayaran?"Masukan No Rek":"Masukan Card No"})),y.n.createElement("div",{className:"col-6"},y.n.createElement(y.c,Object.assign({tabIndex:"1",name:"cash",id:"cash_trx_penjualan",component:y.p,type:"text",label:"Nominal",onChange:this.hitungTotal()},j,{normalize:y.j,placeholder:"Masukan Nominal"}))),y.n.createElement("div",{className:"col-6",style:{display:"CREDIT"===this.state.type_pembayaran?"block":"none"}},y.n.createElement(y.c,{tabIndex:"1",name:"fee",id:"fee",component:y.p,type:"text",label:"Fee (%)",normalize:y.j,placeholder:"5"})),y.n.createElement("div",{className:"col-6 d-none"},y.n.createElement(y.c,{tabIndex:"1",name:"nominal_kembali",component:y.p,type:"text",label:"Nominal",placeholder:"Masukan Nominal"})),y.n.createElement("div",{className:"col-6"},y.n.createElement(y.c,{name:"kembali",id:"sisa_bayar",component:y.p,type:"text",readOnly:!0,label:"Sisa",onFocus:function(e){return a.copyValue(e.target.value)},placeholder:"Sisa Pembayaran"})),y.n.createElement("div",{className:"CASH"===this.state.type_pembayaran?"col-6 text-right":"TRANSFER"===this.state.type_pembayaran?"col-6 text-right":"col-12 text-right"},y.n.createElement("br",null),y.n.createElement("label",null,"\xa0"),y.n.createElement("button",{tabIndex:"2",disabled:this.props.notif,className:"btn btn-primary"}," ",y.n.createElement("i",{className:"fa fa-plus"})))))}}]),t}(y.b);O=Object(y.O)({form:"HeadInputPembayaran",enableReinitialize:!0,validate:f.a})(O);var N=Object(y.x)("HeadInputPembayaran"),v=Object(y.u)(function(a){var e=N(a,"grand_total_pembayaran","harus_bayar_rp","cash"),t=e.cash,n=e.harus_bayar_rp,r=JSON.parse(localStorage.getItem("trx_pemabayaran_hutang"))||[],l=0;r.forEach(function(a){l=a.nominal+l});var s=parseInt(parseFloat(l||0)-parseFloat(n||0));return{kembali:s.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),nominal_kembali:s+parseInt(t),initialValues:{estimasi_pesanan:Object(y.E)()}}})(O),S=t(61),A=t.n(S);class L extends y.b{constructor(a){super(a),this.state={isLoading:!1,type_pembayaran:"CASH",columns:[{dataField:"jenis",text:"Jenis",footerAttrs:{colSpan:"2"},footer:"Grand Total"},{dataField:"keterangan",text:"Keterangan"},{dataField:"nominal",text:"Total",formatter:a=>y.n.createElement("span",null,parseInt(a).toLocaleString("kr-KO")),footer:a=>parseInt(a.reduce((a,e)=>a+e,0)).toLocaleString("kr-KO")},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:(a,e,t)=>y.n.createElement("div",{className:"row text-center"},y.n.createElement("div",{className:"col-12"},y.n.createElement("button",{type:"button",disabled:"TITIPAN"===e.keterangan,onClick:()=>this.hapusdata(t),className:"btn btn-danger mr-3"},y.n.createElement("i",{className:"fa fa-trash"})))),footer:""}]}}hapusdata(a){y.r.fire({title:"Anda Yakin !!",text:"Ingin Menghapus Data Ini ?",icon:"warning",position:"top-center",cancelButtonText:"Tidak",showCancelButton:!0,confirmButtonText:"OK",showConfirmButton:!0}).then(e=>{if(e.isConfirmed){let e=Object(y.D)("trx_pemabayaran_hutang");e.splice(a,1),Object(y.Q)("trx_pemabayaran_hutang",e),this.setState({status:"berhasil"})}})}simpanPembayaran(a){if(void 0===a.no_card&&"CASH"!==a.jenis&&"DEBET"!==a.jenis)return Object(y.t)("info","Nomor kartu tidak boleh kosong"),!1;if(void 0===a.nama_bank&&"CASH"!==a.jenis)return Object(y.t)("info","Nama Bank tidak boleh kosong"),!1;if(void 0===a.cash||"0"===a.cash)return Object(y.t)("info","Nominal tidak boleh kosong"),!1;let e={total_transaksi:a.harus_bayar_rp,total_trx:a.harus_bayar_rp,sisa_bayar:a.nominal_kembali};Object(y.Q)("sisa_bayar_hutang",e);let t=JSON.parse(localStorage.getItem("trx_pemabayaran_hutang"))||[];if("CASH"===a.jenis||t.length){if("CASH"!==a.jenis){if(a.kembali.replace(/[^0-9]/g,"")-a.cash<0&&0!==parseInt(a.kembali))return Object(y.t)("info","Pembayaran tidak boleh lebih dari sisa"),!1;if(t.reduce((a,e)=>a+e.nominal,0)>=a.harus_bayar_rp)return Object(y.t)("info","Pembayaran Sudah Cukup"),!1}}else if(a.kembali.replace(/[^0-9]/g,"")-a.cash<0)return Object(y.t)("info","Pembayaran tidak boleh lebih dari sisa"),!1;if(t.findIndex(a=>"CASH"===a.jenis)>=0){if(a.kembali.replace(/[^0-9]/g,"")-a.cash<0&&t.reduce((a,e)=>a+e.nominal,0)>a.harus_bayar_rp)return Object(y.t)("info","Pembayaran Sudah Cukup"),!1;if(t.reduce((a,e)=>a+e.nominal,0)>=a.harus_bayar_rp)return Object(y.t)("info","Pembayaran Sudah Cukup"),!1}if(-1===t.findIndex(e=>e.jenis===a.jenis)){let e="";e="CASH"===a.jenis?"CASH":"TRANSFER"===a.jenis?a.no_card+" - "+a.nama_bank:a.nama_bank;let n={jenis:a.jenis,nominal:parseInt(a.cash),nama_bank:void 0!==a.nama_bank?a.nama_bank.toUpperCase():"-",fee:"CREDIT"===a.jenis&&a.fee||0,no_card:a.no_card||"-",keterangan:e.toUpperCase()};t.push(n),this.setState({masuk:!0}),Object(y.Q)("trx_pemabayaran_hutang",t)}else{let e=Object(y.D)("trx_pemabayaran_hutang");e=e.map(e=>(e.jenis===a.jenis&&(e.nominal+=parseInt(a.cash)),e)),Object(y.Q)("trx_pemabayaran_hutang",e),this.setState({status:!0})}}render(){return y.n.createElement(y.n.Fragment,null,y.n.createElement(v,{onSubmit:a=>this.simpanPembayaran(a)}),y.n.createElement("hr",null),y.n.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},y.n.createElement(y.s,{keyField:"jenis",exportCsv:!1,data:Object(y.D)("trx_pemabayaran_hutang")||[],columns:this.state.columns,empty:!0,pagination:"off",textEmpty:"Data Pembayaran Kosong"}),y.n.createElement("div",{className:"row"},y.n.createElement("div",{className:"col-6"}),y.n.createElement("div",{className:"col-6 text-right"},y.n.createElement("button",{className:"btn btn-primary",disabled:this.props.isLoading,onClick:()=>this.props.bayarSekarang(),type:"button"},this.props.isLoading?y.n.createElement(y.n.Fragment,null,y.n.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Diproses"):"Bayar Sekarang"))),this.props.isLoading?y.n.createElement(A.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null))}}L=Object(y.O)({form:"ModalPembayaran",enableReinitialize:!0,validate:f.a})(L);var H=Object(y.u)(a=>{let e=Object(y.D)("data_barang_penjualan_tmp")||[],t="PENJUALAN";return e.forEach(a=>{t="-"===a.no_titip_group?"PENJUALAN":"TITIPAN"}),{status:t}})(L),T=t(328),x=t(329),B=t(30),I=t(7);class P extends o.Component{constructor(a){super(a),this.state={isLoadingDataCustomer:!1,isLoadingBatal:!1,isLoadingHutang:!1,FormModal:""},this.setStartDate=this.setStartDate.bind(this),this.setLastDate=this.setLastDate.bind(this)}componentDidMount(){Object(I.p)("trx_pemabayaran_hutang",[]),Object(I.p)("sisa_bayar_hutang",[])}setStartDate(a){this.setState({tgl_awal:new Date(a)})}setLastDate(a){this.setState({tgl_akhir:new Date(a)})}render(){return i.a.createElement(b.a,null,i.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-4"},i.a.createElement(T.a,{name:"tgl_awal",component:B.c,label:"Tanggal Dari",type:"text",selected:this.state.tgl_awal,onChange:a=>this.setStartDate(a),placeholder:"Masukan Tanggal Dari"})),i.a.createElement("div",{className:"col-lg-4"},i.a.createElement(T.a,{name:"tgl_akhir",component:B.c,type:"text",selected:this.state.tgl_akhir,onChange:a=>this.setLastDate(a),label:"Tanggal Akhir",placeholder:"Masukan Tanggal Akhir"})),i.a.createElement("div",{className:"col-4"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"\xa0"),i.a.createElement("button",{className:"btn btn-primary btn-block",disabled:this.props.isloading,type:"submit"},this.props.isLoading?i.a.createElement(i.a.Fragment,null,i.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Mencari"):"Cari Hutang")))),this.props.isLoading?i.a.createElement(A.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null))}}P=Object(x.a)({form:"HeadLihatHutang",enableReinitialize:!0})(P);var w=Object(c.b)(a=>({initialValues:{tgl_awal:Object(I.h)(),tgl_akhir:Object(I.h)()}}))(P),C=t(134),M=t(739);const D=Object(C.createNumberMask)({prefix:"Rp. ",locale:"kr-KO"});class F extends o.Component{constructor(a){super(a),this.state={date:new Date("Y-m-d"),columns:[{dataField:"nama_barang",text:"Nama Barang",footer:""},{dataField:"berat",text:"Berat",formatter:a=>i.a.createElement("span",null,parseFloat(a).toFixed(1)),footer:a=>parseFloat(a.reduce((a,e)=>a+e,0)).toFixed(1)},{dataField:"jumlah",text:"Jumlah",formatter:a=>i.a.createElement("span",null,parseInt(a).toLocaleString("kr-KO")),footer:a=>parseInt(a.reduce((a,e)=>a+e,0)).toLocaleString("kr-KO")}]}}getTotalAll(){let a=JSON.parse(localStorage.getItem("total_rp_service_ambil"))||[],e=0;return a.forEach((a,t)=>{e+=a.jml}),parseInt(e).toLocaleString("kr-KO")}getTotal(a){let e=JSON.parse(localStorage.getItem("total_rp_service_ambil"))||[],t={jml:parseInt(this.props.detail_barang[a].ongkos*this.props.detail_barang[a].jumlah)};return e.push(t),localStorage.setItem("total_rp_service_ambil",JSON.stringify(e)),parseInt(this.props.detail_barang[a].ongkos*this.props.detail_barang[a].jumlah).toLocaleString("kr-KO")}hidtungDenda(){this.props.change("jumlah_bayar",this.props.jumlah_bayar)}render(){return i.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-4"},i.a.createElement(T.a,{id:"tgl_system",name:"tgl_system",component:B.b,type:"hidden",readOnly:!0}),i.a.createElement(T.a,{id:"no_faktur_hutang",name:"no_faktur_hutang",component:B.b,type:"hidden",readOnly:!0}),i.a.createElement(T.a,{name:"nama_customer",component:B.e,type:"text",readOnly:!0,label:"Nama Customer",placeholder:"Masukan Nama Cistomer"})),i.a.createElement("div",{className:"col-4"},i.a.createElement(T.a,{name:"alamat_customer",component:B.e,type:"text",readOnly:!0,label:"Alamat Customer",placeholder:"Masukan Alamat Cistomer"})),i.a.createElement("div",{className:"col-4"},i.a.createElement(T.a,{name:"no_hp",component:B.e,type:"text",readOnly:!0,label:"No Hp",placeholder:"Masukan No Hp"})),i.a.createElement("div",{className:"col-4 d-none"},i.a.createElement(T.a,{id:"tgl_lunas_hutang",onChange:this.hidtungDenda(),name:"tgl_lunas_hutang",component:B.e,type:"date",label:"Tanggal Lunas Hutang"})),i.a.createElement("div",{className:"col-4"},i.a.createElement(T.a,{id:"total_hutang",name:"total_hutang",component:B.e,type:"text",label:"Hutang Pokok",readOnly:!0})),i.a.createElement("div",{className:"col-4"},i.a.createElement(T.a,{id:"bunga",name:"bunga",component:B.e,type:"text",label:"Bunga",readOnly:!0})),i.a.createElement("div",{className:"col-4"},i.a.createElement(T.a,{name:"lama_pinjam",component:B.e,type:"text",readOnly:!0,label:"Lama Hari"})),i.a.createElement("div",{className:"col-4"},i.a.createElement(T.a,{name:"tgl_tempo",component:B.e,type:"text",readOnly:!0,label:"Tanggal Jatuh Tempo"})),i.a.createElement("div",{className:"col-4"},i.a.createElement(T.a,Object.assign({id:"jumlah_bayar_pelunasan_hutang",name:"jumlah_bayar",component:B.e,type:"telp",readOnly:!0},D,{label:"Sisa Hutang + Bunga"}))),i.a.createElement("div",{className:"col-2"},i.a.createElement("label",null," \xa0"),i.a.createElement("button",{type:"button",onClick:()=>this.props.showModalPembayaran(),className:"btn btn-success btn-block"},"Pelunasan Hutang")),i.a.createElement("div",{className:"col-2"},i.a.createElement("label",null," \xa0"),i.a.createElement("button",{type:"button",onClick:()=>this.props.showModalPeremajaan(),className:"btn btn-primary btn-block"},"Peremajaan")),i.a.createElement("div",{className:"col-12"},i.a.createElement(d.a,{keyField:"nama_barang",exportCsv:!1,data:this.props.detail_barang,columns:this.state.columns,pagination:"off",empty:!0,textEmpty:"Data Barang Kosong"})),i.a.createElement("div",{className:"col-3"},i.a.createElement("button",{type:"button",onClick:this.props.back,className:"btn btn-primary btn-block"},i.a.createElement("i",{className:"fa fa-arrow-left"})," Kembali"))),i.a.createElement("br",null))}}F=Object(x.a)({form:"pelunasanTransaksiHutang",enableReinitialize:!0,validate:M.a})(F);var R=Object(c.b)(a=>(localStorage.setItem("jml_byar_pelunasan_hutang",JSON.stringify(a.hutang.showModalLihatHutang.jumlah_bayar)),{detail_barang:a.hutang.showModalLihatHutang.detail_barang,jumlah_bayar:a.hutang.showModalLihatHutang.jumlah_bayar,lama_pinjam:a.hutang.showModalLihatHutang.lama_pinjam,initialValues:{tgl_lunas_hutang:Object(I.i)(),tgl_system:a.hutang.showModalLihatHutang.tgl_system,no_faktur_hutang:a.hutang.showModalLihatHutang.no_faktur_hutang,lama_pinjam:a.hutang.showModalLihatHutang.lama_pinjam,tgl_tempo:a.hutang.showModalLihatHutang.tgl_tempo,no_hp:a.hutang.showModalLihatHutang.no_hp,nama_customer:a.hutang.showModalLihatHutang.nama_customer,alamat_customer:a.hutang.showModalLihatHutang.alamat_customer,total_hutang:parseInt(a.hutang.showModalLihatHutang.jumlah_hutang).toLocaleString("kr-KO"),bunga:a.hutang.showModalLihatHutang.bunga}}))(F),K=t(332);const U=Object(C.createNumberMask)({prefix:"Rp. ",locale:"kr-KO"});class J extends o.Component{constructor(a){super(a),this.state={date:new Date("Y-m-d"),columns:[{dataField:"nama_barang",text:"Nama Barang",footer:""},{dataField:"berat",text:"Berat",formatter:a=>i.a.createElement("span",null,parseFloat(a).toFixed(1)),footer:a=>parseFloat(a.reduce((a,e)=>a+e,0)).toFixed(1)},{dataField:"jumlah",text:"Jumlah",formatter:a=>i.a.createElement("span",null,parseInt(a).toLocaleString("kr-KO")),footer:a=>parseInt(a.reduce((a,e)=>a+e,0)).toLocaleString("kr-KO")}]}}getTotalAll(){let a=JSON.parse(localStorage.getItem("total_rp_service_ambil"))||[],e=0;return a.forEach((a,t)=>{e+=a.jml}),parseInt(e).toLocaleString("kr-KO")}getTotal(a){let e=JSON.parse(localStorage.getItem("total_rp_service_ambil"))||[],t={jml:parseInt(this.props.detail_barang[a].ongkos*this.props.detail_barang[a].jumlah)};return e.push(t),localStorage.setItem("total_rp_service_ambil",JSON.stringify(e)),parseInt(this.props.detail_barang[a].ongkos*this.props.detail_barang[a].jumlah).toLocaleString("kr-KO")}hidtungDenda(){this.props.change("jumlah_bayar",this.props.jumlah_bayar)}render(){return i.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-4"},i.a.createElement(T.a,{id:"tgl_system",name:"tgl_system",component:B.b,type:"hidden",readOnly:!0}),i.a.createElement(T.a,{id:"no_faktur_hutang",name:"no_faktur_hutang",component:B.b,type:"hidden",readOnly:!0}),i.a.createElement(T.a,{name:"nama_customer",component:B.e,type:"text",readOnly:!0,label:"Nama Customer",placeholder:"Masukan Nama Cistomer"})),i.a.createElement("div",{className:"col-4"},i.a.createElement(T.a,{name:"alamat_customer",component:B.e,type:"text",readOnly:!0,label:"Alamat Customer",placeholder:"Masukan Alamat Cistomer"})),i.a.createElement("div",{className:"col-4"},i.a.createElement(T.a,{name:"no_hp",component:B.e,type:"text",readOnly:!0,label:"No Hp",placeholder:"Masukan No Hp"})),i.a.createElement("div",{className:"col-4"},i.a.createElement(T.a,{onChange:this.hidtungDenda(),name:"tgl_lunas_hutang",component:B.e,type:"date",readOnly:!0,label:"Tanggal Lunas Hutang"})),i.a.createElement("div",{className:"col-4"},i.a.createElement(T.a,{id:"total_hutang",name:"total_hutang",component:B.e,type:"text",label:"Hutang Pokok",readOnly:!0})),i.a.createElement("div",{className:"col-4"},i.a.createElement(T.a,{id:"bunga",name:"bunga",component:B.e,type:"text",label:"Bunga",readOnly:!0})),i.a.createElement("div",{className:"col-4"},i.a.createElement(T.a,{name:"lama_pinjam",component:B.e,type:"text",readOnly:!0,label:"Lama Hari"})),i.a.createElement("div",{className:"col-4"},i.a.createElement(T.a,{name:"tgl_tempo",component:B.e,type:"text",readOnly:!0,label:"Tanggal Jatuh Tempo"})),i.a.createElement("div",{className:"col-4"},i.a.createElement(T.a,Object.assign({id:"jumlah_bayar_pelunasan_hutang",name:"jumlah_bayar",component:B.e,type:"telp",readOnly:!0},U,{label:"Jumlah Hutang"}))),i.a.createElement("div",{className:"col-12"},i.a.createElement(d.a,{keyField:"nama_barang",exportCsv:!1,data:this.props.detail_barang,columns:this.state.columns,pagination:"off",empty:!0,textEmpty:"Data Barang Kosong"})),i.a.createElement("div",{className:"col-3"},i.a.createElement("button",{type:"button",onClick:this.props.back,className:"btn btn-primary btn-block"},i.a.createElement("i",{className:"fa fa-arrow-left"})," Kembali")),i.a.createElement("div",{className:"col-9"},i.a.createElement("button",{tabIndex:"2",className:"btn btn-success btn-block",disabled:this.props.isloadingBtl,type:"submit"},this.props.isloadingBtl?i.a.createElement(i.a.Fragment,null,i.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Batal Hutang"):"Batal Hutang"))),i.a.createElement("br",null),this.props.isloadingBtl?i.a.createElement(A.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}J=Object(x.a)({form:"pelunasanTransaksiHutang",enableReinitialize:!0,validate:M.a})(J);var G=Object(c.b)(a=>{const e=Object(K.a)("pelunasanTransaksiHutang");let t=new Date(e(a,"tgl_lunas_hutang")),n=new Date(a.hutang.showModalLihatHutang.tgl_system),r=(t.getTime()-n.getTime())/864e5,l=parseFloat(a.hutang.showModalLihatHutang.bunga||0)/parseFloat(100)*parseFloat(a.hutang.showModalLihatHutang.jumlah_hutang||0)*(parseFloat(r||0)/parseFloat(30)),s=parseInt(a.hutang.showModalLihatHutang.jumlah_hutang)+parseInt(l);return localStorage.setItem("jml_byar_pelunasan_hutang",JSON.stringify(s)),{detail_barang:a.hutang.showModalLihatHutang.detail_barang,jumlah_bayar:s,initialValues:{tgl_lunas_hutang:Object(I.i)(),tgl_system:a.hutang.showModalLihatHutang.tgl_system,no_faktur_hutang:a.hutang.showModalLihatHutang.no_faktur_hutang,lama_pinjam:a.hutang.showModalLihatHutang.lama_pinjam,tgl_tempo:a.hutang.showModalLihatHutang.tgl_tempo,no_hp:a.hutang.showModalLihatHutang.no_hp,nama_customer:a.hutang.showModalLihatHutang.nama_customer,alamat_customer:a.hutang.showModalLihatHutang.alamat_customer,total_hutang:parseInt(a.hutang.showModalLihatHutang.jumlah_hutang).toLocaleString("kr-KO"),bunga:a.hutang.showModalLihatHutang.bunga}}})(J),Y=t(108);class z extends y.b{constructor(a){super(a),this.state={isLoading:!1}}componentDidMount(){setTimeout(()=>{let a=document.getElementById("bunga").value;this.props.change("bunga_lama",a),document.getElementById("bunga_baru").focus()},100)}render(){return y.n.createElement(y.n.Fragment,null,y.n.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},y.n.createElement("div",{className:"row"},y.n.createElement("div",{className:"col-6"},y.n.createElement(y.c,{name:"bunga_lama",id:"bunga_lama",component:B.h,type:"text",textValue:"%",readOnly:!0,label:"Bunga Lama",placeholder:"Bunga Lama"})),y.n.createElement("div",{className:"col-6"},y.n.createElement(y.c,{name:"bunga_baru",id:"bunga_baru",component:B.h,textValue:"%",normalize:y.j,type:"text",label:"Bunga Baru",placeholder:"Bunga Baru"})),y.n.createElement("div",{className:"col-12 text-right"},y.n.createElement("button",{className:"btn btn-primary",disabled:this.props.isLoadingBunga,type:"submit"},this.props.isLoadingBunga?y.n.createElement(y.n.Fragment,null,y.n.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Kirim"):"Kirim"))),this.props.isLoadingBunga?y.n.createElement(A.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null))}}z=Object(y.O)({form:"InputBungaPeremajaan",enableReinitialize:!0})(z);var V=Object(y.u)(null)(z),Q=t(779),q=function(a){Object(l.a)(t,a);var e=Object(s.a)(t);function t(a){var r;return Object(n.a)(this,t),(r=e.call(this,a)).state={},r}return Object(r.a)(t,[{key:"componentDidMount",value:function(){setTimeout(function(){document.getElementById("username").focus()},100)}},{key:"render",value:function(){return i.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:function(a){"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-6"},i.a.createElement(T.a,{name:"no_faktur_group",component:B.b,type:"hidden"}),i.a.createElement(T.a,{name:"alasan",component:B.b,type:"hidden"}),i.a.createElement(T.a,{id:"username",name:"user_id",component:B.e,type:"text",nouperCase:!0,label:"Username",placeholder:"Masukan Username"})),i.a.createElement("div",{className:"col-lg-6"},i.a.createElement(T.a,{name:"password",component:B.e,type:"password",nouperCase:!0,label:"Password",placeholder:"Masukan Password"})),i.a.createElement("div",{className:"col-lg-12"},i.a.createElement(T.a,{name:"keterangan",component:B.e,label:"Keterangan",placeholder:"Masukan Keterangan"})),i.a.createElement("div",{className:"col-lg-12"},i.a.createElement("label",null," \xa0 "),i.a.createElement("button",{type:"submit",name:"type_btn",className:"btn btn-primary btn-block",disabled:this.props.isLoadingOtorisasi},this.props.isLoadingOtorisasi?i.a.createElement(i.a.Fragment,null,i.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Otorisasi"):"Otorisasi"))))}}]),t}(o.Component);q=Object(x.a)({form:"OtorisasiHutang",enableReinitialize:!0,validate:Q.a})(q);var W=Object(c.b)(null)(q),X=function(a){Object(l.a)(t,a);var e=Object(s.a)(t);function t(a){var r;return Object(n.a)(this,t),(r=e.call(this,a)).state={isLoading:!1,isLoadingReprint:!1,datahutang:[],isLoadingPembayaran:!1,isloadingBtl:!1,isLoadingBunga:!1,isPeremajaan:!1,isLoadingOtorisasi:!1,formPelunasan:"LIHATHUTANG",columns:[{dataField:"no_faktur_hutang",text:"No Faktur",footerAttrs:{colSpan:"3"},footer:""},{dataField:"tgl_hutang",text:"Tanggal Hutang"},{dataField:"nama_customer",text:"Nama Customer"},{dataField:"jumlah_hutang",text:"Jumlah Hutang",formatter:function(a){return i.a.createElement("span",null,parseInt(a).toLocaleString("kr-KO"))},footer:function(a){return parseInt(a.reduce(function(a,e){return a+e},0)).toLocaleString("kr-KO")}},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:function(a,e,t){return i.a.createElement("div",{className:"row text-center"},i.a.createElement("div",{className:"col-12"},Object(I.j)().tgl_system===e.tgl_system?i.a.createElement(i.a.Fragment,null,i.a.createElement("button",{type:"button","data-tooltip":"Batal Hutang",onClick:function(){return r.getDetailHutang(e)},className:"btn btn-danger mr-3"},i.a.createElement("i",{"data-tip":"Batal Hutang",className:"fa fa-window-close"}))):null,i.a.createElement("button",{type:"button","data-tooltip":"Pelunasan Hutang",onClick:function(){return r.showModalLihatHutang(e)},className:"btn btn-success mr-3"},i.a.createElement("i",{"data-tip":"Pelunasan Hutang",className:"fa fa-calendar-check"})),"\xa0",i.a.createElement("button",{type:"button","data-tooltip":"Reprint Hutang",onClick:function(){return r.reprintHutang(e.no_faktur_hutang)},className:"btn btn-info mr-3"},i.a.createElement("i",{"data-tip":"Reprint Hutang",className:"fa fa-print"}))))},footer:""}]},r}return Object(r.a)(t,[{key:"showModalLihatHutang",value:function(a){this.setState({formPelunasan:"PELUNASANHUTANG"}),this.props.dispatch(Object(g.p)(a))}},{key:"reprintHutang",value:function(a){var e=this;this.setState({isLoadingReprint:!0}),Object(_.j)("hutang/get/bynota",{no_faktur_hutang:a}).then(function(a){e.setState({isLoadingReprint:!1});for(var t=[],n=0;n<2;n++){var r="";a.data.notahutang.forEach(function(a,e){var t=a.n_alamat_customer.length;r+="========================================\n",r+="              NOTA HUTANG               \n",r+="========================================\nTanggal          : ".concat(a.tgl_system,"\nKode Sales       : ").concat(a.kode_sales,"\nNama Customer    : ").concat(a.nama_customer,"\nNo Hp            : ").concat(a.no_hp,"\nAlamat Customer  : ").concat(a.n_alamat_customer.slice(0,20),"\nNo Faktur Hutang : ").concat(a.no_faktur_hutang.toLocaleString("kr-KO"),"\n"),t>20&&(r+="                   ".concat(a.n_alamat_customer.slice(0,20),"\n")),t>40&&(r+="                   ".concat(a.n_alamat_customer.slice(40,20),"\n")),r+="========================================\n",r+="Keterangan\n",r+="========================================\n",a.detail_barang.forEach(function(a,e){r+="Nama Barang      : ".concat(a.nama_barang,"\n"),r+="Kondisi          : ".concat(a.kondisi,"\n"),r+="Kategori         : ".concat(a.kategori,"\n"),r+="Jumlah           : ".concat(a.jumlah,"\n"),r+="Berat            : ".concat(a.berat.toFixed(3),"\n"),r+="========================================\n"}),r+="Berat            : ".concat(a.berat.toFixed(3),"\n"),r+="Bunga            : ".concat(a.bunga.toFixed(3),"\n"),r+="Jumlah Hutang    : ".concat(a.jumlah_hutang.toLocaleString("kr-KO"),"\n"),r+="========================================\n",r+="                               TTD      \n",r+="                                        \n",r+="                                        \n",r+="                                        \n",r+="                         (             )\n",r+="                                        \n",r+="                                        \n",r+="                                        \n"}),t.push(r)}document.getElementById("myInput").value=t.join(""),setTimeout(function(){var a=document.createElement("a"),e=new Blob([document.getElementById("myInput").value],{type:"text/plain;charset=utf-8"});a.href=URL.createObjectURL(e),a.download="autoprint_hutang.txt",document.body.appendChild(a),a.click()},300)}).catch(function(a){e.setState({isLoadingReprint:!1}),Object(h.e)("info","Gagal Mengambil Data Keserver")})}},{key:"getDetailHutang",value:function(a){this.setState({formPelunasan:"BATALHUTANG"}),this.props.dispatch(Object(g.p)(a))}},{key:"cariHutang",value:function(a){var e=this,t={tgl_awal:Object(I.e)(Y(new Date(a.tgl_awal)).format("YYYY-MM-DD")),tgl_akhir:Object(I.e)(Y(new Date(a.tgl_akhir)).format("YYYY-MM-DD"))};this.setState({isLoading:!0}),Object(_.j)("hutang/get/by-tanggal",t).then(function(a){if(0===a.data.length)return e.setState({isLoading:!1,datahutang:[]}),Object(h.e)("info","Data Yang Anda Cari Tidak Ada"),!1;Object(h.e)("success","Data Hutang Tersedia"),e.setState({datahutang:a.data,isLoading:!1})}).catch(function(a){e.setState({isLoading:!1,datahutang:[]}),Object(h.e)("info","Data Yang Anda Cari Tidak Ada")})}},{key:"back",value:function(){this.setState({formPelunasan:"LIHATHUTANG"})}},{key:"showModalPembayaran",value:function(){this.setState({form:"PEMBAYARAN"}),this.props.dispatch(Object(u.Bb)())}},{key:"showModalPeremajaan",value:function(){this.setState({form:"PEREMAJAAN"}),this.props.dispatch(Object(u.Bb)())}},{key:"showOtorisasi",value:function(a){var e={no_faktur_hutang:a.no_faktur_hutang};Object(I.p)("nofaktur_hutang",e),this.setState({form:"OTORISASI_BATAL_HUTANG"}),this.props.dispatch(Object(u.Bb)())}},{key:"simpanOtorisasi",value:function(a){var e=this,t={user_id:a.username,password:a.password,kategori:"HANCUR BARANG",description:"SIMPAN HANCUR BARANG",keterangan:a.keterangan.toUpperCase()||"-"};Object(_.k)("authorization",t).then(function(a){var t={sisa_bayar:Object(I.g)("sisa_bayar_hutang").sisa_bayar,total_transaksi:0};Object(I.p)("sisa_bayar_hutang",t),Object(h.e)("success","Otorisasi Berhasil"),e.props.dispatch(Object(u.Ab)()),e.setState({form:"PEMBAYARAN",isLoadingPembayaran:!1,isLoading:!1}),e.props.dispatch(Object(u.Bb)())}).catch(function(a){Object(h.e)("info","Otorisasi Gagal"),e.setState({isLoadingPembayaran:!1,isLoading:!1})})}},{key:"simpanPembayaran",value:function(a){var e=this,t=document.getElementById("no_faktur_hutang").value;if(Object(I.g)("trx_pemabayaran_hutang").length<=0)return Object(h.e)("info","Mohon Tambahkan metode pembayaran minimal 1.."),!1;this.setState({isLoading:!0});var n=Object(I.g)("trx_pemabayaran_hutang"),r=[],l=0,s=0;n.forEach(function(a){"CASH"===a.jenis?(s=parseInt(a.nominal)<=Math.abs(parseInt(Object(I.g)("sisa_bayar_hutang").sisa_bayar))?Math.abs(parseInt(Object(I.g)("sisa_bayar_hutang").sisa_bayar)-parseInt(a.nominal)):parseInt(a.nominal),s=parseInt(a.nominal)>=Math.abs(parseInt(Object(I.g)("sisa_bayar_hutang").total_trx))?parseInt(a.nominal)-Math.abs(parseInt(Object(I.g)("sisa_bayar_hutang").sisa_bayar)):parseInt(a.nominal)):s=parseInt(a.nominal);var e={jenis:a.jenis,keterangan:a.keterangan,fee:"CREDIT"===a.jenis&&parseInt(a.fee)||0,jumlah_rp:s};l=a.nominal+l,r.push(e)});var o={no_faktur_hutang:t,pembayaran:r},i={no_faktur_hutang:t,bunga:Object(I.g)("bunga_hutang_baru").bunga,pembayaran:r};this.setState({isLoadingPembayaran:!0}),!0===this.state.isPeremajaan?parseInt(r.reduce(function(a,e){return a+e.jumlah_rp},0))>=parseInt(Object(I.g)("sisa_bayar_hutang").total_transaksi)?(Object(h.e)("info","Pembayaran Lebih Proses Peremajaan Gagal"),Object(I.p)("trx_pemabayaran_hutang",[]),Object(I.p)("sisa_bayar_hutang",[]),this.setState({isLoadingPembayaran:!1,isLoading:!1})):Object(_.j)("hutang/pemutihan",i).then(function(a){Object(h.e)("success","Peremajaan Berhasil"),e.setState({isLoadingPembayaran:!1,isLoading:!1,formPelunasan:"LIHATHUTANG",datahutang:[]}),e.props.dispatch(Object(u.Ab)()),localStorage.removeItem("jml_byar_pelunasan_hutang"),Object(I.p)("trx_pemabayaran_hutang",[]),Object(I.p)("sisa_bayar_hutang",[]),Object(h.e)("success","Transaksi Hutang Berhasil")}).catch(function(a){var t;Object(h.e)("info",null===(t=a.response.data)||void 0===t?void 0:t.message),e.setState({isLoadingPembayaran:!1,isLoading:!1})}):parseInt(r.reduce(function(a,e){return a+e.jumlah_rp},0))<parseInt(Object(I.g)("sisa_bayar_hutang").total_transaksi)?(this.setState({form:"OTORISASI"}),this.props.dispatch(Object(u.Bb)()),console.log("masuk1")):Object(_.j)("hutang/hutanglunas",o).then(function(a){e.setState({isLoadingPembayaran:!1,isLoading:!1,formPelunasan:"LIHATHUTANG",datahutang:[]}),e.props.dispatch(Object(u.Ab)()),localStorage.removeItem("jml_byar_pelunasan_hutang"),Object(I.p)("trx_pemabayaran_hutang",[]),Object(I.p)("sisa_bayar_hutang",[]),Object(h.e)("success","Transaksi Hutang Berhasil")}).catch(function(a){e.setState({isLoading:!1,isLoadingPembayaran:!1}),Object(h.e)("info","Terjadi Kesalahan Saat Mengirim Data")})}},{key:"componentWillMount",value:function(){!0===this.state.isPeremajaan&&(localStorage.removeItem("jml_byar_pelunasan_hutang"),Object(I.p)("trx_pemabayaran_hutang",[]),Object(I.p)("sisa_bayar_hutang",[]))}},{key:"btlHutang",value:function(a){var e=this;this.setState({isLoadingOtorisasi:!0});var t={user_id:a.user_id,password:a.password,kategori:"BATAL HUTANG",description:"SIMPAN BATAL HUTANG",keterangan:a.keterangan.toUpperCase()||"-"};Object(_.n)("authorization",t).then(function(a){e.setState({isLoadingOtorisasi:!1,isloadingBtl:!0}),Object(_.j)("hutang/hutangbatal",Object(I.g)("nofaktur_hutang")).then(function(a){Object(h.e)("success","Hutang Berhasil Di Batal"),e.setState({isloadingBtl:!1,formPelunasan:"LIHATHUTANG",datahutang:[]}),e.props.dispatch(Object(u.Ab)())}).catch(function(a){e.setState({isloadingBtl:!1}),Object(h.e)("info","Terjadi Kesalahan Saat Mengirim Data")})}).catch(function(a){e.setState({isLoadingOtorisasi:!1}),Object(h.e)("info","User Id atau Password Salah")})}},{key:"simpanBunga",value:function(a){var e=this;this.setState({isLoadingBunga:!0});var t=document.getElementById("no_faktur_hutang").value;if(void 0===a.bunga_baru)return Object(h.e)("info","Bunga Baru Tidak Boleh Kosong"),this.setState({isLoadingBunga:!1}),!1;var n={no_faktur:t,bunga:parseInt(a.bunga_baru)};y.r.fire({position:"center",icon:"warning",title:"Anda yakin ingin menyimpan bunga ".concat(parseInt(a.bunga_baru),"%"),showConfirmButton:!0,showCancelButton:!0,confirmButtonText:"YAKIN",confirmButtonColor:"success"}).then(function(a){a.isConfirmed?(Object(I.p)("bunga_hutang_baru",n),e.setState({isLoadingBunga:!1,isPeremajaan:!0}),e.showModalPembayaran()):e.setState({isLoadingBunga:!1,isPeremajaan:!1})})}},{key:"render",value:function(){var a=this,e={renderer:function(a){return i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-12"},i.a.createElement("table",null,i.a.createElement("tr",null,i.a.createElement("td",null,"Nama Barang"),i.a.createElement("td",null,"Berat"),i.a.createElement("td",null,"Jumlah"),i.a.createElement("td",null,"Foto")),a.detail_barang.map(function(a,e){return i.a.createElement("tr",null,i.a.createElement("td",null,a.nama_barang),i.a.createElement("td",null,a.berat),i.a.createElement("td",null,a.jumlah),i.a.createElement("td",null,i.a.createElement("img",{src:a.foto||y.G,width:"200px",height:"200px",alt:"img"})))})))))},showExpandColumn:!0,expandByColumnOnly:!0};return i.a.createElement("div",null,i.a.createElement("textarea",{style:{display:"none"},id:"myInput",rows:"100",cols:"100"}),i.a.createElement("ol",{className:"breadcrumb float-xl-right"},i.a.createElement("li",{className:"breadcrumb-item"},i.a.createElement(m.b,{to:"#"},"Hutang")),i.a.createElement("li",{className:"breadcrumb-item active"}," ","PELUNASANHUTANG"===this.state.formPelunasan?"Pelunasan Hutang":"BATALHUTANG"===this.state.formPelunasan?"BATAL HUTANG":"Lihat Hutang")),i.a.createElement("h1",{className:"page-header"}," ","PELUNASANHUTANG"===this.state.formPelunasan?"Pelunasan Hutang":"BATALHUTANG"===this.state.formPelunasan?"BATAL HUTANG":"Lihat Hutang"," "),i.a.createElement(b.a,null,i.a.createElement(b.c,null,"PELUNASANHUTANG"===this.state.formPelunasan?"Pelunasan Hutang":"BATALHUTANG"===this.state.formPelunasan?"BATAL HUTANG":"Lihat Hutang"),i.a.createElement("br",null),i.a.createElement("div",{className:"container"},"PELUNASANHUTANG"===this.state.formPelunasan?i.a.createElement(i.a.Fragment,null," ",i.a.createElement(R,{showModalPembayaran:function(){return a.showModalPembayaran()},showModalPeremajaan:function(){return a.showModalPeremajaan()},back:function(){return a.back()}})," "):"BATALHUTANG"===this.state.formPelunasan?i.a.createElement(G,{isloadingBtl:this.state.isloadingBtl,onSubmit:function(e){return a.showOtorisasi(e)},back:function(){return a.back()}}):i.a.createElement(i.a.Fragment,null,i.a.createElement(w,{onSubmit:function(e){return a.cariHutang(e)},isLoading:this.state.isLoading}),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-12"},i.a.createElement(d.a,{keyField:"no_faktur_hutang",exportCsv:!1,data:this.state.datahutang,columns:this.state.columns,empty:!0,expandRow:e,textEmpty:"Data Barang Kosong"}))))),i.a.createElement("br",null),i.a.createElement(p.a,{title:"PEREMAJAAN"===this.state.form?"PEREMAJAAN":"PEMBAYARAN"===this.state.form?"PEMBAYARAN":"OTORISASI",size:"p",content:"PEREMAJAAN"===this.state.form?i.a.createElement(i.a.Fragment,null," ",i.a.createElement(V,{isLoadingBunga:this.state.isLoadingBunga,onSubmit:function(e){return a.simpanBunga(e)}})," "):"PEMBAYARAN"===this.state.form?i.a.createElement(i.a.Fragment,null,i.a.createElement(H,{isLoading:this.state.isLoading,isLoadingPembayaran:this.state.isLoadingPembayaran,bayarSekarang:function(e){return a.simpanPembayaran(e)}})):"OTORISASI_BATAL_HUTANG"===this.state.form?i.a.createElement(W,{isLoadingOtorisasi:this.state.isLoadingOtorisasi,onSubmit:function(e){return a.btlHutang(e)}}):i.a.createElement(W,{isLoadingOtorisasi:this.state.isLoadingOtorisasi,onSubmit:function(e){return a.simpanOtorisasi(e)}})})))}}]),t}(i.a.Component);e.default=Object(c.b)(null)(X)},723:function(a,e,t){"use strict";e.a=(a=>{const e={};return a.jenis||(e.jenis="Jenis Tidak Boleh Kosong"),e})},739:function(a,e,t){"use strict";e.a=(a=>{const e={};return a.tgl_selesai||(e.tgl_selesai="Tanggal Selesai Tidak Boleh Kosong"),a.tgl_ambil||(e.tgl_ambil="Tanggal Tidak Boleh Kosong"),e})},779:function(a,e,t){"use strict";e.a=function(a){var e={};return a.user_id||(e.user_id="User Id Harus Diisi"),a.password||(e.password="Password Harus Diisi"),a.keterangan||(e.keterangan="Keterangan Harus Diisi"),e}}}]);
//# sourceMappingURL=11.843b3f7f.chunk.js.map