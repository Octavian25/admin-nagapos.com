(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{1245:function(e,a,t){"use strict";t.r(a);var n=t(0),o=t.n(n),i=t(41),s=t(31),m=t(53),r=t(330),l=t(13),d=t(159),c=t(30),p=t(94),h=t(72),b=t(11),u=t(329),_=t(23);class g extends n.Component{constructor(e){super(e),this.state={date:new Date,kondisi_barang:"kosong",FormModal:""}}ShowModalTambahPoin(){0===(localStorage.getItem("data_member")||[]).length?Object(c.e)("info","Kode Member Belum Diisi"):(this.props.dispatch(Object(l.Db)()),this.setState({FormModal:"ShowModalTambahPoin"}))}render(){return o.a.createElement(h.a,null,o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-8"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-lg-6"},o.a.createElement(u.a,{id:"kode_member",onChange:()=>this.props.getKodeMember,name:"kode_member",component:_.e,type:"text",label:"Kode Member",placeholder:"Masukan Kode Member"})),o.a.createElement("div",{className:"col-lg-6"},o.a.createElement(u.a,{id:"transaksi_poin_nama_member",name:"nama_member",readOnly:!0,component:_.e,type:"text",label:"Nama Member",placeholder:"Masukan Nama Member"})))),o.a.createElement("div",{className:"col-4 text-center"},o.a.createElement(o.a.Fragment,null," \xa0 "),o.a.createElement("h1",{style:"POINT"===this.props.point?{fontSize:"4.875rem",position:"absolute",left:"56px",top:"25px"}:{fontSize:"4.875rem",position:"absolute",left:"110px",top:"25px"}}," ",this.props.point," ")),o.a.createElement("div",{className:"col-8"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-lg-6"},o.a.createElement(u.a,{id:"transaksi_poin_alamat",name:"alamat",readOnly:!0,component:_.e,type:"text",label:"Alamat",placeholder:"Masukan Alamat"})),o.a.createElement("div",{className:"col-lg-6"},o.a.createElement(u.a,{id:"transaksi_poin_no_hp",name:"no_hp",readOnly:!0,component:_.e,type:"text",label:"No Hp",placeholder:"Masukan No Hp"})))),o.a.createElement("div",{className:"col-4 text-center"})))}}g=Object(r.a)({form:"HeadTukarPoin",enableReinitialize:!0})(g);var k=Object(i.b)()(g),E=t(707),y=t(705),v=t(706),O=t(816),N=t(785),M=t(54),S=t.n(M);class f extends n.Component{constructor(...e){super(...e),this.state={}}render(){return o.a.createElement(E.a,{isOpen:this.props.isOpen,backdrop:"static",keyboard:!1,toggle:()=>this.props.dispatch(Object(l.Cb)())},o.a.createElement(y.a,null," ",this.props.title," "),o.a.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off"},o.a.createElement(v.a,null,o.a.createElement(u.a,{name:"kode_hadiah",component:_.e,type:"text",readOnly:!0,label:" Kode Hadiah",placeholder:"Masukan  Kode Hadiah"}),o.a.createElement(u.a,{name:"nama_hadiah",component:_.e,type:"text",readOnly:!0,label:" Nama Hadiah",placeholder:"Masukan  Nama Hadiah"}),o.a.createElement(u.a,{name:"poin",component:_.e,type:"number",readOnly:!0,label:"Poin",placeholder:"Masukan Poin"})),o.a.createElement(O.a,null,o.a.createElement("button",{className:"btn btn-white",onClick:()=>this.props.dispatch(Object(l.Cb)()),type:"button",disabled:this.props.isLoading},"Batal"),o.a.createElement("button",{className:"btn btn-primary",disabled:this.props.submitting,type:"submit"},this.props.isLoading?o.a.createElement(o.a.Fragment,null,o.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Menyimpan"):"Simpan Data")),this.props.isLoading?o.a.createElement(S.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null))}}f=Object(r.a)({form:"ModalHadiah",enableReinitialize:!0,validate:N.a})(f);var j=Object(i.b)(e=>{if(null!==e.datamember.ShowModalTukarPoin)return{initialValues:{nama_hadiah:e.datamember.ShowModalTukarPoin.nama_hadiah,poin:e.datamember.ShowModalTukarPoin.poin,kode_hadiah:e.datamember.ShowModalTukarPoin.kode_hadiah}}},null)(f);class T extends o.a.Component{constructor(e){super(e),this.state={point:"POINT",isLoading:!1,isLoadingTukarPoin:!1,columns:[{dataField:"nama_hadiah",text:"Nama Hadiah",sort:!0},{dataField:"poin",text:"Poin"},{dataField:"stock",text:"Stock"},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:(e,a)=>{let t={kode_hadiah:a.kode_hadiah,nama_hadiah:a.nama_hadiah,poin:a.poin};return o.a.createElement("div",{className:"row text-center"},o.a.createElement("div",{className:"col-12"},o.a.createElement("button",{onClick:()=>this.showDataHadiah(t),className:"btn btn-primary mr-3"},o.a.createElement("i",{className:"fa fa-exchange-alt"}))))}}]},this.handleSubmit=this.handleSubmit.bind(this),this.getKodeMember=this.getKodeMember.bind(this)}showDataHadiah(e){0===(localStorage.getItem("data_member")||[]).length?Object(c.e)("info","Kode Member Belum Diisi"):(this.props.dispatch(Object(d.d)(e)),this.props.dispatch(Object(l.Db)()))}handleSubmit(e){this.setState({isLoading:!0});let a=JSON.parse(localStorage.getItem("data_member")||[]),t={kode_member:a[0].kode_member,nama_customer:a[0].nama_customer,alamat_customer:a[0].alamat_customer,poin:parseInt(e.poin),kode_hadiah:e.kode_hadiah,nama_hadiah:e.nama_hadiah};Object(b.j)("trxmember/poin/tukar",t).then(e=>{this.props.dispatch(Object(m.d)("ModalHadiah")),this.props.dispatch(Object(m.d)("HeadTukarPoin")),Object(c.e)("success",e.data.message),localStorage.setItem("data_member",JSON.stringify([])),this.props.dispatch(Object(m.d)("HeadFormPoint")),document.getElementById("transaksi_poin_nama_member").value="",document.getElementById("transaksi_poin_nama_member").value="",document.getElementById("transaksi_poin_alamat").value="",document.getElementById("transaksi_poin_no_hp").value="",this.setState({isLoading:!1}),this.props.dispatch(Object(l.Cb)()),Object(b.d)("member/get/by-kode-member/"+a[0].kode_member).then(e=>{0===e.data.length?(Object(c.e)("info","Kode Member Tersebut Tidak Ada"),document.getElementById("transaksi_poin_nama_member").value="",document.getElementById("transaksi_poin_alamat").value="",document.getElementById("transaksi_poin_no_hp").value="",this.setState({datatransaksimember:[],point:0,isLoading:!1})):(localStorage.setItem("data_member",JSON.stringify(e.data)),e.data.forEach((e,a)=>{document.getElementById("kode_member").value=e.kode_member,document.getElementById("transaksi_poin_nama_member").value=e.nama_customer,document.getElementById("transaksi_poin_alamat").value=e.alamat_customer,document.getElementById("transaksi_poin_no_hp").value=e.no_hp,this.setState({datatransaksimember:[],point:e.point||0,isLoading:!1})}))})}).catch(e=>{Object(c.e)("info",e.response.data||"Terjadi kesalahan"),this.setState({isLoadingTukarPoin:!1,isLoading:!1})})}getKodeMember(e){clearTimeout(this.delay),this.delay=setTimeout(()=>{if(void 0===e.kode_member)return!1;this.setState({isLoading:!0}),Object(b.d)("member/get/by-kode-member/"+e.kode_member).then(e=>{console.log(e.data),0===e.data.length?(Object(c.e)("info","Kode Member Tersebut Tidak Ada"),document.getElementById("transaksi_poin_nama_member").value="",document.getElementById("transaksi_poin_alamat").value="",document.getElementById("transaksi_poin_no_hp").value="",this.setState({datatransaksimember:[],point:0,isLoading:!1})):(localStorage.setItem("data_member",JSON.stringify(e.data)),e.data.forEach((e,a)=>{document.getElementById("transaksi_poin_nama_member").value=e.nama_customer,document.getElementById("transaksi_poin_alamat").value=e.alamat_customer,document.getElementById("transaksi_poin_no_hp").value=e.no_hp,this.setState({datatransaksimember:[],point:e.point||0,isLoading:!1})}))})},1500)}componentDidMount(){this.props.dispatch(Object(l.ob)())}render(){return o.a.createElement("div",null,o.a.createElement("ol",{className:"breadcrumb float-xl-right"},o.a.createElement("li",{className:"breadcrumb-item"},o.a.createElement(s.b,{to:"#"},"Member")),o.a.createElement("li",{className:"breadcrumb-item active"},"Tukar Poin")),o.a.createElement("h1",{className:"page-header"},"Tukar Poin "),o.a.createElement(h.a,null,o.a.createElement(h.c,null,"Tukar Poin"),o.a.createElement("br",null),o.a.createElement("div",{className:"container"},o.a.createElement(k,{onChange:e=>this.getKodeMember(e),point:this.state.point}),o.a.createElement(p.a,{keyField:"kode_hadiah",exportCsv:!0,data:this.props.datahadiah,columns:this.state.columns,textEmpty:"Data Transaksi Member Kosong"})),o.a.createElement("br",null),o.a.createElement(j,{isLoading:this.state.isLoading,isEdit:this.state.isEdit,title:"FormTukar Point",isOpen:this.props.hideModal,onSubmit:e=>this.handleSubmit(e)})),this.state.isLoading?o.a.createElement(S.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}T=Object(r.a)({form:"FormTukarPoin",enableReinitialize:!0})(T);a.default=Object(i.b)(e=>({datahadiah:e.datamaster.getDataHadiah,hideModal:e.datamaster.modalDialog}),null)(T)},785:function(e,a,t){"use strict";a.a=((e,a)=>{const t={};return e.nama_hadiah||(t.nama_hadiah="Nama Hadiah Tidak Boleh Kosong"),e.poin||(t.poin="Poin Tidak Boleh Kosong"),t})},816:function(e,a,t){"use strict";var n=t(15),o=t(18),i=t(0),s=t.n(i),m=t(2),r=t.n(m),l=t(20),d=t.n(l),c=t(9),p={tag:c.n,className:r.a.string,cssModule:r.a.object},h=function(e){var a=e.className,t=e.cssModule,i=e.tag,m=Object(o.a)(e,["className","cssModule","tag"]),r=Object(c.j)(d()(a,"modal-footer"),t);return s.a.createElement(i,Object(n.a)({},m,{className:r}))};h.propTypes=p,h.defaultProps={tag:"div"},a.a=h}}]);
//# sourceMappingURL=19.aaab6fdb.chunk.js.map