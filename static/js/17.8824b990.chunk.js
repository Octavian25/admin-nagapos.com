(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{1221:function(a,e,t){"use strict";t.r(e);var n=t(1),s=t(11),r=t(743),o=t(13);const i=[{value:"MEMBER",name:"MEMBER"},{value:"NONMEMBER",name:"NON MEMBER"}];class l extends n.b{constructor(a){super(a),this.state={showMember:!0}}componentDidMount(){this.props.dispatch(Object(o.ub)());let a=0===Object(n.I)("data_customer_tmp").length?[]:JSON.parse(Object(n.I)("data_customer_tmp")||[]);a&&"MEMBER"===a.jenis_pelanggan?this.setState({showMember:!1}):(this.setState({showMember:!0}),this.props.change("jenis_pelanggan","NONMEMBER"))}changemember(a){"MEMBER"===a?(this.setState({showMember:!1}),document.getElementById("kode_member").focus(),this.props.change("kode_customer","")):(this.props.change("kode_customer","NONMEMBER"),document.getElementById("nama_customer").focus(),this.props.change("nama_customer",""),this.props.change("no_hp",""),this.props.change("alamat_customer",""),this.setState({showMember:!0}))}getMember(a){Object(n.z)("member/get/by-kode-member/"+a).then(a=>{0===a.data.length?Object(n.t)("info","Member Yang Anda Masukan Tidak Ada !!!"):a.data.forEach((a,e)=>{this.props.change("nama_customer",a.nama_customer),this.props.change("no_hp",a.no_hp),this.props.change("alamat_customer",a.alamat_customer)})}).catch(a=>{Object(n.t)("info","Terjadi Kesalahan SIlahkan Ulangi Kembali !!!")})}render(){return n.n.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},n.n.createElement("div",{className:"row"},n.n.createElement("div",{className:"col-4"},n.n.createElement(n.c,{name:"kode_sales",label:"Pilih Kode Sales",placeholder:"Masukan Kode Sales",options:this.props.DataSales.filter(a=>void 0!==a.kode_sales).map(a=>{return{value:a.kode_sales,name:a.kode_sales}}),component:n.q})),n.n.createElement("div",{className:"col-4"},n.n.createElement(n.c,{id:"jenis_pelanggan",name:"jenis_pelanggan",label:"Pilih Pelanggan",onChange:a=>this.changemember(a),placeholder:"Silahkan Pilih Pelanggan",options:i,component:n.q})),n.n.createElement("div",{className:"col-4"},n.n.createElement(n.c,{id:"kode_member",name:"kode_customer",onChange:a=>this.getMember(a.target.value),component:n.p,type:"text",readOnly:this.state.showMember,label:"Kode Customer",placeholder:"Masukan Kode Customer"})),n.n.createElement("div",{className:"col-4"},n.n.createElement(n.c,{id:"nama_customer",name:"nama_customer",component:n.p,type:"text",label:"Nama Customer",placeholder:"Masukan Nama Customer"})),n.n.createElement("div",{className:"col-4"},n.n.createElement(n.c,{name:"no_hp",component:n.p,type:"text",normalize:n.j,label:"No Hp",placeholder:"Masukan No Hp"})),n.n.createElement("div",{className:"col-4"},n.n.createElement(n.c,{name:"alamat_customer",component:n.p,type:"textarea",label:"Alamat Customer",placeholder:"Masukan Alamat Customer"}))),n.n.createElement("div",{className:"row"},n.n.createElement("div",{className:"col-8"}),n.n.createElement("div",{className:"col-4"},n.n.createElement("button",{className:"btn btn-primary btn-block",disabled:this.props.isLoadingDataCustomer,type:"submit"},this.props.isLoadingDataCustomer?n.n.createElement(n.n.Fragment,null,n.n.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Menyimpan"):"Simpan Data"))))}}l=Object(n.O)({form:"ModalDataCustomer",enableReinitialize:!0,validate:r.a})(l);var c=Object(n.u)(a=>{let e=0===Object(n.I)("data_customer_tmp").length?[]:JSON.parse(Object(n.I)("data_customer_tmp")||[]);return{initialValues:{kode_sales:e.kode_sales||"",jenis_pelanggan:e.jenis_pelanggan||"",kode_customer:e.kode_customer||"",nama_customer:e.nama_customer||"",no_hp:e.no_hp||"",alamat_customer:e.alamat_customer||""},DataSales:a.datamaster.getDataSales}})(l),m=t(724);const p=Object(n.w)({prefix:"Rp. ",locale:"kr-KO"}),d=[{value:"CASH",name:"CASH"},{value:"DEBET",name:"DEBET"},{value:"TRANSFER",name:"TRANSFER"},{value:"CREDIT",name:"CREDIT"}];class b extends n.b{constructor(a){super(a),this.state={isLoading:!1,type_pembayaran:"CASH",lebih:!1,columns:[{dataField:"type",text:"Type",footerAttrs:{colSpan:"1"},footer:"Grand Total"},{dataField:"Total",text:"Total",footer:""}]},this.setStartDate=this.setStartDate.bind(this)}componentDidMount(){this.props.dispatch(Object(o.ub)());let a=JSON.parse(Object(n.I)("data_barang_pesanan")),e=0;a.forEach((a,t)=>{e+=a.sub_total,this.props.change("grand_total_pembayaran",e),this.props.change("harus_bayar_rp",e)}),this.props.change("jenis","CASH"),setTimeout(()=>{document.getElementById("cash_trx_penjualan").focus()},100)}hitungTotal(){this.props.change("kembali",this.props.kembali),this.props.change("nominal_kembali",this.props.nominal_kembali)}pilihPembyaran(a){"CASH"===a?this.setState({type_pembayaran:"CASH"}):"TRANSFER"===a?this.setState({type_pembayaran:"TRANSFER"}):"DEBET"===a?this.setState({type_pembayaran:"DEBET"}):this.setState({type_pembayaran:"CREDIT"}),this.props.change("cash","")}setStartDate(a){this.setState({tgl_awal:new Date(a)})}copyValue(a){this.props.change("cash",parseInt(Object(n.j)(a)))}render(){return n.n.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},n.n.createElement("div",{className:"row"},n.n.createElement("div",{className:"col-6"},n.n.createElement(n.c,Object.assign({name:"grand_total_pembayaran",component:n.p,type:"text",onChange:this.hitungTotal(),readOnly:!0},p,{label:"Total Harga Jual",placeholder:"Total Harga Jual"}))),n.n.createElement("div",{className:"col-6"},n.n.createElement(n.c,Object.assign({id:"harus_bayar_rp",name:"harus_bayar_rp",component:n.p,type:"text",onChange:this.hitungTotal(),readOnly:!0},p,{label:"Harus Bayar Rp",placeholder:"Harus Bayar Rp"}))),n.n.createElement("div",{className:"col-6"},n.n.createElement(n.c,{name:"jenis",label:"Pilih Jenis Bayar",placeholder:"Pilih Jenis Pembayaran",options:d,onChange:a=>this.pilihPembyaran(a),component:n.q})),n.n.createElement("div",{className:"col-6",style:{display:"CASH"===this.state.type_pembayaran?"none":(this.state.type_pembayaran,"block")}},n.n.createElement(n.c,{tabIndex:"1",name:"nama_bank",id:"nama_bank",component:n.p,type:"text",label:"Bank",placeholder:"Masukan Nama Bank"})),n.n.createElement("div",{className:"col-6",style:{display:"CASH"===this.state.type_pembayaran?"none":"DEBET"===this.state.type_pembayaran?"none":"block"}},n.n.createElement(n.c,{tabIndex:"1",name:"no_card",id:"no_card",component:n.p,type:"text",label:"TRANSFER"===this.state.type_pembayaran?"No Rek":"Card No",placeholder:"TRANSFER"===this.state.type_pembayaran?"Masukan No Rek":"Masukan Card No"})),n.n.createElement("div",{className:"col-6"},n.n.createElement(n.c,Object.assign({tabIndex:"1",name:"cash",id:"cash_trx_penjualan",component:n.p,type:"text",label:"Nominal",onChange:this.hitungTotal()},p,{normalize:n.j,placeholder:"Masukan Nominal"}))),n.n.createElement("div",{className:"col-6",style:{display:"CREDIT"===this.state.type_pembayaran?"block":"none"}},n.n.createElement(n.c,{tabIndex:"1",name:"fee",id:"fee",component:n.p,type:"text",label:"Fee (%)",normalize:n.j,placeholder:"5"})),n.n.createElement("div",{className:"col-6 d-none"},n.n.createElement(n.c,{tabIndex:"1",name:"nominal_kembali",component:n.p,type:"text",label:"Nominal",placeholder:"Masukan Nominal"})),n.n.createElement("div",{className:"col-6"},n.n.createElement(n.c,{name:"kembali",id:"sisa_bayar",component:n.p,type:"text",readOnly:!0,label:"Sisa",onFocus:a=>this.copyValue(a.target.value),placeholder:"Sisa Pembayaran"})),n.n.createElement("div",{className:"CASH"===this.state.type_pembayaran?"col-6 text-right":"TRANSFER"===this.state.type_pembayaran?"col-6 text-right":"col-12 text-right"},n.n.createElement("br",null),n.n.createElement("label",null,"\xa0"),n.n.createElement("button",{tabIndex:"2",disabled:this.props.notif,className:"btn btn-primary"}," ",n.n.createElement("i",{className:"fa fa-plus"}))),n.n.createElement("div",{className:"col-12"},n.n.createElement(n.c,{name:"estimasi_pesanan",component:n.f,type:"text",label:"Estimasi Pesanan Selesai",defaultValue:Object(n.E)(),selected:this.state.tgl_awal,onChange:a=>this.setStartDate(a),placeholder:"Estimasi Pesanan"}))))}}b=Object(n.O)({form:"HeadInputPembayaran",enableReinitialize:!0,validate:m.a})(b);const h=Object(n.x)("HeadInputPembayaran");var u=Object(n.u)(a=>{const e=h(a,"grand_total_pembayaran","harus_bayar_rp","cash"),t=e.cash,s=e.harus_bayar_rp;let r=JSON.parse(localStorage.getItem("trx_pemabayaran_pesanan"))||[],o=0;r.forEach(a=>{o=a.nominal+o});let i=parseFloat(o||0)-parseFloat(s||0);return{kembali:i.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),nominal_kembali:i+parseInt(t),initialValues:{estimasi_pesanan:Object(n.E)()}}})(b),_=t(54),g=t.n(_);class k extends n.b{constructor(a){super(a),this.state={isLoading:!1,type_pembayaran:"CASH",columns:[{dataField:"jenis",text:"Jenis",footerAttrs:{colSpan:"2"},footer:"Grand Total"},{dataField:"keterangan",text:"Keterangan"},{dataField:"nominal",text:"Total",formatter:a=>n.n.createElement("span",null,parseInt(a).toLocaleString("kr-KO")),footer:a=>parseInt(a.reduce((a,e)=>a+e,0)).toLocaleString("kr-KO")},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:(a,e,t)=>n.n.createElement("div",{className:"row text-center"},n.n.createElement("div",{className:"col-12"},n.n.createElement("button",{type:"button",disabled:"TITIPAN"===e.keterangan,onClick:()=>this.hapusdata(t),className:"btn btn-danger mr-3"},n.n.createElement("i",{className:"fa fa-trash"})))),footer:""}]}}hapusdata(a){n.r.fire({title:"Anda Yakin !!",text:"Ingin Menghapus Data Ini ?",icon:"warning",position:"top-center",cancelButtonText:"Tidak",showCancelButton:!0,confirmButtonText:"OK",showConfirmButton:!0}).then(e=>{if(e.isConfirmed){let e=Object(n.D)("trx_pemabayaran_pesanan");e.splice(a,1),Object(n.Q)("trx_pemabayaran_pesanan",e),this.setState({status:"berhasil"})}})}simpanPembayaran(a){if(void 0===a.no_card&&"CASH"!==a.jenis&&"DEBET"!==a.jenis)return Object(n.t)("info","Nomor kartu tidak boleh kosong"),!1;if(void 0===a.nama_bank&&"CASH"!==a.jenis)return Object(n.t)("info","Nama Bank tidak boleh kosong"),!1;if(void 0===a.cash||"0"===a.cash)return Object(n.t)("info","Nominal tidak boleh kosong"),!1;let e={total_transaksi:a.harus_bayar_rp,sisa_bayar:a.nominal_kembali};Object(n.Q)("sisa_bayar_pesanan",e);let t=JSON.parse(localStorage.getItem("trx_pemabayaran_pesanan"))||[];if("CASH"===a.jenis||t.length){if("CASH"!==a.jenis){if(a.kembali.replace(/[^0-9]/g,"")-a.cash<0&&0!==parseInt(a.kembali))return Object(n.t)("info","Pembayaran tidak boleh lebih dari sisa"),!1;if(t.reduce((a,e)=>a+e.nominal,0)>=a.harus_bayar_rp)return Object(n.t)("info","Pembayaran Sudah Cukup"),!1}}else if(a.kembali.replace(/[^0-9]/g,"")-a.cash<0)return Object(n.t)("info","Pembayaran tidak boleh lebih dari sisa"),!1;if(t.findIndex(a=>"CASH"===a.jenis)>=0){if(a.kembali.replace(/[^0-9]/g,"")-a.cash<0&&t.reduce((a,e)=>a+e.nominal,0)>a.harus_bayar_rp)return Object(n.t)("info","Pembayaran Sudah Cukup"),!1;if(t.reduce((a,e)=>a+e.nominal,0)>=a.harus_bayar_rp)return Object(n.t)("info","Pembayaran Sudah Cukup"),!1}if(Object(n.Q)("estimasi_pesanan",Object(n.y)(Object(n.K)(new Date(a.estimasi_pesanan)).format("YYYY-MM-DD"))),-1===t.findIndex(e=>e.jenis===a.jenis)){let e="";e="CASH"===a.jenis?"CASH":"TRANSFER"===a.jenis?a.no_card+" - "+a.nama_bank:a.nama_bank;let s={jenis:a.jenis,nominal:parseInt(a.cash||0),nama_bank:void 0!==a.nama_bank?a.nama_bank.toUpperCase():"-",fee:"CREDIT"===a.jenis&&a.fee||0,no_card:a.no_card||"-",keterangan:e.toUpperCase()};t.push(s),this.setState({masuk:!0}),Object(n.Q)("trx_pemabayaran_pesanan",t)}else{let e=Object(n.D)("trx_pemabayaran_pesanan");e=e.map(e=>(e.jenis===a.jenis&&(e.nominal+=parseInt(a.cash)),e)),Object(n.Q)("trx_pemabayaran_pesanan",e),this.setState({status:!0})}}render(){return n.n.createElement(n.n.Fragment,null,n.n.createElement(u,{onSubmit:a=>this.simpanPembayaran(a)}),n.n.createElement("hr",null),n.n.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},n.n.createElement(n.s,{keyField:"jenis",exportCsv:!1,data:Object(n.D)("trx_pemabayaran_pesanan")||[],columns:this.state.columns,empty:!0,pagination:"off",textEmpty:"Data Pembayaran Kosong"}),n.n.createElement("div",{className:"row"},n.n.createElement("div",{className:"col-6"}),n.n.createElement("div",{className:"col-6 text-right"},n.n.createElement("button",{className:"btn btn-primary",disabled:this.props.isLoadingPembayranTitipan,onClick:()=>this.props.bayarSekarang(),type:"button"},this.props.isLoadingPembayranTitipan?n.n.createElement(n.n.Fragment,null,n.n.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Diproses"):"Bayar Sekarang"))),this.props.isLoadingPembayranTitipan?n.n.createElement(g.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null))}}k=Object(n.O)({form:"ModalPembayaran",enableReinitialize:!0,validate:m.a})(k);var E=Object(n.u)(a=>{let e=Object(n.D)("data_barang_penjualan_tmp")||[],t="PENJUALAN";return e.forEach(a=>{t="-"===a.no_titip_group?"PENJUALAN":"TITIPAN"}),{status:t}})(k),y=t(7);const j=Object(n.w)({prefix:"Rp. ",locale:"kr-KO"});class O extends n.n.Component{constructor(a){super(a),this.state={isLoading:!1,bawa_sendiri:!1,dari_toko:!0,isChecked:!0,kategori_harga:!0}}componentDidMount(){this.props.dispatch(Object(o.v)()),setTimeout(()=>{Object(s.e)("para-system/key/kategori_harga").then(a=>{"harga_100%"===a.data.value?this.setState({kategori_harga:!0}):this.setState({kategori_harga:!1}),this.props.change("kadar",this.state.kategori_harga?0:100)})},200)}hitungTotal(){this.props.change("sub_total",this.props.sub_total)}chnageValue(a){"dari_toko"===a.target.value?(document.getElementById("kode_dari_toko").focus(),this.props.change("deskripsi_bawa_sediri",""),this.props.change("berat_bawa_sendiri",""),this.setState({dari_toko:!1,bawa_sendiri:!0,isChecked:!1})):(document.getElementById("deskripsi_bawa_sediri").focus(),this.props.change("kode_dari_toko",""),this.props.change("deskripsi_dari_toko",""),this.props.change("berat_dari_toko",""),this.setState({dari_toko:!0,bawa_sendiri:!1,isChecked:!0}))}getBarcode(a){Object(n.z)("barang/get/by-kode-barcode/"+a).then(a=>{a.data.forEach(a=>{this.props.change("deskripsi_dari_toko",a.nama_barang),this.props.change("berat_dari_toko",a.berat)})}).catch(a=>{404!==a.response.status&&Object(n.t)("info",a.response.data)})}hideModal(){this.props.dispatch(Object(o.Cb)())}setIndex(a){document.getElementById("jenis_barang").focus(),Object(n.z)("group/get/by-kode-group/"+a).then(a=>{this.props.change("harga_pergram",a.data.harga)})}render(){return n.n.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},n.n.createElement("div",{className:"row"},n.n.createElement("div",{className:"col-2"},n.n.createElement(n.c,{name:"kode_group",label:"Kategori",onChange:a=>this.setIndex(a),placeholder:"Pilih Kategori",options:this.props.DataGroup.filter(a=>void 0!==a.kode_group).map(a=>{return{value:a.kode_group,name:a.kode_group}}),component:n.q})),n.n.createElement("div",{className:"col-4"},n.n.createElement(n.c,{id:"jenis_barang",name:"jenis_barang",component:n.p,type:"text",label:"Nama Barang",placeholder:"Masukan Nama Barang"})),n.n.createElement("div",{className:"col-2"},n.n.createElement(n.c,{id:"betat",name:"berat",component:n.p,type:"text",onChange:this.hitungTotal(),normalize:n.d,label:"Berat",placeholder:"Masukan Berat"})),n.n.createElement("div",{className:this.state.kategori_harga?"col-lg-2":"col-lg-2 d-none"},n.n.createElement(n.c,{id:"kadar",name:"kadar",component:n.p,type:"text",onChange:this.hitungTotal(),normalize:n.j,label:"Kadar",placeholder:"Masukan Kadar"})),n.n.createElement("div",{className:this.state.kategori_harga?"col-lg-2":"col-lg-4"},n.n.createElement(n.c,Object.assign({name:"harga_pergram",component:n.p,type:"text",onChange:this.hitungTotal()},j,{label:"Harga / Gram",placeholder:"Masukan Harga / Gram"}))),n.n.createElement("div",{className:"col-6"},n.n.createElement(n.c,{id:"atribut",name:"atribut",component:n.p,type:"text",label:"Atribut",placeholder:"Masukan Atribut"})),n.n.createElement("div",{className:"col-2"},n.n.createElement(n.c,Object.assign({name:"harga_atribut",component:n.p,type:"text"},j,{label:"Harga Atribut",onChange:this.hitungTotal(),placeholder:"Masukan Harga"}))),n.n.createElement("div",{className:"col-2"},n.n.createElement(n.c,Object.assign({name:"ongkos",component:n.p,type:"text"},j,{onChange:this.hitungTotal(),label:"Ongkos",placeholder:"Masukan Ongkos"}))),n.n.createElement("div",{className:"col-2"},n.n.createElement(n.c,Object.assign({name:"sub_total",component:n.p,type:"text"},j,{readOnly:!0,label:"Sub Total",placeholder:"Masukan Sub Total"}))),n.n.createElement("div",{className:"col-12"},n.n.createElement(n.c,{name:"deskripsi_pesanan",component:n.p,type:"text",label:"Deskripsi",placeholder:"Masukan Deskripsi"})),n.n.createElement("div",{className:"col-2"},n.n.createElement("div",{className:"form-group"},n.n.createElement("label",null,"\xa0"),n.n.createElement("br",null),n.n.createElement("label",null,n.n.createElement(n.c,{name:"options_value",component:"input",onClick:a=>this.chnageValue(a),type:"radio",checked:this.state.isChecked,value:"bawa_sendiri"})," ","Bawa Sendiri"))),n.n.createElement("div",{className:"col-7"},n.n.createElement(n.c,{id:"deskripsi_bawa_sediri",name:"deskripsi_bawa_sediri",component:n.p,type:"text",readOnly:this.state.bawa_sendiri,label:"Deskripsi",placeholder:"Masukan Deskripsi"})),n.n.createElement("div",{className:"col-3"},n.n.createElement(n.c,{readOnly:this.state.bawa_sendiri,name:"berat_bawa_sendiri",component:n.p,type:"text",normalize:n.d,label:"Berat",placeholder:"Masukan Berat"})),n.n.createElement("div",{className:"col-2"},n.n.createElement("div",{className:"form-group"},n.n.createElement("label",null,"\xa0"),n.n.createElement("br",null),n.n.createElement("label",null,n.n.createElement(n.c,{name:"options_value",component:"input",type:"radio",onClick:a=>this.chnageValue(a),value:"dari_toko"})," ","Dari Toko"))),n.n.createElement("div",{className:"col-3"},n.n.createElement(n.c,{id:"kode_dari_toko",name:"kode_dari_toko",onChange:a=>this.getBarcode(a.target.value),component:n.p,type:"text",label:"Kode Barcode",readOnly:this.state.dari_toko,placeholder:"Masukan Kode Barcode"})),n.n.createElement("div",{className:"col-4"},n.n.createElement(n.c,{name:"deskripsi_dari_toko",component:n.p,type:"text",label:"Deskripsi",readOnly:!0,placeholder:"Masukan Deskripsi"})),n.n.createElement("div",{className:"col-3"},n.n.createElement(n.c,{name:"berat_dari_toko",component:n.p,type:"text",normalize:n.d,label:"Berat",readOnly:!0,placeholder:"Masukan Berat"})),n.n.createElement("div",{className:"col-6"},n.n.createElement("button",{className:"btn btn-warning",type:"button",onClick:()=>this.hideModal()}," ","Close"," ")),n.n.createElement("div",{className:"col-6 text-right"},n.n.createElement("button",{className:"btn btn-primary"}," Add "))))}}O=Object(n.O)({form:"ModalTambahBarangPesanan",enableReinitialize:!0})(O);var N=Object(n.u)(a=>{const e=Object(n.x)("ModalTambahBarangPesanan")(a,"kadar","berat","harga_pergram","ongkos","harga_atribut"),t=e.ongkos,s=e.kadar,r=e.harga_pergram,o=e.berat,i=e.harga_atribut;let l=Object(y.n)(parseInt(r||0)*parseInt(s||0)/parseInt(100)*parseFloat(o||0)),c=parseInt(l||0)+parseInt(t||0)+parseInt(i||0);return{DataGroup:a.datamaster.GetDataGroup,sub_total:parseFloat(c)}})(O);class S extends n.n.Component{constructor(a){super(a),this.state={isLoading:!1,loadingreset:!1,FormModal:"",isLoadingPembayranTitipan:!1,isLoadingPembayran:!1,columns:[{dataField:"kode_kategori",text:"Kategori",footerAttrs:{colSpan:"5"},footer:"Total"},{dataField:"kode_barcode",text:"Kode Barcode"},{dataField:"keterangan",text:"Nama Barang"},{dataField:"perkiraan_berat",text:"Perkiraan Berat"},{dataField:"perkiraan_kadar",text:"Perkiraan Kadar"},{dataField:"harga_gram",text:"Harga / Gram",formatter:a=>n.n.createElement("span",null,parseInt(a).toLocaleString("kr-KO")),footer:a=>parseInt(a.reduce((a,e)=>a+e,0)).toLocaleString("kr-KO")},{dataField:"sub_total",text:"Sub Total",formatter:a=>n.n.createElement("span",null,parseInt(a).toLocaleString("kr-KO")),footer:a=>parseInt(a.reduce((a,e)=>a+e,0)).toLocaleString("kr-KO")},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:(a,e,t)=>n.n.createElement("div",{className:"row text-center"},n.n.createElement("div",{className:"col-12"},n.n.createElement("button",{type:"button",onClick:()=>this.hapusdata(t,e),className:"btn btn-danger mr-3"},n.n.createElement("i",{className:"fa fa-trash"})))),footer:""}]},this.handleSubmit=this.handleSubmit.bind(this)}handleSubmit(a){let e={alamat_customer:a.alamat_customer||"-",jenis_pelanggan:a.jenis_pelanggan||"NONMEMBER",kode_customer:"NONMEMBER"===a.jenis_pelanggan?"NONMEMBER":a.kode_customer,kode_sales:a.kode_sales,nama_customer:a.nama_customer||"REGULER",no_hp:a.no_hp||"-"};Object(n.J)("data_customer_tmp",JSON.stringify(e)),this.setState({isLoadingDataCustomer:!0}),setTimeout(()=>{this.setState({isLoadingDataCustomer:!1}),this.props.dispatch(Object(n.F)())},500)}ShowModalCustomer(){this.setState({FormModal:"ShowModalCustomer"}),this.props.dispatch(Object(n.R)())}ShowModalBarang(){this.setState({FormModal:"ShowModalBarang"}),this.props.dispatch(Object(n.R)())}simpanBarang(a){let e=[],t={kode_kategori:a.kode_group,perkiraan_berat:parseFloat(a.berat),perkiraan_kadar:parseInt(a.kadar),harga_gram:parseInt(a.harga_pergram),attribut:a.atribut||"-",harga_atribut:parseInt(a.harga_atribut||0),ongkos:parseInt(a.ongkos||0),sub_total:parseInt(a.sub_total),keterangan:a.jenis_barang||"-",deskripsi:a.deskripsi_pesanan||"-",barang_contoh_internal:"dari_toko"===a.options_value,kode_barcode:a.kode_dari_toko||"-",deskripsi_contoh:"dari_toko"===a.options_value?a.deskripsi_dari_toko||"-":a.deskripsi_bawa_sediri||"-",berat_barang_contoh:"dari_toko"===a.options_value?a.berat_dari_toko||0:a.berat_bawa_sendiri||0};e.push(t),Object(n.Q)("data_barang_pesanan",e),this.setState({status:!0}),this.props.dispatch(Object(n.P)("ModalTambahBarangPesanan")),this.props.dispatch(Object(n.F)())}hapusdata(a,e){n.r.fire({title:"Anda Yakin !!",text:"Ingin Menghapus Data Ini ?",icon:"warning",position:"top-center",cancelButtonText:"Tidak",showCancelButton:!0,confirmButtonText:"OK",showConfirmButton:!0}).then(e=>{if(e.isConfirmed){let e=Object(n.D)("data_barang_pesanan");e.splice(a,1),Object(n.Q)("data_barang_pesanan",e),this.setState({status:"berhasil"})}})}bayarSekarang(){this.setState({isLoadingPembayranTitipan:!0});let a=Object(n.D)("estimasi_pesanan"),e=Object(n.D)("trx_pemabayaran_pesanan"),t=[],r=0,o=0;e.forEach(a=>{"CASH"===a.jenis?(o=parseInt(a.nominal)<=Math.abs(parseInt(Object(n.D)("sisa_bayar_pesanan").sisa_bayar))?Math.abs(parseInt(Object(n.D)("sisa_bayar_pesanan").sisa_bayar)-parseInt(a.nominal)):parseInt(a.nominal),o=parseInt(a.nominal)>=Math.abs(parseInt(Object(n.D)("sisa_bayar_pesanan").total_transaksi))?parseInt(a.nominal)-Math.abs(parseInt(Object(n.D)("sisa_bayar_pesanan").sisa_bayar)):parseInt(a.nominal)):o=parseInt(a.nominal);let e={jenis:a.jenis,keterangan:a.keterangan,fee:"CREDIT"===a.jenis&&parseInt(a.fee)||0,jumlah_rp:o};r=a.nominal+r,t.push(e)});let i=JSON.parse(Object(n.I)("data_customer_tmp")),l=Object(n.D)("data_barang_pesanan"),c=[],m=0;l.forEach((a,e)=>{m=a.sub_total+m;let t={kode_kategori:a.kode_kategori,perkiraan_berat:parseFloat(a.perkiraan_berat),perkiraan_kadar:parseInt(a.perkiraan_kadar),harga_gram:parseInt(a.harga_gram),attribut:a.attribut||"-",kode_barcode:a.kode_barcode||"-",harga_atribut:parseInt(a.harga_atribut),ongkos:parseInt(a.ongkos||0),sub_total:parseInt(a.sub_total),keterangan:a.keterangan||"-",deskripsi:a.deskripsi||"-",barang_contoh_internal:a.barang_contoh_internal||!1,deskripsi_contoh:a.deskripsi_contoh||"-",berat_barang_contoh:parseFloat(a.berat_barang_contoh)};c.push(t)});let p={status:"PESANAN",estimasi_tanggal:a,kode_sales:i.kode_sales,kode_customer:"NONMEMBER"===i.jenis_pelanggan?i.jenis_pelanggan:i.kode_customer,nama_customer:i.nama_customer,alamat_customer:i.alamat_customer,no_hp:i.no_hp,detail_barang:c,pembayaran:t,total_harga:m,jumlah_bayar:r,sisa_bayar:Math.abs(parseInt(m)-parseInt(r))};Object(s.k)("pesanan/create",p).then(a=>{if(Object(n.Q)("data_barang_pesanan",[]),Object(n.t)("success","Transaksi Pesanan Berhasil"),0!==a.data.length){let e=[];for(let t=0;t<2;t++){let t="";t+="========================================\n",t+="               NOTA PESANAN             \n",t+="========================================\nTanggal          : ".concat(a.data.tanggal,"\nNama Customer    : ").concat(a.data.nama_customer,"\nNo Hp            : ").concat(a.data.no_hp,"\n"),t+="========================================\n",t+="Keterangan\n",t+="========================================\n",a.data.detail_barang.forEach((e,n)=>{t+="No Faktur Pesanan  : ".concat(a.data.no_pesanan,"\n"),t+="Dp                 : ".concat(a.data.dp.toLocaleString("kr-KO"),"\n"),t+="Estimasi Pesanan   : ".concat(a.data.estimasi_tanggal,"\n"),t+="========================================\n",t+="                               TTD      \n",t+="                                        \n",t+="                                        \n",t+="                                        \n",t+="                         (             )\n",t+="                                        \n",t+="                                        \n",t+="                                        \n"}),e.push(t)}document.getElementById("nota_pesanan").value=e.join(""),setTimeout(()=>{this.TextFilenotapesanan()},100)}}).then(()=>{this.props.dispatch(Object(n.F)())}).then(()=>{this.props.dispatch(Object(n.P)("ModalPembayaran"))}).then(()=>{Object(n.Q)("data_barang_pesanan",[]),Object(n.Q)("trx_pemabayaran_pesanan",[]),Object(n.Q)("data_customer_tmp",[]),Object(n.Q)("estimasi_pesanan",[])}).then(()=>{this.setState({isLoadingPembayranTitipan:!1})}).catch(a=>{this.setState({isLoadingPembayranTitipan:!1}),Object(n.t)("info",void 0===a.response?"Terjadi Kesalahan Saat Request Data, Silahkan Ulangi Lagi":a.response.data.message||"Terjadi Kesalahan Saat Request Data, Silahkan Ulangi Lagi")})}showModalPembayaran(){let a=Object(n.D)("data_customer_tmp")||[],e=Object(n.D)("data_barang_pesanan")||[];0===a.length||0===e.length?Object(n.t)("info","Data Customer Atau Data Barang Belum Diisi !!!"):(this.setState({FormModal:"ShowModalPembayaran"}),this.props.dispatch(Object(n.R)()))}TextFilenotapesanan(){const a=document.createElement("a"),e=new Blob([document.getElementById("nota_pesanan").value],{type:"text/plain;charset=utf-8"});a.href=URL.createObjectURL(e),a.download="autoprint_pesanan.txt",document.body.appendChild(a),a.click()}reset(){this.setState({loadingreset:!0}),setTimeout(()=>{Object(n.Q)("data_barang_pesanan",[]),Object(n.Q)("trx_pemabayaran_pesanan",[]),Object(n.Q)("data_customer_tmp",[]),Object(n.Q)("estimasi_pesanan",[]),this.setState({loadingreset:!1})},100)}render(){const a={renderer:a=>n.n.createElement("div",{className:"container"},n.n.createElement("div",{className:"row"},n.n.createElement("div",{className:"col-12"},"Ongkos : ",a.ongkos.toLocaleString("kr-KO")," ",n.n.createElement("br",null),"Nama Atribut : ",a.attribut," ",n.n.createElement("br",null),"Harga Atribut : ",a.harga_atribut.toLocaleString("kr-KO")," ",n.n.createElement("br",null),"Betar Barang Contoh : ",a.berat_barang_contoh," ",n.n.createElement("br",null),"Deskripsi Contoh : ",a.deskripsi_contoh," ",n.n.createElement("br",null),"Deskripsi Pesanan : ",a.deskripsi," ",n.n.createElement("br",null)))),showExpandColumn:!0,expandByColumnOnly:!0};return n.n.createElement("div",null,n.n.createElement("ol",{className:"breadcrumb float-xl-right"},n.n.createElement("li",{className:"breadcrumb-item"},n.n.createElement(n.g,{to:"#"},"Pesanan")),n.n.createElement("li",{className:"breadcrumb-item active"},"Transaksi Pesanan")),n.n.createElement("h1",{className:"page-header"},"Transaksi Pesanan "),n.n.createElement("textarea",{style:{display:"none"},id:"nota_pesanan",rows:"100",cols:"100"}),n.n.createElement(n.k,null,n.n.createElement(n.m,null,"Transaksi Pesanan"),n.n.createElement("br",null),n.n.createElement(n.l,null,n.n.createElement(n.s,{keyField:"kode_barcode",exportCsv:!1,data:Object(n.D)("data_barang_pesanan")||[],tambahData:!0,btnText:"Data Customer",columns:this.state.columns,btnOptional:!0,namaCustomer:!0,jenisCustomer:!0,form:"Penjualan",btnTextOptional:"Data Barang",handleClick:()=>this.ShowModalCustomer(),handleClickOptional:()=>this.ShowModalBarang(),empty:!0,textEmpty:"Data Barang Kosong",expandRow:a,margin:!0}),n.n.createElement("div",{className:"row"},n.n.createElement("div",{className:"col-6 text-left"},n.n.createElement("button",{className:"btn btn-primary",onClick:()=>this.showModalPembayaran()}," ","Simpan Pesanan"," "),"\xa0",n.n.createElement("button",{className:"btn btn-warning",onClick:()=>this.reset()},this.state.loadingreset?n.n.createElement(n.n.Fragment,null,n.n.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Reset"):"Reset")))),n.n.createElement("br",null)),n.n.createElement(n.i,{size:"ShowModalCustomer"===this.state.FormModal?"xl":"ShowModalBarang"===this.state.FormModal?"xl":"l",title:"ShowModalCustomer"===this.state.FormModal?"Data Customer":"ShowModalBarang"===this.state.FormModal?"Tambah Barang Pesanan":"Form Pembayaran",content:"ShowModalCustomer"===this.state.FormModal?n.n.createElement(c,{isLoadingDataCustomer:this.state.isLoadingDataCustomer,onSubmit:a=>this.handleSubmit(a)}):"ShowModalBarang"===this.state.FormModal?n.n.createElement(N,{isLoadingTopBar:this.props.isLoadingTopBar,hideModal:()=>this.hideModa(),onSubmit:a=>this.simpanBarang(a)}):n.n.createElement(E,{isLoadingPembayranTitipan:this.state.isLoadingPembayranTitipan,isLoadingPembayran:this.state.isLoadingPembayran,bayarSekarang:a=>this.bayarSekarang(a),simpanPembayaran:a=>this.simpanPembayaran(a)})}),this.props.isLoadingPembayranTitipan?n.n.createElement(g.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}S=Object(n.O)({form:"Pesanan",enableReinitialize:!0})(S);e.default=Object(n.u)()(S)},724:function(a,e,t){"use strict";e.a=(a=>{const e={};return a.jenis||(e.jenis="Jenis Tidak Boleh Kosong"),e})},743:function(a,e,t){"use strict";e.a=(a=>{const e={};return a.kode_sales||(e.kode_sales="Kode Sales Harus Dipilih"),a.nama_customer||(e.nama_customer="Nama Customer Harus Diisi"),a.no_hp||(e.no_hp="No Hp Harus Diisi"),a.alamat||(e.alamat="Alamat Harus Diisi"),e})}}]);
//# sourceMappingURL=17.8824b990.chunk.js.map