(window.webpackJsonp=window.webpackJsonp||[]).push([[112],{1264:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),s=t(31),i=t(72),r=t(41),m=t(329),o=t(330),c=t(23),d=t(7),b=t(94),p=t(54),g=t.n(p);class h extends n.Component{constructor(e){super(e),this.state={date:new Date,kondisi_barang:"kosong",isLoadingBatal:!1}}setStartDate(e){this.setState({tgl_awal:new Date(e)})}setLastDate(e){this.setState({tgl_akhir:new Date(e)})}render(){return l.a.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-8"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-6"},l.a.createElement(m.a,{onChange:this.props.getKodeMember,name:"kode_member",component:c.e,type:"text",label:"Kode Member",placeholder:"Masukan Kode Member"})),l.a.createElement("div",{className:"col-lg-6"},l.a.createElement(m.a,{id:"lihat_transaksi_nama_member",name:"nama_member",readOnly:!0,component:c.e,type:"text",label:"Nama Member",placeholder:"Masukan Nama Member"})))),l.a.createElement("div",{className:"col-4 text-center"},l.a.createElement(l.a.Fragment,null," \xa0 "),l.a.createElement("h1",{style:"POINT"===this.props.point?{fontSize:"4.875rem",position:"absolute",left:"56px",top:"25px"}:{fontSize:"4.875rem",position:"absolute",left:"110px",top:"25px"}}," ",this.props.point," ")),l.a.createElement("div",{className:"col-8"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-6"},l.a.createElement(m.a,{id:"lihat_transaksi_alamat",name:"alamat",readOnly:!0,component:c.e,type:"text",label:"Alamat",placeholder:"Masukan Alamat"})),l.a.createElement("div",{className:"col-lg-6"},l.a.createElement(m.a,{id:"lihat_transaksi_no_hp",name:"no_hp",readOnly:!0,component:c.e,type:"text",label:"No Hp",placeholder:"Masukan No Hp"})))),l.a.createElement("div",{className:"col-4 text-center"}),l.a.createElement("div",{className:"col-lg-4"},l.a.createElement(m.a,{name:"dari_tanggal",component:c.c,type:"text",selected:this.state.tgl_awal,onChange:e=>this.setStartDate(e),label:"Dari Tanggal",placeholder:"Masukan Dari Tanggal"})),l.a.createElement("div",{className:"col-lg-4"},l.a.createElement(m.a,{name:"sampai_tanggal",component:c.c,type:"text",selected:this.state.tgl_akhir,onChange:e=>this.setLastDate(e),label:"Sampai Tanggal",placeholder:"Masukan Sampai Tanggal"})),l.a.createElement("div",{className:"col-lg-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-6"},l.a.createElement("label",null,"\xa0"),l.a.createElement("button",{type:"submit",value:"PDF",name:"type_btn",className:"btn btn-primary btn-block"},this.props.isLoading?l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Lihat"):"Lihat")),l.a.createElement("div",{className:"col-lg-6"},l.a.createElement("label",null,"\xa0"),l.a.createElement("button",{type:"button",onClick:this.props.batalLihatTransaksi,className:"btn btn-warning btn-block"},this.props.isLoadingBatal?l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Batal"):"Batal")))),l.a.createElement("div",{className:"col-12"},l.a.createElement(b.a,{keyField:"tgl_trx",exportCsv:!0,data:this.props.datatransaksimember,columns:this.props.columns,empty:!0,textEmpty:"Data Transaksi Member Kosong"}))),this.props.isLoadingBatal||this.props.isLoading?l.a.createElement(g.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}h=Object(o.a)({form:"HeadTransaksiMember",enableReinitialize:!0})(h);var u=Object(r.b)(e=>({initialValues:{dari_tanggal:Object(d.h)(),sampai_tanggal:Object(d.h)()},datakondisi:e.datamaster.getDataKondisiBarang,setHancurBarang:e.databarang.setHancurBarang}),null)(h),k=t(30),E=t(110),_=t(11),L=t(53);class N extends l.a.Component{constructor(e){super(e),this.state={isLoading:!1,isLoadingBatal:!1,point:"POINT",datatransaksimember:[],columns:[{dataField:"tgl_trx",text:"Tanggal Trx",sort:!0},{dataField:"kategori",text:"Kategori"},{dataField:"deskripsi",text:"Deskripsi"},{dataField:"berat",text:"Berat",formatter:e=>l.a.createElement("span",null,parseFloat(e).toFixed(3))},{dataField:"jumlah_rp",text:"Jumlah Rp",formatter:e=>l.a.createElement("span",null,parseFloat(e).toLocaleString("kr-KO"))},{dataField:"poin_awal",text:"Poin Awal",formatter:(e,a)=>e||0},{dataField:"poin",text:"Poin",formatter:(e,a)=>e||0},{dataField:"poin_akhir",text:"Poin Akhir",formatter:(e,a)=>e||0}]},this.handleSubmit=this.handleSubmit.bind(this),this.getKodeMember=this.getKodeMember.bind(this)}batalLihatTransaksi(){this.setState({isLoadingBatal:!0}),setTimeout(()=>{this.setState({isLoadingBatal:!1,datatransaksimember:[]}),this.props.dispatch(Object(L.d)("HeadTransaksiMember"))},1e3)}getKodeMember(e){clearTimeout(this.delay),this.delay=setTimeout(()=>{if(void 0===e.kode_member)return!1;this.setState({isLoading:!0}),Object(_.d)("member/get/by-kode-member/"+e.kode_member).then(e=>{this.setState({isLoading:!1}),e.data.forEach((e,a)=>{document.getElementById("lihat_transaksi_nama_member").value=e.nama_customer,document.getElementById("lihat_transaksi_alamat").value=e.alamat_customer,document.getElementById("lihat_transaksi_no_hp").value=e.no_hp,this.setState({datatransaksimember:[],point:e.point||0,isLoading:!1})})}).catch(e=>{Object(k.e)("info","Data member tidak ada"),this.setState({datatransaksimember:[],isLoading:!1})})},1500)}handleSubmit(e){let a={kode_member:e.kode_member,tgl_awal:Object(d.e)(E(new Date(e.dari_tanggal)).format("YYYY-MM-DD")),tgl_akhir:Object(d.e)(E(new Date(e.sampai_tanggal)).format("YYYY-MM-DD"))};Object(_.j)("trxmember/get/by-tanggal",a).then(e=>{0===e.data.length?(Object(k.e)("info","Data Yang Di Cari Tidak Ada !!!"),this.setState({isLoading:!1,export:!1})):(Object(k.e)("success","Laporan Transaksi Member Tersedia"),Object(d.m)("tgl_laporan",JSON.stringify(a)),this.setState({export:!0,isLoading:!1,datatransaksimember:e.data}))}).catch(e=>{Object(k.e)("info","Data Yang Di Cari Tidak Ada !!!"),this.setState({isLoading:!1,export:!1})})}render(){return l.a.createElement("div",null,l.a.createElement("ol",{className:"breadcrumb float-xl-right"},l.a.createElement("li",{className:"breadcrumb-item"},l.a.createElement(s.b,{to:"#"},"Member")),l.a.createElement("li",{className:"breadcrumb-item active"},"Lihat Transaksi Member")),l.a.createElement("h1",{className:"page-header"},"Lihat Transaksi Member "),l.a.createElement(i.a,null,l.a.createElement(i.c,null,"Lihat Transaksi Member"),l.a.createElement("br",null),l.a.createElement("div",{className:"container"},l.a.createElement(u,{onChange:e=>this.getKodeMember(e),batalLihatTransaksi:()=>this.batalLihatTransaksi(),onSubmit:e=>this.handleSubmit(e),columns:this.state.columns,point:this.state.point,isLoadingBatal:this.state.isLoadingBatal,datatransaksimember:this.state.datatransaksimember}),l.a.createElement("br",null)),l.a.createElement("br",null)),this.state.isLoadingBatal||this.state.isLoading?l.a.createElement(g.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}N=Object(o.a)({form:"LihatTransaksiMember",enableReinitialize:!0})(N);a.default=Object(r.b)(null)(N)}}]);
//# sourceMappingURL=112.408d90fa.chunk.js.map