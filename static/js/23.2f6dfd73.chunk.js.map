{"version":3,"sources":["pages/Barang/PindahBarang/HeadPindahBarang.jsx","pages/Barang/PindahBarang/FormPindahBarang.jsx","Validasi/Barang/PindahBarang/ValidasiPindahBarang.jsx"],"names":["HeadPindahBarang","Component","constructor","props","super","this","state","date","Date","isLoadingBatal","isLoadingBaki","componentWillUnmount","componentDidMount","dispatch","getDataGudang","getDataBaki","setTimeout","setState","kode_gudang","change","getKodeBarcode","e","clearTimeout","delay","getData","then","res","data","length","ToastNotification","JSON","parse","localStorage","getItem","findIndex","hasil","kode_barcode","push","setItem","stringify","setBarangPindah","catch","err","batalHancur","render","react_default","a","createElement","onSubmit","handleSubmit","autoComplete","onKeyPress","key","preventDefault","className","Field","id","label","name","onChange","options","datagudang","filter","list","undefined","map","value","nama_gudang","placeholder","component","ReanderSelect","databaki","kode_baki","nama_baki","field","target","ReanderField","type","tabel","keyField","exportCsv","pagination","columns","empty","textEmpty","disabled","submitting","isLoading","Fragment","onClick","loading_default","loading","background","loaderColor","reduxForm","form","enableReinitialize","validate","ValidasiPindahBarang","connect","datamaster","databarang","FormPindahBarang","_this","Object","classCallCheck","_super","call","isEdit","modalDialog","dataField","text","footerAttrs","colSpan","footer","cell","row","num","index","formatter","toFixed","columnData","reduce","acc","item","csvExport","headerClasses","rowcontent","hapusdata","bind","assertThisInitialized","_this2","Swal","fire","title","icon","position","cancelButtonText","showCancelButton","confirmButtonText","showConfirmButton","result","isConfirmed","splice","_this3","barang_tmp","kode_toko","detail_barang","postData","error","errorhandling","test","response","_this4","react_router_dom","to","panel","PindahBarang_HeadPindahBarang","React","errors","statusAktif"],"mappings":"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","file":"static/js/23.2f6dfd73.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Field, reduxForm } from \"redux-form\";\r\nimport { setBarangPindah } from \"../../../actions/databarang_action\";\r\nimport { getDataBaki, getDataGudang } from \"../../../actions/datamaster_action\";\r\nimport {\r\n  ReanderSelect,\r\n  SkeletonLoading,\r\n  ReanderField,\r\n} from \"../../../components/helpers/field\";\r\nimport { ToastNotification } from \"../../../components/helpers/notification\";\r\nimport Tabel from \"../../../components/helpers/tabel\";\r\nimport { getData } from \"../../../config/axios\";\r\nimport ValidasiPindahBarang from \"../../../Validasi/Barang/PindahBarang/ValidasiPindahBarang\";\r\nimport Loading from 'react-fullscreen-loading';\r\nconst maptostate = (state) => {\r\n  return {\r\n    datagudang: state.datamaster.getDataGudang,\r\n    databaki: state.datamaster.getDataBaki,\r\n    setBarangPindah: state.databarang.setBarangPindah,\r\n  };\r\n};\r\nclass HeadPindahBarang extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      date: new Date(),\r\n      isLoadingBatal:false,\r\n      isLoadingBaki: false,\r\n    };\r\n  }\r\n  componentWillUnmount() {}\r\n  componentDidMount() {\r\n    this.props.dispatch(getDataGudang());\r\n    this.props.dispatch(getDataBaki());\r\n    setTimeout(() => {\r\n      // document.getElementById('kode_gudang').p\r\n      this.setState({ kode_gudang: 'TOKO' });\r\n      this.props.change('kode_gudang','TOKO')\r\n    }, 100);\r\n  }\r\n  getKodeBarcode(e) {\r\n    clearTimeout(this.delay)\r\n    this.delay = setTimeout(() => {\r\n      getData(\"barang/open/kode-barcode?kode_barcode=\" + e)\r\n      .then((res) => {\r\n        if (res.data.length === 0) {\r\n          ToastNotification(\"info\", \"Data Yang Dicari Tidak Ada\");\r\n          // return false\r\n        } else {\r\n          let data = JSON.parse(localStorage.getItem(\"data_barang_tmp\")) || [];\r\n          let index = data.findIndex((hasil) => hasil.kode_barcode === e);\r\n          if (index === -1) {\r\n            data.push(res.data[0]);\r\n            localStorage.setItem(\"data_barang_tmp\", JSON.stringify(data));\r\n            this.props.dispatch(setBarangPindah(data));\r\n            this.props.change(\"kode_barcode\", \"\");\r\n          }\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        ToastNotification(\"info\", \"Data Yang Dicari Tidak Ada\");\r\n      });\r\n    }, 1500);\r\n  }\r\n  batalHancur() {\r\n    this.setState({ isLoadingBatal: true })\r\n    setTimeout(() => {\r\n      this.props.dispatch(setBarangPindah([]));\r\n      localStorage.setItem('data_barang_tmp', JSON.stringify([]))\r\n      this.setState({ isLoadingBatal: false })\r\n    }, 500);\r\n  }\r\n  render() {\r\n    return (\r\n      <form onSubmit={this.props.handleSubmit} autoComplete=\"off\"\r\n      onKeyPress={(e) => {\r\n        e.key === \"Enter\" && e.preventDefault();\r\n      }}\r\n      >\r\n        <div className=\"row\">\r\n          <div className=\"col-lg-4\">\r\n            <Field\r\n              id=\"kode_gudang\"\r\n              label=\"Kode Gudang\"\r\n              name=\"kode_gudang\"\r\n              onChange={(e) => {\r\n                this.setState({ kode_gudang: e });\r\n                this.props.change(\"kode_baki\", \"\");\r\n              }}\r\n              options={this.props.datagudang\r\n                .filter((list) => list.kode_gudang !== undefined)\r\n                .map((list) => {\r\n                  let data = {\r\n                    value: list.kode_gudang,\r\n                    name: list.kode_gudang + \" - \" + list.nama_gudang,\r\n                  };\r\n                  return data;\r\n                })}\r\n              placeholder={\"Silahkan Pilih Kode Gudang\"}\r\n              component={ReanderSelect}\r\n            />\r\n          </div>\r\n          <div className=\"col-lg-4\">\r\n            {this.state.isLoadingBaki === false ? (\r\n              <Field\r\n                label=\"Baki Tujuan\"\r\n                name=\"kode_baki\"\r\n                options={this.props.databaki\r\n                  .filter((list) => list.kode_gudang === this.state.kode_gudang)\r\n                  .map((databaki) => {\r\n                    let data = {\r\n                      value: databaki.kode_baki,\r\n                      name: databaki.kode_baki + \" - \" + databaki.nama_baki,\r\n                    };\r\n                    return data || [];\r\n                  })}\r\n                placeholder={\"Silahkan Pilih Baki Tujuan\"}\r\n                component={ReanderSelect}\r\n              />\r\n            ) : (\r\n              <SkeletonLoading label=\"Baki Tujuan\" />\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"col-lg-4\">\r\n            <Field\r\n              onChange={(e) => this.getKodeBarcode(e.target.value)}\r\n              name=\"kode_barcode\"\r\n              component={ReanderField}\r\n              type=\"text\"\r\n              label=\"Kode Barcode\"\r\n              placeholder=\"Masukan Kode Barcode\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <Tabel\r\n          keyField=\"kode_barcode\"\r\n          exportCsv={false}\r\n          pagination=\"off\"\r\n          data={\r\n            this.props.setBarangPindah.length === 0\r\n              ? JSON.parse(localStorage.getItem(\"data_barang_tmp\"))\r\n              : this.props.setBarangPindah\r\n          }\r\n          columns={this.props.columns}\r\n          empty={true}\r\n          textEmpty=\"Data Barang Kosong\"\r\n        />\r\n        <div className=\"row\">\r\n          <div className=\"col-10\">\r\n            <button\r\n              className=\"btn btn-primary\"\r\n              disabled={this.props.submitting}\r\n              type=\"submit\"\r\n            >\r\n              {this.props.isLoading ? (\r\n                <>\r\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Sedang\r\n                  Menyimpan\r\n                </>\r\n              ) : (\r\n                \"Simpan Data\"\r\n              )}\r\n            </button>\r\n            &nbsp;\r\n            <button\r\n              className=\"btn btn-warning\"\r\n              type=\"button\"\r\n              onClick={()=>this.batalHancur()}\r\n              disabled={this.props.isLoadingBatal}\r\n            >\r\n              {this.state.isLoadingBatal ? (\r\n                <>\r\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Sedang\r\n                  Membatal\r\n                </>\r\n              ) : (\r\n                \"Batal\"\r\n              )}\r\n            </button>\r\n          </div>\r\n          {/* <div className=\"2\">\r\n            {JSON.parse(localStorage.getItem(\"data_barang_tmp\")) ===\r\n            null ? null : (\r\n              <>\r\n                Total Barang :{\" \"}\r\n                {this.props.setBarangPindah.length === 0\r\n                  ? JSON.parse(localStorage.getItem(\"data_barang_tmp\"))\r\n                      .length || 0\r\n                  : this.props.setBarangPindah.length || 0}\r\n                <br />\r\n                Total Berat :\r\n                {this.props.setBarangPindah.length === 0\r\n                  ? JSON.parse(localStorage.getItem(\"data_barang_tmp\"))\r\n                      .map((column, key) => column.berat)\r\n                      .reduce((a, b) => a + b, 0)\r\n                      .toFixed(1)\r\n                  : this.props.setBarangPindah\r\n                      .map((column, key) => column.berat)\r\n                      .reduce((a, b) => a + b, 0)\r\n                      .toFixed(1)}\r\n              </>\r\n            )}\r\n          </div> */}\r\n        </div>\r\n        {this.props.isLoading ? (\r\n        <Loading \r\n        loading\r\n        background=\"rgba(0, 0, 0, 0.35)\"\r\n         loaderColor=\"rgba(94, 147, 117, 1)\" />\r\n      ) : null}\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nHeadPindahBarang = reduxForm({\r\n  form: \"HeadPindahBarang\",\r\n  enableReinitialize: true,\r\n  validate: ValidasiPindahBarang,\r\n})(HeadPindahBarang);\r\nexport default connect(maptostate, null)(HeadPindahBarang);\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Panel, PanelHeader } from \"../../../components/panel/panel.jsx\";\r\nimport { connect } from \"react-redux\";\r\nimport HeadPindahBarang from \"./HeadPindahBarang.jsx\";\r\nimport Swal from \"sweetalert2\";\r\nimport { setBarangPindah } from \"../../../actions/databarang_action.jsx\";\r\nimport { postData } from \"../../../config/axios.jsx\";\r\nimport { ToastNotification } from \"../../../components/helpers/notification.jsx\";\r\nconst maptostate = (state) => {\r\n  return {\r\n    setBarangPindah: state.databarang.setBarangPindah,\r\n  };\r\n};\r\n\r\nclass FormPindahBarang extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isEdit: false,\r\n      modalDialog: false,\r\n      isLoading: false,\r\n      columns: [\r\n        {\r\n          dataField: \"kode_barcode\",\r\n          text: \"Kode Barcode\",\r\n          footerAttrs: {\r\n            colSpan: \"5\",\r\n          },\r\n          footer: (cell, row, num, index) => {\r\n            return (\r\n              <div>Total Barang : {this.props.setBarangPindah.length === 0\r\n                ?  JSON.parse(localStorage.getItem(\"data_barang_tmp\")) === null  ? 0 :  JSON.parse(localStorage.getItem(\"data_barang_tmp\"))\r\n                    .length || 0\r\n                : this.props.setBarangPindah.length || 0} </div>\r\n            );\r\n          },\r\n        },\r\n        {\r\n          dataField: \"kode_group\",\r\n          text: \"Gudang Asal\",\r\n        },\r\n        {\r\n          dataField: \"kode_toko\",\r\n          text: \"Baki Asal\",\r\n        },\r\n        {\r\n          dataField: \"nama_barang\",\r\n          text: \"Nama Barang\",\r\n        },\r\n        {\r\n          dataField: \"nama_atribut\",\r\n          text: \"Nama Atribut\",\r\n        },\r\n        {\r\n          dataField: \"berat\",\r\n          text: \"Berat\",\r\n          formatter: (cell) => {\r\n            return cell.toFixed(3);\r\n          },\r\n          footer: (columnData) =>\r\n            columnData.reduce((acc, item) => acc + item, 0).toFixed(3),\r\n        },\r\n\r\n        {\r\n          dataField: \"action\",\r\n          text: \"Action\",\r\n          csvExport: false,\r\n          headerClasses: \"text-center\",\r\n          formatter: (rowcontent, row,index) => {\r\n            return (\r\n              <div className=\"row text-center\">\r\n                <div className=\"col-12\">\r\n                  <button type=\"button\" onClick={()=>this.hapusdata(index)} className=\"btn btn-danger mr-3\">\r\n                    <i className=\"fa fa-trash\"></i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            );\r\n          },\r\n          footer : \"\"\r\n        },\r\n      ],\r\n    };\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  hapusdata(id) {\r\n    Swal.fire({\r\n      title: \"Anda Yakin !!\",\r\n      text: \"Ingin Menghapus Data Ini ?\",\r\n      icon: \"warning\",\r\n      position: \"top-center\",\r\n      cancelButtonText: \"Tidak\",\r\n      showCancelButton: true,\r\n      confirmButtonText: \"OK\",\r\n      showConfirmButton: true,\r\n    }).then((result) => {\r\n      if (result.isConfirmed) {\r\n        let data = JSON.parse(localStorage.getItem('data_barang_tmp'));\r\n        data.splice(id, 1)\r\n        localStorage.setItem('data_barang_tmp', JSON.stringify(data));\r\n        this.props.dispatch(setBarangPindah(data));\r\n        // deleteLocalItemBarcode(\"data_barang_tmp\", id);\r\n        // this.props.dispatch(getListReturnSupplier());\r\n      }\r\n    });\r\n  }\r\n  componentDidMount() {\r\n    this.props.dispatch(setBarangPindah([]));\r\n    // this.props.dispatch(getDataBaki());\r\n    // localStorageencryp('data_barang',[])\r\n    localStorage.setItem('data_barang_tmp',\"[]\")\r\n    // console.log(JSON.parse(localStorage.getItem('data_barang_tmp')));\r\n  }\r\n  handleSubmit(data) {\r\n    this.setState({ isLoading: true });\r\n    let barang_tmp = this.props.setBarangPindah.length === 0 ? JSON.parse(localStorage.getItem('data_barang_tmp')) : this.props.setBarangPindah \r\n    let hasil = {\r\n      kode_gudang: data.kode_gudang,\r\n      kode_toko: data.kode_baki,\r\n      detail_barang: barang_tmp\r\n    }\r\n    postData('pindahbarang/addsatuan', hasil)\r\n    .then(() => {\r\n      this.setState({ isLoading: false });\r\n    }).then(() => {\r\n      localStorage.setItem('data_barang_tmp', JSON.stringify([]));\r\n    })\r\n    .then(() => {\r\n      this.props.dispatch(setBarangPindah([]));\r\n    })\r\n    .then(() => {\r\n      ToastNotification(\"success\", \"Data Berhasil Disimpan\");\r\n    }).catch((error) => this.errorhandling(error))\r\n  }\r\n  errorhandling(error) {\r\n    // NotifError(error.response.data)\r\n    ToastNotification(\"info\", /conflict/i.test(error.response.data) ? \"Terjadi Kesalahan Saat Mengirim Data\" : error.response.data);\r\n    this.setState({ isLoading: false });\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <ol className=\"breadcrumb float-xl-right\">\r\n          <li className=\"breadcrumb-item\">\r\n            <Link to=\"#\">Barang</Link>\r\n          </li>\r\n          <li className=\"breadcrumb-item active\">Pindah Barang</li>\r\n        </ol>\r\n        <h1 className=\"page-header\">Pindah Barang </h1>\r\n        <Panel>\r\n          <PanelHeader>Pindah Barang</PanelHeader>\r\n          <br />\r\n\r\n          {/* Pindah Barang */}\r\n          <div className=\"container\">\r\n            <HeadPindahBarang\r\n              isLoading={this.state.isLoading}\r\n              onSubmit={(data) => this.handleSubmit(data)}\r\n              data={this.props.setBarangPindah}\r\n              columns={this.state.columns}\r\n            />\r\n          </div>\r\n          <br />\r\n          {/* End Pindah Barang */}\r\n\r\n          {/* End Tambah Pindah Barang  */}\r\n        </Panel>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(maptostate, null)(FormPindahBarang);\r\n","const ValidasiPindahBarang = (value) => {\r\n    const errors = {};\r\n    if (!value.kode_gudang) {\r\n        errors.kode_gudang = \"Kode Gudang Tidak Boleh Kosong\";\r\n    }\r\n    if (!value.kode_baki) {\r\n        errors.kode_baki = \"Nama Baki Tidak Boleh Kosong\";\r\n    }\r\n\r\n    if (!value.statusAktif) {\r\n        errors.statusAktif = \"Status Tidak Boleh Kosong\";\r\n    }\r\n\r\n    return errors;\r\n}\r\nexport default ValidasiPindahBarang;\r\n\r\n\r\n"],"sourceRoot":""}