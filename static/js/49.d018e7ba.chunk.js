(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{1267:function(a,t,e){"use strict";e.r(t);var n=e(0),i=e.n(n),r=e(31),l=e(72),o=e(22),b=e(41),s=e(7),d=e(26),c=e(27),m=e(29),g=e(28),u=e(329),p=e(330),k=e(13),_=e(23),h=e(54),f=e.n(h),E=e(111),F=e.n(E),O=e(875),v=e.n(O),j=e(11),S=e(30),x=e(155),B=e(314),N=function(a){Object(m.a)(e,a);var t=Object(g.a)(e);function e(a){var n;return Object(d.a)(this,e),(n=t.call(this,a)).state={no_kirim:[],datagudang:[],isLoading:!1,loading:!1,timbangan:0,columns:[{dataField:"kode_gudang",text:"Gudang",sort:!0,editable:!1},{dataField:"kode_toko",text:"Baki",editable:!1},{dataField:"qty",text:"Qty",editable:!1},{dataField:"berat",text:"Berat",editable:!1},{dataField:"berat_baki",text:"Berat baki",editable:!1},{dataField:"berat_plastik",text:"Berat Plastik",editable:!1,formatter:function(a,t){return parseFloat(t.berat_plastik).toFixed(2)}},{dataField:"berat_atribut",text:"Berat Atribut",editable:!1,formatter:function(a,t){return parseFloat(t.berat_atribut).toFixed(2)}},{dataField:"berat_bandrol",text:"Berat Bandrol",editable:!1,formatter:function(a,t){return parseFloat(t.berat_bandrol).toFixed(2)}},{dataField:"total",text:"Total",editable:!1,formatter:function(a,t){return parseFloat(t.berat+t.berat_baki+t.berat_bandrol+t.berat_atribut+t.berat_plastik).toFixed(2)}},{dataField:"timbang",text:"Timbang"},{dataField:"selisih",text:"Selisih",formatter:function(a,t){return parseFloat(t.selisih).toFixed(2)}}]},n}return Object(c.a)(e,[{key:"componentDidMount",value:function(){B.io.connect("http://147.139.193.169:4001/api/v1/".replace("/api/v1/","")).on("timbangan",function(a){Object(s.j)().user_id===a.user_id&&(window.document.activeElement.value=a.value)}),this.props.dispatch(Object(k.nb)()),this.props.dispatch(Object(k.lb)()),this.props.dispatch(Object(x.f)())}},{key:"sendTimbangan",value:function(){var a=this,t={tanggal:Object(s.i)(),detail_barang:this.props.timbang_barang};this.setState({isLoading:!0}),Object(j.k)("timbang-baki",t).then(function(t){a.setState({isLoading:!1}),Object(S.e)("success","Data Berhasil Disimpan"),a.props.dispatch(Object(o.x)([]))}).catch(function(t){a.setState({isLoading:!1}),Object(S.e)("error",t&&t.response&&t.response.data&&"Terjadi kersalahan saat menimbang baki")})}},{key:"render",value:function(){var a=this,t=[{value:"ALL",name:"SEMUA"}];return this.props.databaki.forEach(function(a){var e={value:a.kode_baki,name:a.kode_baki+" - "+a.nama_baki};t.push(e)}),i.a.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off",onKeyPress:function(a){"Enter"===a.key&&a.preventDefault()}},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-4"},i.a.createElement(u.a,{id:"kode_gudang",label:"Kode Gudang",name:"kode_gudang",onChange:function(t){a.setState({kode_gudang:t}),a.props.change("kode_baki",""),a.props.dispatch(Object(k.mb)(t))},options:this.props.datagudang.filter(function(a){return void 0!==a.kode_gudang}).map(function(a){return{value:a.kode_gudang,name:a.kode_gudang+" - "+a.nama_gudang}}),placeholder:"Silahkan Pilih Kode Gudang",component:_.f})),i.a.createElement("div",{className:"col-lg-4"},i.a.createElement(u.a,{id:"kode_baki",label:"Kode Baki",name:"kode_baki",onChange:function(t){a.setState({kode_baki:t}),a.props.change("kode_baki","")},options:t,placeholder:"Silahkan Pilih Kode Baki",component:_.f})),i.a.createElement("div",{className:"col-lg-4"},i.a.createElement("label",{htmlFor:""},"\xa0"),i.a.createElement("button",{className:"btn btn-outline-secondary btn-block"},"Cari"))),i.a.createElement(F.a,{keyField:"baki",data:this.props.products||[],columns:this.state.columns||[],cellEdit:v()({mode:"click",blurToSave:!0,afterSaveCell:function(t,e,n,i){var r={kode_gudang:n.kode_gudang,kode_toko:n.kode_toko,qty:n.qty,berat:n.berat,berat_baki:n.berat_baki,berat_bandrol:n.berat_bandrol,berat_atribut:n.berat_atribut,berat_plastik:n.berat_plastik,total:parseFloat(n.berat_baki)+parseFloat(n.berat_bandrol)+parseFloat(n.berat_atribut)+parseFloat(n.berat_plastik)+parseFloat(n.berat),timbang:parseFloat(e),selisih:parseFloat((parseFloat(n.berat_baki+n.berat_bandrol+n.berat+n.berat_plastik+n.berat_atribut)-parseFloat(e||0)).toFixed(3)||0)},l=0===Object(s.l)("timbang_barang").length?[]:JSON.parse(Object(s.l)("timbang_barang")),b=l.findIndex(function(a){return a.kode_toko===r.kode_toko});-1===b?(l.push(r),Object(s.m)("timbang_barang",JSON.stringify(l)),a.props.dispatch(Object(o.x)(l))):(l[b]=r,Object(s.m)("timbang_barang",JSON.stringify(l)),a.props.dispatch(Object(o.x)(l)))}})}),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-8"}),i.a.createElement("div",{className:"col-lg-4 text-right"},i.a.createElement("label",{htmlFor:""},"\xa0"),i.a.createElement("button",{className:"btn btn-primary btn-block",type:"button",onClick:function(){return a.sendTimbangan()}},this.state.isLoading?i.a.createElement(i.a.Fragment,null,i.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Menyimpan"):"Simpan Data"))),this.state.isLoading?i.a.createElement(f.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}]),e}(n.Component);N=Object(p.a)({form:"FormTimbangBarang",enableReinitialize:!0})(N);var y=Object(b.b)(function(a){var t=null===localStorage.getItem("data_terima_barang")?[]:JSON.parse(localStorage.getItem("data_terima_barang")||[]);return{getDataTimbangan:a.utility.getTimbangan,initialValues:{no_kirim:t.no_kirim||""},datagudang:a.datamaster.getDataGudang,databaki:a.datamaster.getDataBaki,timbang_barang:a.databarang.getTimbangBarang}},null)(N);t.default=Object(b.b)(a=>({timbang_barang:a.databarang.getTimbangBarang}),null)(class extends i.a.Component{constructor(a){super(a),this.state={isEdit:!1,modalDialog:!1,isLoading:!1,isLoadingBtn:!1,DataTimbangBarang:[],SimpanDataBarang:!1,resetTimbangBarang:!1,products:[{gudang:"TOKO",baki:"KLNG",qty:10,berat:200,berat_baki:100,berat_bandrol:.2,total:1250,timbang:0,selisih:0},{gudang:"TOKO",baki:"GLNG",qty:10,berat:200,berat_baki:100,berat_bandrol:.2,total:1250,timbang:0,selisih:0}]}}componentDidMount(){this.props.dispatch(Object(o.o)()),this.setState({products:Object(s.l)("timbang_barang")})}handleSubmit(a){this.props.dispatch(Object(o.p)(a.kode_gudang,a.kode_baki,Object(s.i)()))}render(){return i.a.createElement("div",null,i.a.createElement("ol",{className:"breadcrumb float-xl-right"},i.a.createElement("li",{className:"breadcrumb-item"},i.a.createElement(r.b,{to:"#"},"Barang")),i.a.createElement("li",{className:"breadcrumb-item active"},"Timbang Baki")),i.a.createElement("h1",{className:"page-header"},"Timbang Baki "),i.a.createElement(l.a,null,i.a.createElement(l.c,null,"Timbang Baki"),i.a.createElement("br",null),i.a.createElement("div",{className:"container"},i.a.createElement(y,{handleChange:()=>this.handleChange(),column:this.state.columns||[],products:this.props.timbang_barang||[],onSubmit:a=>this.handleSubmit(a)})),i.a.createElement("br",null)))}})}}]);
//# sourceMappingURL=49.d018e7ba.chunk.js.map