(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{1165:function(a,e,t){"use strict";t.r(e);var n=t(0),o=t.n(n),s=t(47),i=t(328),r=t(329),d=t(35),c=t(15),l=t(30),g=t(24),p=t(92),b=t(13),m=t(784),u=t(61),h=t.n(u);class k extends n.Component{constructor(a){super(a),this.state={date:new Date,isLoadingBatal:!1,kondisi_barang:"kosong"}}componentDidMount(){this.props.dispatch(Object(c.qb)())}getKodeBarcode(a){clearTimeout(this.delay),this.delay=setTimeout(()=>{if(""===a)return!1;Object(b.d)("barang/open/kode-barcode?kode_barcode="+a).then(e=>{0===e.data.length?Object(g.e)("info","Data Yang Dicari Tidak Ada"):"kosong"===this.state.kondisi_barang?(Object(g.e)("info","Kondisi Barang Harus Dipilih"),this.props.change("kode_barcode","")):e.data.forEach((e,t)=>{let n={kode_barcode:e.kode_barcode,kode_group:e.kode_group,kode_dept:e.kode_dept,nama_barang:e.nama_barang,nama_atribut:e.nama_atribut,berat:e.berat,kondisi_barang:this.state.kondisi_barang},o=JSON.parse(localStorage.getItem("data_barang_hancur_tmp"))||[];-1===o.findIndex(e=>e.kode_barcode===a)&&(o.push(n),localStorage.setItem("data_barang_hancur_tmp",JSON.stringify(o)),this.props.dispatch(Object(d.u)(o)),this.props.change("kode_barcode",""))})}).catch(a=>{Object(g.e)("info",a.response&&a.response.data)})},1500)}batalHancur(){this.setState({isLoadingBatal:!0}),setTimeout(()=>{this.setState({isLoadingBatal:!1}),localStorage.setItem("data_barang_hancur_tmp",JSON.stringify([])),this.props.dispatch(Object(d.u)([]))},500)}render(){return o.a.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off",onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()}},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-lg-6"},o.a.createElement(i.a,{label:"Kondisi Barang",name:"kondisi_barang",onChange:a=>{this.setState({kondisi_barang:a})},options:this.props.datakondisi.filter(a=>void 0!==a.kondisi_barang).map(a=>{return{value:a.kondisi_barang,name:a.kondisi_barang}}),placeholder:"Silahkan Pilih Kondisi Barang",component:l.f})),o.a.createElement("div",{className:"col-lg-6"},o.a.createElement(i.a,{onChange:a=>this.getKodeBarcode(a.target.value),name:"kode_barcode",component:l.e,type:"text",label:"Kode Barcode",placeholder:"Masukan Kode Barcode"}))),o.a.createElement(p.a,{keyField:"kode_barcode",pagination:"off",exportCsv:!1,data:0===this.props.setHancurBarang.length?JSON.parse(localStorage.getItem("data_barang_hancur_tmp")):this.props.setHancurBarang,columns:this.props.columns,empty:!0,textEmpty:"Data Barang Kosong"}),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-10"},o.a.createElement("button",{className:"btn btn-primary",type:"submit",disabled:this.props.isLoading},this.props.isLoading?o.a.createElement(o.a.Fragment,null,o.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Menyimpan"):"Simpan Data"),"\xa0",o.a.createElement("button",{className:"btn btn-warning",type:"button",onClick:()=>this.batalHancur(),disabled:this.props.isLoading},this.state.isLoadingBatal?o.a.createElement(o.a.Fragment,null,o.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Membatal"):"Batal"))),this.props.isLoading?o.a.createElement(h.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}k=Object(r.a)({form:"HeadaHancurDataBarang",enableReinitialize:!0,validate:m.a})(k),e.default=Object(s.b)(a=>({datakondisi:a.datamaster.getDataKondisiBarang,setHancurBarang:a.databarang.setHancurBarang}),null)(k)},784:function(a,e,t){"use strict";e.a=(a=>{const e={};return a.kode_gudang||(e.kode_gudang="Kode Gudang Tidak Boleh Kosong"),a.kode_baki||(e.kode_baki="Nama Baki Tidak Boleh Kosong"),a.statusAktif||(e.statusAktif="Status Tidak Boleh Kosong"),e})}}]);
//# sourceMappingURL=21.fe88ebf3.chunk.js.map