(window.webpackJsonp=window.webpackJsonp||[]).push([[118],{1263:function(t,a,e){"use strict";e.r(a);var n=e(3),i=e(13),l=e(61),r=e.n(l);class o extends n.n.Component{constructor(t){super(t),this.state={date:new Date},this.setStartDate=this.setStartDate.bind(this),this.setLastDate=this.setLastDate.bind(this)}handleSubmit(t){}setStartDate(t){this.setState({tgl_awal:new Date(t)})}setLastDate(t){this.setState({tgl_akhir:new Date(t)})}render(){return n.n.createElement("div",null,n.n.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:t=>{"Enter"===t.key&&t.preventDefault()},autoComplete:"off"},n.n.createElement("div",{className:"row"},n.n.createElement("div",{className:"col-lg-4"},n.n.createElement(n.c,{name:"tgl_awal",component:n.f,label:"Tanggal Dari",type:"text",selected:this.state.tgl_awal,onChange:t=>this.setStartDate(t),placeholder:"Masukan Tanggal Dari"})),n.n.createElement("div",{className:"col-lg-4"},n.n.createElement(n.c,{name:"tgl_akhir",component:n.f,type:"text",selected:this.state.tgl_akhir,onChange:t=>this.setLastDate(t),label:"Tanggal Akhir",placeholder:"Masukan Tanggal Akhir"})),n.n.createElement("div",{className:"col-lg-4"},n.n.createElement("div",{className:"text-right"},n.n.createElement("label",null,"\xa0"),n.n.createElement("button",{type:"submit",value:"PDF",name:"type_btn",className:"btn btn-primary btn-block"},this.props.isLoading?n.n.createElement(n.n.Fragment,null,n.n.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Mencari"):"Cari Titipan"))))),this.props.isLoading?n.n.createElement(r.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}o=Object(n.O)({form:"HeadBatalTitipan",enableReinitialize:!0})(o);var s=Object(n.u)(t=>({initialValues:{tgl_awal:Object(n.E)(),tgl_akhir:Object(n.E)()}}))(o);class c extends n.n.Component{constructor(t){super(t),this.state={isLoading:!1,batal:!1,datatitipan:[],databaki:[],columns:[{dataField:"no_titip_group",text:"No Titip",footerAttrs:{colSpan:"4"},footer:"Total"},{dataField:"kode_barcode",text:"Kode Barcode"},{dataField:"nama_barang",text:"Nama Barang"},{dataField:"nama_customer",text:"Nama Customer"},{dataField:"total_dp",text:"Total Dp",formatter:(t,a,e)=>n.n.createElement("span",null,parseInt(a.total_dp).toLocaleString("kr-KO")),footer:t=>parseInt(t.reduce((t,a)=>t+a,0)).toLocaleString("kr-KO")},{dataField:"harga_total",text:"Total Harga",formatter:t=>n.n.createElement("span",null," ",parseInt(t).toLocaleString("kr-KO")),footer:t=>parseInt(t.reduce((t,a)=>t+a,0)).toLocaleString("kr-KO")},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:(t,a,e)=>n.n.createElement("div",{className:"row text-center"},n.n.createElement("div",{className:"col-12"},n.n.createElement("button",{type:"button",disabled:"FINIS"===a.status_titipan,"data-tooltip":"FINIS"!==a.status_titipan?"Batal Titipan":"Tidak Bisa Dibatal",onClick:()=>this.showPilihBaki(a.no_titip_group),className:"btn btn-danger mr-3"},n.n.createElement("i",{className:"fa fa-window-close"})))),footer:""}]},this.handleSubmit=this.handleSubmit.bind(this)}batalTitipan(){n.r.fire({title:"Anda Yakin !!",text:"Ingin Membatalkan Titipan Ini ?",icon:"warning",position:"top-center",cancelButtonText:"Tidak",showCancelButton:!0,confirmButtonText:"OK",showConfirmButton:!0}).then(t=>{if(t.isConfirmed){this.setState({batal:!0});let t=Object(n.D)("tgl_laporan");Object(i.q)("titip/cancel",{no_titip_group:this.state.no_titip_group,kode_toko:this.state.kode_baki}).then(a=>{this.setState({batal:!1}),Object(n.t)("success","Titipan Berhasil Di Batal"),this.props.dispatch(Object(n.F)()),Object(i.e)("titip/date/"+t.tgl_awal+"/"+t.tgl_akhir).then(t=>{let a=[];t.data.filter((e,n)=>{let i={no_titip_group:e.no_titip_group,kode_barcode:e.kode_barcode,nama_barang:e.nama_barang,kode_customer:e.kode_customer,nama_customer:e.nama_customer,nama_atribut:e.nama_atribut,no_hp:e.no_hp,alamat_customer:e.alamat_customer,berat_atribut:e.berat_atribut,harga_atribut:e.harga_atribut,ongkos:e.ongkos,harga_total:e.harga_total,total_dp:t.data.findIndex(t=>t.no_titip_group===e.no_titip_group)===n?e.total_dp:0};return a.push(i),i}),this.setState({datatitipan:a})})}).catch(t=>{Object(n.t)("info",/conflict/i.test(t.response.data.message||"Error")?"Terjadi Kesalahan Saat Mengirim Data":t.response.data.message)})}else this.setState({batal:!1})})}showPilihBaki(t){this.setState({no_titip_group:t}),this.props.dispatch(Object(n.R)())}componentDidMount(){Object(i.d)("baki/ready").then(t=>{this.setState({databaki:t.data})})}handleSubmit(t){this.setState({isLoading:!0}),Object(i.e)("titip/date/"+t.tgl_awal+"/"+t.tgl_akhir).then(a=>{if(0===a.data.length)Object(n.t)("info","Data Yang Anda Cari Tidak Ada"),this.setState({isLoading:!1});else{Object(n.t)("success","Data Titipan Tersedia");let e={tgl_awal:Object(n.y)(Object(n.K)(new Date(t.tgl_awal)).format("YYYY-MM-DD")),tgl_akhir:Object(n.y)(Object(n.K)(new Date(t.tgl_akhir)).format("YYYY-MM-DD"))},i=[];a.data.filter((t,e)=>{let n={no_titip_group:t.no_titip_group,kode_barcode:t.kode_barcode,nama_barang:t.nama_barang,kode_customer:t.kode_customer,nama_customer:t.nama_customer,nama_atribut:t.nama_atribut,no_hp:t.no_hp,alamat_customer:t.alamat_customer,berat_atribut:t.berat_atribut,harga_atribut:t.harga_atribut,ongkos:t.ongkos,harga_total:t.harga_total,total_dp:a.data.findIndex(a=>a.no_titip_group===t.no_titip_group)===e?t.total_dp:0};return i.push(n),n}),this.setState({isLoading:!1,datatitipan:i}),Object(n.Q)("tgl_laporan",e)}}).catch(t=>{Object(n.t)("info",void 0===t.response?"Terjadi Kesalahan Saat Request Data":t.response.data.message),this.setState({isLoading:!1})})}render(){const t={renderer:t=>n.n.createElement("div",{className:"container"},n.n.createElement("div",{className:"row"},n.n.createElement("div",{className:"col-12"},"NONMEMBER"===t.kode_customer?"":"kode Customer :"+t.kode_customer+n.n.createElement(n.n.Fragment,null," ",n.n.createElement("br",null)," "),"No Hp : ",t.no_hp," ",n.n.createElement("br",null),"Alamat Customer : ",t.alamat_customer," ",n.n.createElement("br",null),"Nama Atribut : ",t.nama_atribut," ",n.n.createElement("br",null),"Betat Atribut : ",t.berat_atribut.toFixed(3)," ",n.n.createElement("br",null),"Harga Atribut : ",t.harga_atribut.toLocaleString("kr-KO")," ",n.n.createElement("br",null),"Ongkos : ",t.ongkos.toLocaleString("kr-KO")," ",n.n.createElement("br",null)))),showExpandColumn:!0,expandByColumnOnly:!0};return n.n.createElement("div",null,n.n.createElement("ol",{className:"breadcrumb float-xl-right"},n.n.createElement("li",{className:"breadcrumb-item"},n.n.createElement(n.g,{to:"#"},"Penjualan")),n.n.createElement("li",{className:"breadcrumb-item active"},"Lihat Titipan")),n.n.createElement("h1",{className:"page-header"},"Lihat Titipan "),n.n.createElement(n.k,null,n.n.createElement(n.m,null,"Lihat Titipan"),n.n.createElement("br",null),n.n.createElement(n.l,null,n.n.createElement(s,{isLoading:this.state.isLoading,onSubmit:t=>this.handleSubmit(t)}),n.n.createElement(n.s,{keyField:"kode_barcode",exportCsv:!1,data:this.state.datatitipan,columns:this.state.columns,empty:!0,textEmpty:"Data Barang Kosong",expandRow:t})),n.n.createElement("br",null)),n.n.createElement(n.i,{title:"Pilih Baki",size:"l",content:n.n.createElement(n.n.Fragment,null,n.n.createElement("div",{className:"col-lg-12"},n.n.createElement(n.c,{name:"kode_baki",component:n.q,options:this.state.databaki.filter(t=>void 0!==t.kode_baki).map(t=>{return{value:t.kode_baki,name:t.kode_baki}}),onChange:t=>this.setState({kode_baki:t}),label:"Kode Baki",placeholder:"Silahkan Pilih Kode Lokasi"})),n.n.createElement("div",{className:"col-lg-12"},n.n.createElement("button",{className:"btn btn-primary",disabled:this.state.batal,onClick:()=>this.batalTitipan(),type:"button"},this.state.batal?n.n.createElement(n.n.Fragment,null,n.n.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Batal"):"Batal")))}),this.state.batal?n.n.createElement(r.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null,this.state.isLoading?n.n.createElement(r.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}c=Object(n.O)({form:"BatalTitipan",enableReinitialize:!0})(c);a.default=Object(n.u)()(c)}}]);
//# sourceMappingURL=118.2b2ed376.chunk.js.map