(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{1257:function(a,t,e){"use strict";e.r(t);var n=e(0),s=e.n(n),l=e(47),i=e(27),o=e(55),c=e(329),r=e(68),d=e(24),u=e(131),g=e(13),m=e(15),h=e(92),p=e(61),b=e.n(p);class _ extends n.Component{constructor(a){super(a),this.state={isLoading:!1,DataValidasi:[],kode_sales:!1}}componentDidMount(){this.props.dispatch(Object(m.sb)()),this.getDetaValidasi()}getDataSales(a){this.setState({kode_sales:a}),Object(g.d)("sales/get/by-kode-sales/").then(a=>{this.props.change("nama_sales",a.data.nama_sales)}).catch(a=>{Object(d.e)("info","Gagal Mengambil Data Keserver")})}getDetaValidasi(){this.setState({isLoading:!0});let a={kode_sales:"all"};if(!1===a.kode_sales)return this.setState({isLoading:!1}),Object(d.e)("info","Kode Sales Harus Di pilih"),this.setState({isLoading:!1}),!1;Object(g.j)("validasi/get/hutang",a).then(a=>{0===a.data[0].hutang.length?(Object(d.e)("info","Belum Ada Data Validasi"),this.setState({isLoading:!1})):(Object(d.e)("success","Data Validasi Tersedia"),this.setState({isLoading:!1}),this.props.dispatch(Object(r.j)(a.data[0].hutang)))}).catch(a=>{Object(d.e)("info","Terjadi Kesalahan Saat Request"),this.setState({isLoading:!1,DataValidasi:[]})})}render(){const a={mode:"checkbox",clickToSelect:!0,selectColumnPosition:"left",onSelect:(a,t,e,n)=>{if(!0===t){let t={no_faktur_hutang:a.no_faktur_hutang},e=JSON.parse(localStorage.getItem("validas_hutang"))||[];-1===e.findIndex(t=>t.no_faktur_hutang===a.no_faktur_hutang)&&(e.push(t),localStorage.setItem("validas_hutang",JSON.stringify(e)))}else if(null===localStorage.getItem("validas_hutang"));else{let t=JSON.parse(localStorage.getItem("validas_hutang"));t.splice(a.no_faktur_hutang,1),localStorage.setItem("validas_hutang",JSON.stringify(t))}},onSelectAll:(a,t,e)=>{t.forEach((t,e)=>{if(!0===a){let a={no_faktur_hutang:t.no_faktur_hutang},e=JSON.parse(localStorage.getItem("validas_hutang"))||[];-1===e.findIndex(a=>a.no_faktur_hutang===t.no_faktur_hutang)&&(e.push(a),localStorage.setItem("validas_hutang",JSON.stringify(e)))}else if(null===localStorage.getItem("validas_hutang"));else{let a=JSON.parse(localStorage.getItem("validas_hutang"));a.splice(t.no_faktur_hutang,1),localStorage.setItem("validas_hutang",JSON.stringify(a))}})}};return s.a.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off",onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()}},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-12"},s.a.createElement(h.a,{selectRow:a,keyField:"no_faktur_hutang",columns:this.props.columns,data:this.props.getValidasiHutang||[],empty:!0})),s.a.createElement("div",{className:"col-6"},s.a.createElement("button",{className:"btn btn-primary btn-block",disabled:this.props.isLoading,type:"submit"},this.props.isLoading?s.a.createElement(s.a.Fragment,null,s.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Validasi"):"Validasi")),s.a.createElement("div",{className:"col-6"},s.a.createElement("button",{className:"btn btn-warning btn-block",disabled:this.props.isLoadingBatal,onClick:this.props.btnClear,type:"button"},this.props.isLoadingBatal?s.a.createElement(s.a.Fragment,null,s.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Batal"):"Batal"))),this.props.isLoading||this.props.isLoadingBatal||this.state.isLoading?s.a.createElement(b.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}_=Object(c.a)({form:"HeadValidasiHutang",enableReinitialize:!0})(_);var S=Object(l.b)(a=>({DataSales:a.datamaster.getDataSales,getValidasiHutang:a.hutang.getDataValidasiHutang}))(_);class f extends s.a.Component{constructor(a){super(a),this.state={isLoading:!1,isLoadingBatal:!1,columns:[{dataField:"no_faktur_hutang",text:"No Faktur Hutang "},{dataField:"nama_customer",text:"Nama Customer "},{dataField:"jumlah_hutang",text:"Jumlah Hutang ",formatter:a=>s.a.createElement("span",null,parseFloat(a).toLocaleString("kr-KO"))},{dataField:"no_hp",text:"No Hp "},{dataField:"alamat_customer",text:"Alamat "}]},this.handleSubmit=this.handleSubmit.bind(this)}handleSubmit(a){if(null===localStorage.getItem("validas_hutang")||0===JSON.parse(localStorage.getItem("validas_hutang")).length)Object(d.e)("info","No Faktur Hutang Belum Dipilih"),this.setState({isLoading:!1});else{let a={hutang:JSON.parse(localStorage.getItem("validas_hutang")||[])};this.setState({isLoading:!0}),Object(g.j)("validasi/simpan/hutang",a).then(a=>{this.setState({isLoading:!1});let t=[];for(let e=0;e<2;e++){let e="";a.data.notahutang.forEach((a,t)=>{let n=a.n_alamat_customer.length;e+="========================================\n",e+="              NOTA HUTANG               \n",e+="========================================\nTanggal          : ".concat(a.tgl_system,"\nKode Sales       : ").concat(a.kode_sales,"\nNama Customer    : ").concat(a.nama_customer,"\nNo Hp            : ").concat(a.no_hp,"\nAlamat Customer  : ").concat(a.n_alamat_customer.slice(0,20),"\nNo Faktur Hutang : ").concat(a.no_faktur_hutang.toLocaleString("kr-KO"),"\n"),n>20&&(e+="                   ".concat(a.n_alamat_customer.slice(0,20),"\n")),n>40&&(e+="                   ".concat(a.n_alamat_customer.slice(40,20),"\n")),e+="========================================\n",e+="Keterangan\n",e+="========================================\n",a.detail_barang.forEach((a,t)=>{e+="Nama Barang      : ".concat(a.nama_barang,"\n"),e+="Kondisi          : ".concat(a.kondisi,"\n"),e+="Kategori         : ".concat(a.kategori,"\n"),e+="Jumlah           : ".concat(a.jumlah,"\n"),e+="Berat            : ".concat(a.berat.toFixed(3),"\n"),e+="========================================\n"}),e+="Berat            : ".concat(a.berat.toFixed(3),"\n"),e+="Bunga            : ".concat(a.bunga.toFixed(3),"\n"),e+="Jumlah Hutang    : ".concat(a.jumlah_hutang.toLocaleString("kr-KO"),"\n"),e+="========================================\n",e+="                               TTD      \n",e+="                                        \n",e+="                                        \n",e+="                                        \n",e+="                         (             )\n",e+="                                        \n",e+="                                        \n",e+="                                        \n"}),t.push(e)}document.getElementById("myInput").value=t.join(""),setTimeout(()=>{const a=document.createElement("a"),t=new Blob([document.getElementById("myInput").value],{type:"text/plain;charset=utf-8"});a.href=URL.createObjectURL(t),a.download="autoprint_hutang.txt",document.body.appendChild(a),a.click()},300),Object(d.e)("success","Hutang Berhasil Di Validasi"),localStorage.removeItem("validas_hutang"),this.props.dispatch(Object(o.d)("HeadValidasiHutang")),this.props.dispatch(Object(r.j)([]))}).catch(a=>{this.setState({isLoading:!1}),Object(d.e)("info","Gagal Mengambil Data Keserver")})}}clearHutang(){this.setState({isLoadingBatal:!0}),setTimeout(()=>{this.setState({isLoadingBatal:!1}),localStorage.removeItem("validas_hutang"),this.props.dispatch(Object(o.d)("HeadValidasiHutang")),this.props.dispatch(Object(r.j)([]))},1e3)}render(){return s.a.createElement("div",null,s.a.createElement("ol",{className:"breadcrumb float-xl-right"},s.a.createElement("li",{className:"breadcrumb-item"},s.a.createElement(i.b,{to:"#"},"Kasir")),s.a.createElement("li",{className:"breadcrumb-item active"},"Validasi Hutang")),s.a.createElement("h1",{className:"page-header"},"Validasi Hutang "),s.a.createElement(u.a,null,s.a.createElement("textarea",{style:{display:"none"},id:"myInput",rows:"100",cols:"100"}),s.a.createElement(u.c,null,"Validasi Hutang"),s.a.createElement("br",null),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-12"},s.a.createElement(S,{columns:this.state.columns,isLoading:this.state.isLoading,isLoadingBatal:this.state.isLoadingBatal,btnClear:()=>this.clearHutang(),onSubmit:a=>this.handleSubmit(a)})),s.a.createElement("div",{className:"col-12"}))),s.a.createElement("br",null)))}}f=Object(c.a)({form:"FormValidasiHutang",enableReinitialize:!0})(f);t.default=Object(l.b)()(f)}}]);
//# sourceMappingURL=70.fac2f509.chunk.js.map