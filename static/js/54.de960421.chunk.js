(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{1256:function(a,e,t){"use strict";t.r(e);var i=t(0),n=t.n(i),o=t(31),s=t(72),d=t(13),r=t(41),l=t(24),b=t.n(l),c=t(30),m=t(11),k=t(53),h=t(7),p=t(94),u=t(329),g=t(330),_=t(23);var B=(a,e)=>{const t={};return a.kode_gudang||(t.kode_gudang="Kode Gudang Tidak Boleh Kosong"),a.kode_baki||(t.kode_baki="Kode Baki Tidak Boleh Kosong"),a.nama_baki||(t.nama_baki="Nam Baki Tidak Boleh Kosong"),a.berat_baki||(t.berat_baki="Berat Baki Tidak Boleh Kosong"),a.berat_bandrol||(t.berat_bandrol="Berat Bandrol Tidak Boleh Kosong"),t},E=t(54),f=t.n(E),O=t(95);class j extends i.Component{constructor(a){super(a),this.state={aktif:!1,listgroup:[],parameter_bandrol:"2301"}}componentDidMount(){Object(m.d)("gudang/get/all/master").then(a=>{this.setState({listgroup:a.data})}).catch(a=>{console.log(a)}),setTimeout(()=>{this.props.isEdit?document.getElementById("nama_baki").focus():document.getElementById("kode_gudang").focus()},100),Object(m.d)("parabandrol/get/all").then(a=>{0===a.data.length?this.setState({parameter_bandrol:0}):this.setState({parameter_bandrol:a.data[0].berat_bandrol||0})}).then(()=>this.props.change("berat_bandrol",this.state.parameter_bandrol))}setFocus(){setTimeout(()=>{document.getElementById("kode_baki").focus()},100)}render(){return n.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:a=>{"Enter"===a.key&&a.preventDefault()},autoComplete:"off"},this.props.isEdit?n.a.createElement(n.a.Fragment,null,n.a.createElement(u.a,{name:"id",component:_.b,type:"hidden",label:"Kode Baki",readOnly:this.props.isEdit})):null,n.a.createElement("div",{className:"form-group"},n.a.createElement(u.a,{tabIndex:"1",id:"kode_gudang",label:"Kode Gudang",name:"kode_gudang",options:this.state.listgroup.filter(a=>void 0!==a.kode_gudang).map(a=>{return{value:a.kode_gudang,name:a.kode_gudang}}),value:this.props.kode_group,disabled:this.props.isEdit,onChange:()=>this.setFocus(),placeholder:"Silahkan Pilih Kode Gudang",component:_.f})),n.a.createElement(u.a,{tabIndex:"2",id:"kode_baki",name:"kode_baki",component:_.e,type:"text",label:"Kode Baki",readOnly:this.props.isEdit,placeholder:"Masukan Kode Baki"}),n.a.createElement(u.a,{tabIndex:"3",id:"nama_baki",name:"nama_baki",component:_.e,type:"text",label:"Nama Baki",placeholder:"Masukan Nama Baki"}),n.a.createElement(u.a,{tabIndex:"4",name:"berat_baki",component:_.e,normalize:O.a,type:"text",label:"Berat Baki",placeholder:"Masukan Berat Baki"}),n.a.createElement(u.a,{tabIndex:"5",name:"berat_bandrol",component:_.e,type:"text",normalize:O.a,label:"Berat Bandrol",onBlur:()=>this.setState({aktif:!0}),placeholder:"Masukan Berat Bandrol"}),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12 text-right"},n.a.createElement("button",{className:"btn btn-white",onClick:()=>this.props.dispatch(Object(d.Cb)()),type:"button",disabled:this.props.isLoading},"Batal"),"\xa0",n.a.createElement("button",{tabIndex:"6",className:this.state.aktif?"btn btn-primary":"btn btn-white",disabled:this.props.submitting,type:"submit"},this.props.isLoading?n.a.createElement(n.a.Fragment,null,n.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Menyimpan"):"Simpan Data"))),this.props.isLoading?n.a.createElement(f.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}j=Object(g.a)({form:"ModalDataBaki",enableReinitialize:!0,validate:B})(j);var x=Object(r.b)(a=>{if(null!==a.datamaster.ShowModalBaki)return{initialValues:{id:a.datamaster.ShowModalBaki.id,kode_gudang:a.datamaster.ShowModalBaki.kode_gudang,kode_baki:a.datamaster.ShowModalBaki.kode_baki,nama_baki:a.datamaster.ShowModalBaki.nama_baki,berat_baki:a.datamaster.ShowModalBaki.berat_baki,berat_bandrol:a.datamaster.ShowModalBaki.berat_bandrol}}},null)(j),S=t(228);const D=(a,e,t)=>{b.a.fire({html:"Apakah Anda Yakin Ingin Menghapus <h1><b>Kode Baki "+a+"</b> ?</h1>",icon:"warning",position:"top-center",cancelButtonText:"Tidak",showCancelButton:!0,confirmButtonText:"OK",showConfirmButton:!0}).then(a=>{a.isConfirmed&&Object(m.b)("baki/delete/by-kode-baki/"+e).then(()=>{Object(c.d)("Data Berhasil Di Hapus").then(()=>t(Object(d.lb)()))})}).catch(a=>{Object(c.e)("error",a.response.data)})};e.default=Object(r.b)(a=>({DataBaki:a.datamaster.getDataBaki,hideModal:a.datamaster.modalDialog}),null)(class extends n.a.Component{constructor(a){super(a),this.state={isEdit:!1,modalDialog:!1,isLoading:!1,columns:[{dataField:"kode_gudang",text:"Kode Gudang ",sort:!0},{dataField:"kode_baki",text:"Kode Baki"},{dataField:"nama_baki",text:"Nama Baki"},{dataField:"berat_baki",text:"Berat Baki",formatter:a=>a.toFixed(3)},{dataField:"berat_bandrol",text:"Berat Bandrol",formatter:a=>a.toFixed(3)},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:(a,e)=>{let t={id:e._id,kode_gudang:e.kode_gudang,kode_baki:e.kode_baki,nama_baki:e.nama_baki,berat_baki:e.berat_baki.toFixed(3),berat_bandrol:e.berat_bandrol.toFixed(3)};return n.a.createElement("div",{className:"row text-center"},n.a.createElement("div",{className:"col-12"},"TITIPJUAL"===e.kode_baki?null:n.a.createElement(n.a.Fragment,null,n.a.createElement("button",{onClick:()=>this.formEditBaki(t),className:"btn btn-primary mr-3"},n.a.createElement("i",{className:"fa fa-edit"})),n.a.createElement("button",{onClick:()=>D(e.kode_baki,e._id,this.props.dispatch),className:"btn btn-danger"},n.a.createElement("i",{className:"fa fa-trash"})))))}}]},this.handleSubmit=this.handleSubmit.bind(this)}componentDidMount(){this.props.dispatch(Object(d.lb)())}handleSubmit(a){this.setState({isLoading:!0});let e={nama_baki:a.nama_baki,berat_bandrol:a.berat_bandrol,berat_baki:a.berat_baki},t={kode_baki:a.kode_baki,nama_baki:a.nama_baki,kode_gudang:a.kode_gudang,berat_bandrol:a.berat_bandrol,berat_baki:a.berat_baki};this.state.isEdit?Object(m.p)("baki/edit/by-kode-baki/"+a.id,e).then(()=>{this.props.dispatch(Object(d.Cb)())}).then(()=>{Object(c.e)("success","Data Berhasil Disimpan")}).then(()=>{this.props.dispatch(Object(d.lb)())}).then(()=>{this.setState({isLoading:!1})}).then(()=>{this.props.dispatch(Object(k.d)("ModalDataBaki"))}).catch(a=>{Object(c.e)("info",void 0===a.response?"Terjadi Kesalahan Saat Megirim Data ":a.response.data),this.setState({isLoading:!1})}):Object(m.j)("baki/add",t).then(()=>{this.props.dispatch(Object(d.Cb)())}).then(()=>{Object(c.e)("success","Data Berhasil Disimpan")}).then(()=>{this.props.dispatch(Object(d.lb)())}).then(()=>{this.props.dispatch(Object(k.d)("ModalDataBaki"))}).then(()=>{this.setState({isLoading:!1})}).catch(a=>Object(h.a)(a,"baki/reactive/by-kode-baki/",t,this.props.dispatch,Object(d.lb)(),Object(d.Cb)(),"ModalDataBaki").then(()=>{this.setState({isLoading:!1})}))}formEditBaki(a){this.props.dispatch(Object(d.Db)()),this.props.dispatch(Object(d.T)(a)),this.setState({isEdit:!0})}ShowModalBaki(){this.props.dispatch(Object(d.Db)()),this.props.dispatch(Object(d.T)(!1)),this.setState({isEdit:!1})}render(){return n.a.createElement("div",null,n.a.createElement("ol",{className:"breadcrumb float-xl-right"},n.a.createElement("li",{className:"breadcrumb-item"},n.a.createElement(o.b,{to:"#"},"Data Master")),n.a.createElement("li",{className:"breadcrumb-item active"},"Master Baki")),n.a.createElement("h1",{className:"page-header"},"Master Baki "),n.a.createElement(s.a,null,n.a.createElement(s.c,null,"Master Baki"),n.a.createElement("br",null),n.a.createElement("div",{className:"container"},n.a.createElement(p.a,{keyField:"kode_baki",tambahData:!0,handleClick:()=>this.ShowModalBaki(),exportCsv:!0,data:this.props.DataBaki,columns:this.state.columns,empty:this.props.DataBaki,textEmpty:"Data Baki Kosong"})),n.a.createElement("br",null),n.a.createElement(S.a,{size:"P",title:this.state.isEdit?"Edit Data Baki":"Tambah Data Baki",content:n.a.createElement(x,{isLoading:this.state.isLoading,isEdit:this.state.isEdit,onSubmit:a=>this.handleSubmit(a)})})))}})}}]);
//# sourceMappingURL=54.de960421.chunk.js.map