{"version":3,"sources":["pages/Hutang/ValidasiHutang/HeadValidasi.jsx","pages/Hutang/ValidasiHutang/FormValidasiHutang.jsx"],"names":["HeadValidasi","Component","constructor","props","super","this","state","isLoading","DataValidasi","kode_sales","componentDidMount","dispatch","getDataSales","getDetaValidasi","e","setState","getData","then","res","change","data","nama_sales","catch","err","ToastNotification","hasil","postData","hutang","length","getDataValidasiHutang","render","selectRow","mode","clickToSelect","selectColumnPosition","onSelect","row","isSelect","rowIndex","no_faktur_hutang","cek","JSON","parse","localStorage","getItem","findIndex","push","setItem","stringify","splice","onSelectAll","forEach","list","index","react_default","a","createElement","onSubmit","handleSubmit","autoComplete","onKeyPress","key","preventDefault","className","tabel","keyField","columns","getValidasiHutang","empty","disabled","type","Fragment","isLoadingBatal","onClick","btnClear","loading_default","loading","background","loaderColor","reduxForm","form","enableReinitialize","connect","DataSales","datamaster","FormValidasiHutang","React","dataField","text","formatter","cell","parseFloat","toLocaleString","bind","datahutang","feedback","notahutang","jml_alamat","n_alamat_customer","concat","tgl_system","nama_customer","no_hp","slice","detail_barang","detail","nama_barang","kondisi","kategori","jumlah","berat","toFixed","bunga","jumlah_hutang","document","getElementById","value","join","setTimeout","element","file","Blob","href","URL","createObjectURL","download","body","appendChild","click","removeItem","reset","clearHutang","react_router_dom","to","panel","style","display","id","rows","cols","ValidasiHutang_HeadValidasi"],"mappings":"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","file":"static/js/70.14ece028.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { reduxForm } from \"redux-form\";\r\n// import { ReanderField, ReanderSelect } from \"../../../components/helpers/field\";\r\nimport { getDataSales } from \"../../../actions/datamaster_action\";\r\nimport { getData, postData } from \"../../../config/axios\";\r\nimport { ToastNotification } from \"../../../components/helpers/notification\";\r\nimport Tabel from \"../../../components/helpers/tabel\";\r\nimport { getDataValidasiHutang } from \"../../../actions/hutang_action\";\r\nimport Loading from 'react-fullscreen-loading';\r\n\r\nconst maptostate = (state) => {\r\n  return {\r\n    DataSales: state.datamaster.getDataSales,\r\n    getValidasiHutang: state.hutang.getDataValidasiHutang,\r\n  };\r\n};\r\nclass HeadValidasi extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isLoading: false,\r\n      DataValidasi: [],\r\n      kode_sales: false,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.dispatch(getDataSales());\r\n    this.getDetaValidasi()\r\n  }\r\n  getDataSales(e) {\r\n    this.setState({\r\n      kode_sales: e,\r\n    });\r\n    getData(\"sales/get/by-kode-sales/\")\r\n      .then((res) => {\r\n        this.props.change(\"nama_sales\", res.data.nama_sales);\r\n      })\r\n      .catch((err) => {\r\n        ToastNotification(\"info\", \"Gagal Mengambil Data Keserver\");\r\n      });\r\n  }\r\n  getDetaValidasi() {\r\n    this.setState({\r\n      isLoading: true,\r\n    });\r\n    let hasil = {\r\n      kode_sales: \"all\",\r\n    };\r\n    if (hasil.kode_sales === false) {\r\n      this.setState({\r\n        isLoading: false,\r\n      });\r\n      ToastNotification(\"info\", \"Kode Sales Harus Di pilih\");\r\n      this.setState({\r\n        isLoading: false,\r\n      });\r\n      return false;\r\n    }\r\n    postData(\"validasi/get/hutang\", hasil)\r\n      .then((res) => {\r\n        //   console.log(res.data[0].hutang);\r\n        if (res.data[0].hutang.length === 0) {\r\n          ToastNotification(\"info\", \"Belum Ada Data Validasi\");\r\n          this.setState({\r\n            isLoading: false,\r\n          });\r\n        } else {\r\n          ToastNotification(\"success\", \"Data Validasi Tersedia\");\r\n          this.setState({\r\n            isLoading: false,\r\n          });\r\n          this.props.dispatch(getDataValidasiHutang(res.data[0].hutang));\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        ToastNotification(\"info\", \"Terjadi Kesalahan Saat Request\");\r\n        this.setState({\r\n          isLoading: false,\r\n          DataValidasi: [],\r\n        });\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const selectRow = {\r\n      mode: \"checkbox\",\r\n      clickToSelect: true,\r\n      selectColumnPosition: \"left\",\r\n      onSelect: (row, isSelect, rowIndex, e) => {\r\n        // console.log(isSelect);\r\n        if (isSelect === true) {\r\n          let hasil = {\r\n            no_faktur_hutang: row.no_faktur_hutang,\r\n          };\r\n          let cek = JSON.parse(localStorage.getItem(\"validas_hutang\")) || [];\r\n          let hasil_cek = cek.findIndex(\r\n            (hasil) => hasil.no_faktur_hutang === row.no_faktur_hutang\r\n          );\r\n          if (hasil_cek === -1) {\r\n            cek.push(hasil);\r\n            localStorage.setItem(\"validas_hutang\", JSON.stringify(cek));\r\n          }\r\n        } else {\r\n          // console.log();\r\n          if (localStorage.getItem(\"validas_hutang\") === null) {\r\n          } else {\r\n            let data = JSON.parse(localStorage.getItem(\"validas_hutang\"));\r\n            data.splice(row.no_faktur_hutang, 1);\r\n            localStorage.setItem(\"validas_hutang\", JSON.stringify(data));\r\n          }\r\n        }\r\n      },\r\n      onSelectAll: (isSelect, data, e) => {\r\n        data.forEach((list, index) => {\r\n          if (isSelect === true) {\r\n            let hasil = {\r\n              no_faktur_hutang: list.no_faktur_hutang,\r\n            };\r\n            let cek = JSON.parse(localStorage.getItem(\"validas_hutang\")) || [];\r\n            let hasil_cek = cek.findIndex(\r\n              (hasil) => hasil.no_faktur_hutang === list.no_faktur_hutang\r\n            );\r\n            if (hasil_cek === -1) {\r\n              cek.push(hasil);\r\n              localStorage.setItem(\"validas_hutang\", JSON.stringify(cek));\r\n            }\r\n          } else {\r\n            if (localStorage.getItem(\"validas_hutang\") === null) {\r\n            } else {\r\n              let data = JSON.parse(localStorage.getItem(\"validas_hutang\"));\r\n              data.splice(list.no_faktur_hutang, 1);\r\n              localStorage.setItem(\"validas_hutang\", JSON.stringify(data));\r\n            }\r\n          }\r\n        });\r\n      },\r\n    };\r\n    // const expandRow = {\r\n    //   showExpandColumn: true,\r\n    //   renderer: (row) => (\r\n    //     <div className=\"row container\">\r\n    //       <div className=\"col-6\">\r\n    //         Nama Customer : {row.nama_customer}\r\n    //         <br />\r\n    //         No Hp : {row.no_hp}\r\n    //         <br />\r\n    //         Alamat Customer : {row.alamat_customer}\r\n    //         <br />\r\n    //         Berat Emas : {row.berat_emas}\r\n    //         <br />\r\n    //         Berat Bruto : {row.berat_bruto}\r\n    //         <br />\r\n    //         Total Bayar : {row.total_bayar}\r\n    //         <br />\r\n    //       </div>\r\n    //       <div className=\"col-6\">\r\n    //         <table>\r\n    //           <thead>\r\n    //             <tr>\r\n    //               <td>Nama Barang</td>\r\n    //               <td>Kondisi</td>\r\n    //               <td>Kategori</td>\r\n    //               <td>Jumlah</td>\r\n    //               <td>Berat</td>\r\n    //             </tr>\r\n    //           </thead>\r\n    //           <tbody>\r\n    //             <>\r\n    //               {row.detail_barang.map((detail, index) => (\r\n    //                 <tr>\r\n    //                   <td> {detail.nama_barang} </td>\r\n    //                   <td> {detail.kondisi} </td>\r\n    //                   <td> {detail.kategori} </td>\r\n    //                   <td> {detail.jumlah} </td>\r\n    //                   <td> {detail.berat} </td>\r\n    //                 </tr>\r\n    //               ))}\r\n    //             </>\r\n    //           </tbody>\r\n    //         </table>\r\n    //       </div>\r\n    //     </div>\r\n    //   ),\r\n    // };\r\n    \r\n    return (\r\n      <form onSubmit={this.props.handleSubmit} autoComplete=\"off\"\r\n      onKeyPress={(e) => {\r\n        e.key === \"Enter\" && e.preventDefault();\r\n      }}\r\n      >\r\n        <div className=\"row\">\r\n          {/* <div className=\"col-4\">\r\n            <Field\r\n              name=\"kode_sales\"\r\n              onChange={(e) => this.getDataSales(e)}\r\n              label=\"Pilih Kode Sales\"\r\n              placeholder=\"Masukan Kode Sales\"\r\n              options={this.props.DataSales.map((list) => {\r\n                let data = {\r\n                  value: list.kode_sales,\r\n                  name: list.nama_sales,\r\n                };\r\n                return data;\r\n              })}\r\n              component={ReanderSelect}\r\n            />\r\n          </div>\r\n          <div className=\"col-4\">\r\n            <Field\r\n              name=\"nama_sales\"\r\n              component={ReanderField}\r\n              type=\"text\"\r\n              label=\"Nama Sales\"\r\n              placeholder=\"Masukan Nama Sales\"\r\n              readOnly={true}\r\n            />\r\n          </div>\r\n          <div className=\"col-4\">\r\n            <label>&nbsp;</label>\r\n            <button\r\n              onClick={() => this.getDetaValidasi()}\r\n              className=\"btn btn-primary btn-block\"\r\n              disabled={this.state.isLoading}\r\n              type=\"button\"\r\n            >\r\n              {this.state.isLoading ? (\r\n                <>\r\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Cari Data\r\n                </>\r\n              ) : (\r\n                \"Cari Data\"\r\n              )}\r\n            </button>\r\n          </div> */}\r\n          <div className=\"col-12\">\r\n            <Tabel\r\n              selectRow={selectRow}\r\n              //   expandRow={expandRow}\r\n              keyField=\"no_faktur_hutang\"\r\n              columns={this.props.columns}\r\n              data={this.props.getValidasiHutang || []}\r\n              empty={true}\r\n            />\r\n          </div>\r\n          <div className=\"col-6\">\r\n            <button\r\n              className=\"btn btn-primary btn-block\"\r\n              disabled={this.props.isLoading}\r\n              type=\"submit\"\r\n            >\r\n              {this.props.isLoading ? (\r\n                <>\r\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Validasi\r\n                </>\r\n              ) : (\r\n                \"Validasi\"\r\n              )}\r\n            </button>\r\n          </div>\r\n          <div className=\"col-6\">\r\n            <button\r\n              className=\"btn btn-warning btn-block\"\r\n              disabled={this.props.isLoadingBatal}\r\n              onClick={this.props.btnClear}\r\n              type=\"button\"\r\n            >\r\n              {this.props.isLoadingBatal ? (\r\n                <>\r\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Batal\r\n                </>\r\n              ) : (\r\n                \"Batal\"\r\n              )}\r\n            </button>\r\n          </div>\r\n        </div>\r\n        {this.props.isLoading || this.props.isLoadingBatal || this.state.isLoading ? (\r\n        <Loading \r\n        loading\r\n        background=\"rgba(0, 0, 0, 0.35)\"\r\n         loaderColor=\"rgba(94, 147, 117, 1)\" />\r\n      ) : null}\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nHeadValidasi = reduxForm({\r\n  form: \"HeadValidasiHutang\",\r\n  enableReinitialize: true,\r\n})(HeadValidasi);\r\nexport default connect(maptostate)(HeadValidasi);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { reduxForm, reset } from \"redux-form\";\r\nimport { getDataValidasiHutang } from \"../../../actions/hutang_action.jsx\";\r\nimport { ToastNotification } from \"../../../components/helpers/notification.jsx\";\r\nimport { Panel, PanelHeader } from \"../../../components/panel/panel.jsx\";\r\nimport { postData } from \"../../../config/axios.jsx\";\r\nimport HeadValidasi from \"./HeadValidasi.jsx\";\r\n\r\nclass FormValidasiHutang extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isLoading: false,\r\n      isLoadingBatal: false,\r\n      //   DataValidasi: [],\r\n      columns: [\r\n        {\r\n          dataField: \"no_faktur_hutang\",\r\n          text: \"No Faktur Hutang \",\r\n        },\r\n        // {\r\n        //   dataField: \"tgl_system\",\r\n        //   text: \"Tanggal System \",\r\n        // },\r\n        // {\r\n        //   dataField: \"tgl_lunas\",\r\n        //   text: \"Tgl Lunas \",\r\n        // },\r\n        // {\r\n        //   dataField: \"tgl_tempo\",\r\n        //   text: \"Tgl Jth Tempo \",\r\n        // },\r\n        {\r\n          dataField: \"nama_customer\",\r\n          text: \"Nama Customer \",\r\n        },\r\n        {\r\n          dataField: \"jumlah_hutang\",\r\n          text: \"Jumlah Hutang \",\r\n          formatter: (cell) => {\r\n            return <span>{parseFloat(cell).toLocaleString(\"kr-KO\")}</span>;\r\n          },\r\n        },\r\n        {\r\n          dataField: \"no_hp\",\r\n          text: \"No Hp \",\r\n        },\r\n        {\r\n          dataField: \"alamat_customer\",\r\n          text: \"Alamat \",\r\n        },\r\n\r\n        // {\r\n        //   dataField: \"lama_pinjam\",\r\n        //   text: \"Lama Pinjam \",\r\n        // },\r\n        // {\r\n        //   dataField: \"bunga\",\r\n        //   text: \"Bunga \",\r\n        // },\r\n        // {\r\n        //   dataField: \"total_hutang\",\r\n        //   text: \"Total Hutang \",\r\n        // },\r\n      ],\r\n    };\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  handleSubmit(data) {\r\n    if (\r\n      localStorage.getItem(\"validas_hutang\") === null ||\r\n      JSON.parse(localStorage.getItem(\"validas_hutang\")).length === 0\r\n    ) {\r\n      ToastNotification(\"info\", \"No Faktur Hutang Belum Dipilih\");\r\n      this.setState({\r\n        isLoading: false,\r\n      });\r\n    } else {\r\n      let data_hutang = JSON.parse(\r\n        localStorage.getItem(\"validas_hutang\") || []\r\n      );\r\n      let hutang = {\r\n        hutang: data_hutang,\r\n      };\r\n      this.setState({\r\n        isLoading: true,\r\n      });\r\n      // console.log(hutang);\r\n      postData(\"validasi/simpan/hutang\", hutang)\r\n        .then((res) => {\r\n          this.setState({\r\n            isLoading: false,\r\n          });\r\nlet datahutang = [];\r\nfor (let index = 0; index < 2; index++) {\r\nlet feedback = '';\r\nres.data.notahutang.forEach((row, index) => {\r\nlet jml_alamat = row.n_alamat_customer.length;\r\nfeedback += `========================================\\n`\r\nfeedback += `              NOTA HUTANG               \\n`\r\nfeedback += `========================================\r\nTanggal          : ${row.tgl_system}\r\nKode Sales       : ${row.kode_sales}\r\nNama Customer    : ${row.nama_customer}\r\nNo Hp            : ${row.no_hp}\r\nAlamat Customer  : ${row.n_alamat_customer.slice(0,20)}\r\nNo Faktur Hutang : ${row.no_faktur_hutang.toLocaleString(\"kr-KO\")}\r\n`\r\nif(jml_alamat>20){\r\nfeedback += `                   ${row.n_alamat_customer.slice(0,20)}\r\n`;\r\n}\r\nif(jml_alamat>40){\r\nfeedback += `                   ${row.n_alamat_customer.slice(40,20)}\r\n`;\r\n}\r\nfeedback += `========================================\\n`\r\nfeedback += `Keterangan\\n`\r\nfeedback += `========================================\\n`\r\nrow.detail_barang.forEach((detail, index) => {\r\nfeedback += `Nama Barang      : ${detail.nama_barang}\\n`\r\nfeedback += `Kondisi          : ${detail.kondisi}\\n`\r\nfeedback += `Kategori         : ${detail.kategori}\\n`\r\nfeedback += `Jumlah           : ${detail.jumlah}\\n`\r\nfeedback += `Berat            : ${detail.berat.toFixed(3)}\\n`\r\nfeedback += `========================================\\n`\r\n})\r\nfeedback += `Berat            : ${row.berat.toFixed(3)}\\n`\r\nfeedback += `Bunga            : ${row.bunga.toFixed(3)}\\n`\r\nfeedback += `Jumlah Hutang    : ${row.jumlah_hutang.toLocaleString(\"kr-KO\")}\\n`\r\nfeedback += `========================================\\n`\r\nfeedback += `                               TTD      \\n`\r\nfeedback += `                                        \\n`\r\nfeedback += `                                        \\n`\r\nfeedback += `                                        \\n`\r\nfeedback += `                         (             )\\n`\r\nfeedback += `                                        \\n`\r\nfeedback += `                                        \\n`\r\nfeedback += `                                        \\n`\r\n}\r\n)\r\n  datahutang.push(feedback);\r\n}          \r\n  \r\n    \r\n          document.getElementById(\"myInput\").value = datahutang.join('');\r\n          setTimeout(() => {\r\n            const element = document.createElement(\"a\");\r\n            const file = new Blob([document.getElementById(\"myInput\").value], {\r\n              type: \"text/plain;charset=utf-8\",\r\n            });\r\n            element.href = URL.createObjectURL(file);\r\n            element.download = \"autoprint_hutang.txt\";\r\n            document.body.appendChild(element);\r\n            element.click();\r\n          }, 300);\r\n          ToastNotification(\"success\", \"Hutang Berhasil Di Validasi\");\r\n          localStorage.removeItem(\"validas_hutang\");\r\n          this.props.dispatch(reset(\"HeadValidasiHutang\"));\r\n          this.props.dispatch(getDataValidasiHutang([]));\r\n        })\r\n        .catch((err) => {\r\n          this.setState({\r\n            isLoading: false,\r\n          });\r\n          ToastNotification(\"info\", \"Gagal Mengambil Data Keserver\");\r\n        });\r\n    }\r\n    //   console.log();\r\n  }\r\n  clearHutang() {\r\n    this.setState({\r\n      isLoadingBatal: true,\r\n    });\r\n    setTimeout(() => {\r\n      this.setState({\r\n        isLoadingBatal: false,\r\n      });\r\n      localStorage.removeItem(\"validas_hutang\");\r\n      this.props.dispatch(reset(\"HeadValidasiHutang\"));\r\n      this.props.dispatch(getDataValidasiHutang([]));\r\n    }, 1000);\r\n  }\r\n//   Reprint(id) {\r\n//     let hasil = {\r\n//       hutang:\r\n//       [\r\n//         {\r\n//           no_faktur_hutang: \"dc35cabd-269e-4dfb-b761-384c871335dd\"\r\n//         },\r\n//         {\r\n//           no_faktur_hutang: \"543f65c0-66bf-4db2-98a9-13c081d2495e\"\r\n//         }\r\n//       ]\r\n//     }\r\n//     postData('validasi/simpan/hutang', hasil).then((res) => {\r\n//   console.log(res.data.notahutang);\r\n// let feedback = '';\r\n// res.data.notahutang.forEach((row, index) => {\r\n//   let jml_alamat = row.n_alamat_customer.length;\r\n// feedback += `========================================\r\n// Tanggal          : ${row.tgl_system}\r\n// Kode Sales       : ${row.kode_sales}\r\n// Nama Customer    : ${row.nama_customer}\r\n// No Hp            : ${row.no_hp}\r\n// Alamat Customer  : ${row.n_alamat_customer.split(0,20)}\r\n// No Faktur Hutang : ${row.no_faktur_hutang.toLocaleString(\"kr-KO\")}\r\n// `\r\n// if(jml_alamat>20){\r\n// feedback += `                   ${row.n_alamat_customer.split(0,20)}\r\n// `;\r\n// }\r\n// if(jml_alamat>40){\r\n// feedback += `                   ${row.n_alamat_customer.split(40,20)}\r\n// `;\r\n// }\r\n// feedback += `========================================\\n`\r\n// feedback += `Keterangan\\n`\r\n// feedback += `========================================\\n`\r\n// row.detail_barang.forEach((detail, index) => {\r\n// feedback += `Nama Barang      : ${detail.nama_barang}\\n`\r\n// feedback += `Kondisi          : ${detail.kondisi}\\n`\r\n// feedback += `Kategori         : ${detail.kategori}\\n`\r\n// feedback += `Jumlah           : ${detail.jumlah}\\n`\r\n// feedback += `Berat            : ${detail.berat.toFixed(3)}\\n`\r\n// feedback += `========================================\\n`\r\n// })\r\n// feedback += `Berat            : ${row.berat.toFixed(3)}\\n`\r\n// feedback += `Bunga            : ${row.bunga.toFixed(3)}\\n`\r\n// feedback += `Jumlah Hutang    : ${row.jumlah_hutang.toLocaleString(\"kr-KO\")}\\n`\r\n// feedback += `========================================\\n`\r\n// feedback += `\r\n\r\n\r\n\r\n\r\n\r\n\r\n// `\r\n// })\r\n    \r\n//           document.getElementById(\"myInput\").value = feedback;\r\n    \r\n//         }).then(() => {\r\n//           // console.log('masuk');\r\n//           // const element = document.createElement(\"a\");\r\n//           // const file = new Blob([document.getElementById(\"myInput\").value], {\r\n//           //   type: \"text/plain;charset=utf-8\",\r\n//           // });\r\n//           // element.href = URL.createObjectURL(file);\r\n//           // element.download = \"autoprint_service.txt\";\r\n//           // document.body.appendChild(element);\r\n//           // element.click();\r\n//         })\r\n          \r\n//           .catch((err) => {\r\n          \r\n//         })\r\n//       }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <ol className=\"breadcrumb float-xl-right\">\r\n          <li className=\"breadcrumb-item\">\r\n            <Link to=\"#\">Kasir</Link>\r\n          </li>\r\n          <li className=\"breadcrumb-item active\">Validasi Hutang</li>\r\n        </ol>\r\n        <h1 className=\"page-header\">Validasi Hutang </h1>\r\n        <Panel>\r\n        <textarea\r\n            style={{ display: \"none\" }}\r\n            id=\"myInput\"\r\n            rows=\"100\"\r\n            cols=\"100\"\r\n          />\r\n          <PanelHeader>Validasi Hutang</PanelHeader>\r\n          {/* <button onClick={()=>this.Reprint()}> PRINT </button> */}\r\n          <br />\r\n          {/* Validasi Hutang */}\r\n          <div className=\"container\">\r\n            <div className=\"row\">\r\n              <div className=\"col-12\">\r\n                <HeadValidasi\r\n                  columns={this.state.columns}\r\n                  isLoading={this.state.isLoading}\r\n                  isLoadingBatal={this.state.isLoadingBatal}\r\n                  btnClear={()=>this.clearHutang()}\r\n                  onSubmit={(data) => this.handleSubmit(data)}\r\n                />\r\n              </div>\r\n              <div className=\"col-12\"></div>\r\n            </div>\r\n          </div>\r\n          <br />\r\n          {/* End Tambah Validasi Hutang  */}\r\n        </Panel>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nFormValidasiHutang = reduxForm({\r\n  form: \"FormValidasiHutang\",\r\n  enableReinitialize: true,\r\n})(FormValidasiHutang);\r\nexport default connect()(FormValidasiHutang);\r\n"],"sourceRoot":""}