(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{1241:function(e,t,a){"use strict";a.r(t);var i=a(0),o=a.n(i),s=a(27),n=a(131),r=a(15),l=a(48),d=a(24),p=a(55),c=a(13),m=a(7),h=a(92),b=a(329),u=a(330),g=a(30);var E=(e,t)=>{const a={};return e.kode_group||(a.kode_group="Kode Group Tidak Boleh Kosong"),e.berat||(a.berat="Berat Tidak Boleh Kosong"),a},P=a(61),k=a.n(P),O=a(93),f=a(134);const j=Object(f.createNumberMask)({prefix:"Rp. ",suffix:" ,-",locale:"kr-KO"});class S extends i.Component{constructor(...e){super(...e),this.state={aktif:!1}}componentDidMount(){this.props.dispatch(Object(r.u)()),setTimeout(()=>{this.props.isEdit?document.getElementById("berat").focus():document.getElementById("kode_group").focus()},100)}render(){return o.a.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off",onKeyPress:e=>{"Enter"===e.key&&e.preventDefault()}},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-6"},o.a.createElement(b.a,{id:"kode_group",label:"Kode Group",name:"kode_group",options:this.props.datagroup.filter(e=>void 0!==e.kode_group).map(e=>{return{value:e.kode_group,name:e.kode_group+" - "+e.nama_group}}),value:this.props.kode_group,disabled:this.props.isEdit,placeholder:"Silahkan Pilih Kode Group",component:g.f})),o.a.createElement("div",{className:"col-6"},o.a.createElement(b.a,Object.assign({id:"berat",name:"nominal",component:g.e,type:"text"},j,{label:"Nominal",placeholder:"Masukan Nominal"}))),o.a.createElement("div",{className:"col-12"},o.a.createElement(b.a,{id:"poin",name:"poin",component:g.e,type:"text",normalize:O.c,label:"Poin",placeholder:"Masukan Poin",onBlur:()=>this.setState({aktif:!0})})),o.a.createElement("div",{className:"col-12 text-right"},"\xa0",o.a.createElement("button",{className:"btn btn-white",onClick:()=>this.props.dispatch(Object(r.Ab)()),type:"button",disabled:this.props.isLoading},"Batal"),"\xa0",o.a.createElement("button",{className:this.state.aktif?"btn btn-primary":"btn btn-white",disabled:this.props.isLoading,type:"submit"},this.props.isLoading?o.a.createElement(o.a.Fragment,null,o.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Menyimpan"):"Simpan Data"))),this.props.isLoading?o.a.createElement(k.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}S=Object(u.a)({form:"ModalParamterPoint",enableReinitialize:!0,validate:E})(S);var _=Object(l.b)(e=>{if(null!==e.datamaster.ShowModalParameterPoint)return{datagroup:e.datamaster.GetDataGroup,initialValues:{kode_group:e.datamaster.ShowModalParameterPoint.kode_group,nominal:e.datamaster.ShowModalParameterPoint.nominal,poin:e.datamaster.ShowModalParameterPoint.poin}}},null)(S),y=a(228);t.default=Object(l.b)(e=>({ParameterPoint:e.datamaster.getParameterPoint,hideModal:e.datamaster.modalDialog}),null)(class extends o.a.Component{constructor(e){super(e),this.state={isEdit:!1,modalDialog:!1,isLoading:!1,type_poin:"GRAM"},this.handleSubmit=this.handleSubmit.bind(this)}componentDidMount(){this.props.dispatch(Object(r.xb)()),Object(c.e)("para-system/key/TIPE_POIN").then(e=>{this.setState({type_poin:"GRAM"===e.data.value?"GRAM":"RP"})})}handleSubmit(e){this.setState({isLoading:!0});let t={kode_group:e.kode_group,nominal:e.nominal,poin:e.poin};this.state.isEdit?Object(c.p)("parapoin/edit/"+e.kode_group,t).then(()=>{this.props.dispatch(Object(r.Ab)())}).then(()=>{Object(d.e)("success","Data Berhasil Diedit")}).then(()=>{this.props.dispatch(Object(r.xb)())}).then(()=>{this.setState({isLoading:!1})}).then(()=>{this.props.dispatch(Object(p.d)("ModalParamterPoint"))}).catch(e=>{Object(d.e)("info","Terjadi Kesalahan Saat Menyimpan Data"),this.setState({isLoading:!0})}):Object(c.j)("parapoin/add",t).then(()=>{this.props.dispatch(Object(r.Ab)())}).then(()=>{Object(d.e)("success","Data Berhasil Simpan")}).then(()=>{this.props.dispatch(Object(r.xb)())}).then(()=>{this.props.dispatch(Object(p.d)("ModalParamterPoint"))}).then(()=>{this.setState({isLoading:!1})}).catch(a=>Object(m.a)(a,"sales/reactive/by-kode-sales/",e.kode_sales,t,this.props.dispatch,Object(r.xb)(),Object(r.Ab)(),"ModalParamterPoint").then(()=>{this.setState({isLoading:!1})}))}formEditParameterPoint(e){this.props.dispatch(Object(r.Bb)()),this.props.dispatch(Object(r.eb)(e)),this.setState({isEdit:!0})}showModalSales(){this.props.dispatch(Object(r.Bb)()),this.props.dispatch(Object(r.eb)(!1)),this.setState({isEdit:!1})}render(){const e=[{dataField:"kode_group",text:"Kode Group",sort:!0},{dataField:"nominal",text:"GRAM"===this.state.type_poin?"Gram":"Rp",formatter:(e,t)=>e.toLocaleString("ko-KO")||0},{dataField:"poin",text:"Poin"},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:(e,t)=>{let a={kode_group:t.kode_group,nominal:t.nominal,poin:t.poin};return o.a.createElement("div",{className:"row text-center"},o.a.createElement("div",{className:"col-12"},o.a.createElement("button",{onClick:()=>this.formEditParameterPoint(a),className:"btn btn-primary mr-3"}," ",o.a.createElement("i",{className:"fa fa-edit"}))))}}];return o.a.createElement("div",null,o.a.createElement("ol",{className:"breadcrumb float-xl-right"},o.a.createElement("li",{className:"breadcrumb-item"},o.a.createElement(s.b,{to:"#"},"Data Master")),o.a.createElement("li",{className:"breadcrumb-item active"},"Parameter Point")),o.a.createElement("h1",{className:"page-header"},"Parameter Point "),o.a.createElement(n.a,null,o.a.createElement(n.c,null,"Parameter Point"),o.a.createElement("br",null),o.a.createElement("div",{className:"container"},o.a.createElement(h.a,{keyField:"kode_group",tambahData:!0,handleClick:()=>this.showModalSales(),exportCsv:!0,data:this.props.ParameterPoint,columns:e,empty:this.props.ParameterPoint,textEmpty:"Parameter Point Kosong"})),o.a.createElement("br",null),o.a.createElement(y.a,{size:"P",title:this.state.isEdit?"Edit Parameter Point":"Tambah Parameter Point",content:o.a.createElement(_,{isLoading:this.state.isLoading,isEdit:this.state.isEdit,type_poin:this.state.type_poin,onSubmit:e=>this.handleSubmit(e)})})))}})}}]);
//# sourceMappingURL=68.304d2f9d.chunk.js.map